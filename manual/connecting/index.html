<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Asciidoctor 1.5.8"><title>Connecting Syndesis to Applications and Services</title><link rel="stylesheet" href="/css/syndesis.css?t=1588839789363"><link href="https://fonts.googleapis.com/css?family=Quicksand&amp;display=swap" rel="stylesheet"><div id="wrapper"><a href="https://github.com/syndesisio" class="github-corner hidden-md-down" aria-label="View source on Github" rel="nofollow" target="_blank"><svg width="74" height="74" viewBox="0 0 250 250" style="fill:#fff;z-index:2000;color:#0088ce;mix-blend-mode:screen;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7
          120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9
          125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6
          C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0
          C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1
          C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4
          C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9
          C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5
          C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9
          L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><nav class="navbar topnav fixed-top navbar-inverse bg-primary navbar-toggleable-md sps sps--abv"><button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#top-nav" aria-controls="top-nav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button> <a href="/" title="Syndesis - Open source integration platform"><svg id="artwork" xmlns="http://www.w3.org/2000/svg" width="190px" height="39.33px" viewBox="0 0 1300 300" preserveAspectRatio="xMidYMin slice"><defs><style>.cls-1{fill:#9adde8}.cls-2{fill:#49badc}.cls-3{fill:#fff}</style></defs><title>Syndesis - Open source integration platform</title><polygon class="cls-1" points="129.95 98.77 33.99 144.38 122.22 167.37 218.18 121.75 129.95 98.77"/><polygon class="cls-2" points="218.18 121.75 218.18 121.75 122.22 167.37 242.17 198.61 218.18 121.75"/><polygon class="cls-1" points="154.99 86.86 131 10 10 67.52 129.95 98.77 154.99 86.86"/><polygon class="cls-2" points="33.99 144.38 129.95 98.77 10 67.52 10 67.52 33.99 144.38"/><polygon class="cls-2" points="189.64 25.27 131 10 154.99 86.86 213.63 102.14 189.64 25.27"/><polygon class="cls-2" points="38.54 164 62.53 240.86 121.17 256.13 121.17 256.13 97.18 179.27 97.18 179.27 38.54 164"/><polygon class="cls-1" points="242.17 198.61 122.22 167.37 97.18 179.27 121.17 256.13 242.17 198.61"/><path class="cls-3" d="M358.91,210.23c-23.57,0-43.44-17.22-44.06-41.6H329.2c.41,22.74,17.21,29.3,37.09,29.3,16.6,0,35.65-9.63,35.65-28.48,0-14.76-10.65-21.73-23.15-25.82-24-8-60.45-15.58-60.45-47.55,0-25.82,23.77-40,47.13-40,19.47,0,44.88,6.77,48.15,35.25H399.28c-.41-18.24-17-23-32.17-23-15.37,0-34.43,7.79-34.43,25.82,0,42,83.61,23,83.61,74C416.29,200.39,388.62,210.23,358.91,210.23Z"/><path class="cls-3" d="M484.32,143.22l-54.51-84h17l45.29,71.52L537.4,59.2h14.34l-54.1,83.61v64.34H484.32Z"/><path class="cls-3" d="M572.24,59.2H587.4L669,189.32h.41V59.2h13.32v148h-16.8L586,79.28h-.41V207.15H572.24Z"/><path class="cls-3" d="M760,59.2c48.56,0,76.23,25,76.23,74s-27.67,74-76.23,74H720V59.2Zm3.27,135.66c41.6,0,58.61-24.39,58.61-61.69,0-43.64-25.61-62.91-67.62-61.68h-20.9V194.86Z"/><path class="cls-3" d="M870.19,207.15V59.2H958.1V71.49H883.51v53.08h71.73v12.29H883.51v58h77.67v12.29Z"/><path class="cls-3" d="M1030.44,210.23c-23.56,0-43.44-17.22-44.05-41.6h14.34c.41,22.74,17.21,29.3,37.09,29.3,16.6,0,35.66-9.63,35.66-28.48,0-14.76-10.66-21.73-23.16-25.82-24-8-60.45-15.58-60.45-47.55,0-25.82,23.77-40,47.13-40,19.47,0,44.88,6.77,48.16,35.25h-14.35c-.41-18.24-17-23-32.17-23-15.37,0-34.43,7.79-34.43,25.82,0,42,83.61,23,83.61,74C1087.82,200.39,1060.16,210.23,1030.44,210.23Z"/><path class="cls-3" d="M1121.63,207.15V58.58H1135V207.15Z"/><path class="cls-3" d="M1212.62,210.23c-23.56,0-43.44-17.22-44.06-41.6h14.35c.41,22.74,17.21,29.3,37.09,29.3,16.6,0,35.66-9.63,35.66-28.48,0-14.76-10.66-21.73-23.16-25.82-24-8-60.45-15.58-60.45-47.55,0-25.82,23.77-40,47.13-40,19.47,0,44.88,6.77,48.16,35.25H1253c-.41-18.24-17-23-32.17-23-15.37,0-34.43,7.79-34.43,25.82,0,42,83.61,23,83.61,74C1270,200.39,1242.34,210.23,1212.62,210.23Z"/></svg></a><div class="collapse navbar-collapse" id="top-nav"><ul class="navbar-nav ml-auto mt-2 mt-md-0 mr-lg-4"><li class="nav-item ml-lg-3 ml-0"><a class="nav-link" href="/quickstart">Quickstart</a></li><li class="nav-item ml-lg-3 ml-0"><a class="nav-link" href="/docs">Documentation</a></li><li class="nav-item ml-lg-3 ml-0"><a class="nav-link" href="/blog">Blog</a></li><li class="nav-item ml-lg-3 ml-0"><a class="nav-link" href="/faq">FAQ</a></li><li class="nav-item ml-lg-3 ml-0"><a class="nav-link" href="/community">Community</a></li><li class="nav-item ml-lg-3 ml-0"><a class="nav-link" href="/about">About</a></li></ul></div></nav><div class="article"></div></div></head><body id="connecting-to-applications-and-services" class="book"><div id="header"><h1>Connecting Syndesis to Applications and Services</h1><div id="toc" class="toc"><div id="toctitle">Table of Contents</div><ul class="sectlevel1"><li><a href="#supported-connectors_connectors">1. Connectors that are supported by Syndesis</a></li><li><a href="#connecting-to-aws_connectors">2. Connecting to Amazon Web Services</a><ul class="sectlevel2"><li><a href="#obtaining-aws-credentials_aws">2.1. Obtaining AWS credentials for creating connections to Amazon services</a></li><li><a href="#connecting-to-amazon-dynamodb_aws">2.2. Connecting to Amazon DynamoDB</a><ul class="sectlevel3"><li><a href="#create-dynamodb-connections_dynamodb">2.2.1. Creating Amazon DynamoDB connections</a></li><li><a href="#adding-dynamodb-connection-query_dynamodb">2.2.2. Obtaining data from an Amazon DynamoDB table</a></li><li><a href="#adding-dynamodb-connection-put_dynamodb">2.2.3. Adding data to an Amazon DynamoDB table</a></li><li><a href="#adding-dynamodb-connection-remove_dynamodb">2.2.4. Removing data from an Amazon DynamoDB table</a></li></ul></li><li><a href="#connecting-to-amazon-sns_aws">2.3. Connecting to Amazon Simple Notification Service (SNS)</a><ul class="sectlevel3"><li><a href="#creating-amazon-sns-connections_sns">2.3.1. Creating Amazon SNS connections</a></li><li><a href="#adding-amazon-sns-connection-send_sns">2.3.2. Sending messages to Amazon SNS</a></li></ul></li><li><a href="#connecting-to-amazon-sqs_aws">2.4. Connecting to Amazon Simple Queue Service (SQS)</a><ul class="sectlevel3"><li><a href="#creating-amazon-sqs-connections_sqs">2.4.1. Creating Amazon SQS connections</a></li><li><a href="#adding-amazon-sqs-connection-retrieve_sqs">2.4.2. Obtaining messages from Amazon SQS to trigger integration execution</a></li><li><a href="#adding-amazon-sqs-connection-send_sqs">2.4.3. Sending messages to an Amazon SQS queue</a></li></ul></li><li><a href="#connecting-to-amazon-s3_aws">2.5. Connecting to Amazon Simple Storage Service (S3)</a><ul class="sectlevel3"><li><a href="#create-s3-connection_s3">2.5.1. Creating Amazon S3 connections</a></li><li><a href="#adding-s3-connection-start_s3">2.5.2. Obtaining data from Amazon S3 to trigger integration execution</a></li><li><a href="#adding-s3-connection-finish_s3">2.5.3. Adding data to Amazon S3 to finish an integration</a></li><li><a href="#adding-s3-connection-middle_s3">2.5.4. Adding data to Amazon S3 in the middle of an integration</a></li></ul></li></ul></li><li><a href="#connecting-to-amq_connectors">3. Connecting to AMQ</a><ul class="sectlevel2"><li><a href="#create-amq-connection_amq">3.1. Creating an AMQ connection</a></li><li><a href="#adding-amq-connection-start_amq">3.2. Adding an AMQ connection to trigger integration execution upon receiving messages</a></li><li><a href="#adding-amq-connection-finish_amq">3.3. Publishing AMQ messages to finish an integration</a></li><li><a href="#adding-amq-connection-middle_amq">3.4. Publishing AMQ messages in the middle of an integration</a></li></ul></li><li><a href="#connecting-to-amqp_connectors">4. Connecting to AMQP</a><ul class="sectlevel2"><li><a href="#create-amqp-connection_amqp">4.1. Creating an AMQP connection</a></li><li><a href="#adding-amqp-connection-start_amqp">4.2. Adding an AMQP connection to trigger integration execution upon receiving messages</a></li><li><a href="#adding-amqp-connection-middle_amqp">4.3. Publishing messages to AMQP in the middle of a flow or to finish an integration</a></li></ul></li><li><a href="#connecting-to-box_connectors">5. Connecting to Box</a><ul class="sectlevel2"><li><a href="#register-with-box_box">5.1. Registering Syndesis as a Box client</a></li><li><a href="#creating-box-connections_box">5.2. Creating a Box connection</a></li><li><a href="#adding-box-connection-middle_box">5.3. Downloading or uploading a Box file in the middle of an integration</a></li><li><a href="#adding-box-connection-finish_box">5.4. Uploading files to Box to finish an integration</a></li></ul></li><li><a href="#connecting-to-dropbox_connectors">6. Connecting to Dropbox</a><ul class="sectlevel2"><li><a href="#register-with-dropbox_dropbox">6.1. Registering Syndesis as a Dropbox client</a></li><li><a href="#create-dropbox-connection_dropbox">6.2. Creating a Dropbox connection</a></li><li><a href="#adding-dropbox-connection-start_dropbox">6.3. Obtaining files from Dropbox to trigger integration execution</a></li><li><a href="#adding-dropbox-connection-finish_dropbox">6.4. Adding files to Dropbox to finish an integration</a></li><li><a href="#adding-dropbox-connection-middle_dropbox">6.5. Accessing Dropbox in the middle of an integration</a></li></ul></li><li><a href="#connecting-to-email-servers_connectors">7. Connecting to Email Servers (IMAP, POP3, SMTP)</a><ul class="sectlevel2"><li><a href="#creating-a-connection-to-an-imap-or-pop3-email-server_email">7.1. Creating a connection to an IMAP or POP3 email server</a></li><li><a href="#creating-a-connection-to-an-smtp-email-server_email">7.2. Creating a connection to an SMTP email server</a></li><li><a href="#obtaining-email-to-trigger-integration-execution_email">7.3. Obtaining email to trigger integration execution</a></li><li><a href="#sending-email-from-an-integration_email">7.4. Sending email from an integration</a></li></ul></li><li><a href="#connecting-to-fhir_connectors">8. Connecting to FHIR</a><ul class="sectlevel2"><li><a href="#creating-fhir-connections_fhir">8.1. Creating a connection to a FHIR server</a></li><li><a href="#adding-fhir-connection-read_fhir">8.2. Obtaining a resource from a FHIR server</a></li><li><a href="#adding-fhir-connection-search_fhir">8.3. Querying a FHIR server for resources</a></li><li><a href="#adding-fhir-connection-create_fhir">8.4. Creating a resource on a FHIR server</a></li><li><a href="#adding-fhir-connection-update_fhir">8.5. Updating all fields in a resource on a FHIR server</a></li><li><a href="#adding-fhir-connection-patch_fhir">8.6. Updating specified fields in a resource on a FHIR server</a></li><li><a href="#adding-fhir-connection-transaction_fhir">8.7. Creating resources of different types on a FHIR server</a></li><li><a href="#adding-fhir-connection-delete_fhir">8.8. Deleting a resource from a FHIR server</a></li></ul></li><li><a href="#connecting-to-ftp_connectors">9. Connecting to an FTP or SFTP server</a><ul class="sectlevel2"><li><a href="#creating-ftp-connections_ftp">9.1. Creating an FTP or SFTP connection</a></li><li><a href="#adding-ftp-start-connection_ftp">9.2. Obtaining files from an FTP or SFTP server</a></li><li><a href="#adding-ftp-finish-middle-connection_ftp">9.3. Uploading files to an FTP or SFTP server</a></li></ul></li><li><a href="#connecting-to-google_connectors">10. Connecting to Google applications</a><ul class="sectlevel2"><li><a href="#register-with-google_google">10.1. Registering Syndesis as a Google client application</a></li><li><a href="#connecting-to-gmail_google">10.2. Connecting to Gmail</a><ul class="sectlevel3"><li><a href="#create-gmail-connection_gmail">10.2.1. Creating a Gmail connection</a></li><li><a href="#alternatives-for-populating-email-to-send_gmail">10.2.2. Alternatives for populating email to send</a></li><li><a href="#add-gmail-connection-start_gmail">10.2.3. Triggering an integration when polling returns a Gmail message</a></li><li><a href="#add-gmail-connection-finish-middle_gmail">10.2.4. Sending an email from a Gmail account</a></li></ul></li><li><a href="#connecting-to-google-calendar_google">10.3. Connecting to Google Calendar</a><ul class="sectlevel3"><li><a href="#create-google-calendar-connection_calendar">10.3.1. Creating a Google Calendar connection</a></li><li><a href="#add-google-calendar-connection-start_calendar">10.3.2. Triggering an integration when polling returns an event from a Google Calendar</a></li><li><a href="#add-google-calendar-connection-to-get-one-event_calendar">10.3.3. Obtaining a particular event from a Google Calendar</a></li><li><a href="#add-google-calendar-connection-add-event_calendar">10.3.4. Adding an event to a Google Calendar</a></li><li><a href="#add-google-calendar-connection-update-event_calendar">10.3.5. Updating an event in a Google Calendar</a></li></ul></li><li><a href="#connecting-to-google-sheets_google">10.4. Connecting to Google Sheets</a><ul class="sectlevel3"><li><a href="#create-google-sheets-connection_sheets">10.4.1. Creating a Google Sheets connection</a></li><li><a href="#add-google-sheets-connection-get-sheet-values_sheets">10.4.2. Obtaining spreadsheet data to trigger an integration or in the middle of a flow</a></li><li><a href="#add-google-sheets-connection-get-properties_sheets">10.4.3. Triggering an integration when polling returns spreadsheet properties</a></li><li><a href="#add-google-sheets-connection-create-spreadsheet_sheets">10.4.4. Creating a spreadsheet</a></li><li><a href="#add-google-sheets-connection-update-sheet-values_sheets">10.4.5. Updating data in a sheet</a></li><li><a href="#add-google-sheets-connection-append-sheet-values_sheets">10.4.6. Appending data to a sheet</a></li><li><a href="#add-google-sheets-connection-update-properties_sheets">10.4.7. Updating spreadsheet properties</a></li><li><a href="#add-google-sheets-connection-add-chart_sheets">10.4.8. Adding a chart to a sheet</a></li><li><a href="#add-google-sheets-connection-add-pivot-table_sheets">10.4.9. Adding a pivot table to a sheet</a></li></ul></li></ul></li><li><a href="#connecting-to-http_connectors">11. Connecting to HTTP and HTTPS endpoints</a><ul class="sectlevel2"><li><a href="#creating-http-connections_http">11.1. Creating a connection to an HTTP or HTTPS endpoint</a></li><li><a href="#adding-http-connections_http">11.2. Adding an HTTP or HTTPS connection to an integration</a></li></ul></li><li><a href="#connecting-to-irc_connectors">12. Connecting to IRC</a><ul class="sectlevel2"><li><a href="#creating-irc-connections_irc_">12.1. Creating an IRC connection</a></li><li><a href="#adding-irc-connections-receive_irc_">12.2. Adding an IRC connection to trigger integration execution upon receiving messages</a></li><li><a href="#adding-irc-connections-send_irc_">12.3. Adding an IRC connection to send a message</a></li></ul></li><li><a href="#connecting-to-jira_connectors">13. Connecting to Jira</a><ul class="sectlevel2"><li><a href="#registering-with-jira_jira">13.1. Registering Syndesis with a Jira server that uses OAuth</a></li><li><a href="#creating-jira-connections_jira">13.2. Creating a Jira connection</a></li><li><a href="#adding-jira-connection-start_jira">13.3. Obtaining Jira issues or comments to trigger integration execution</a></li><li><a href="#adding-jira-connection-add-issue_jira">13.4. Adding an issue to a Jira server</a></li><li><a href="#adding-jira-connection-add-comment_jira">13.5. Adding a comment to a Jira issue</a></li><li><a href="#adding-jira-connection-attach-file_jira">13.6. Attaching a file to a Jira issue</a></li><li><a href="#adding-jira-connection-watchers_jira">13.7. Adding and removing Jira issue watchers</a></li><li><a href="#adding-jira-connection-update-issue_jira">13.8. Updating an issue on a Jira server</a></li><li><a href="#adding-jira-connection-transition-issue_jira">13.9. Transitioning a Jira issue to a new status</a></li></ul></li><li><a href="#connecting-to-kafka_connectors">14. Connecting to Kafka</a><ul class="sectlevel2"><li><a href="#enabling-auto-discovery-of-kafka-brokers_kafka">14.1. Enabling auto-discovery of Kafka brokers/AMQ Streams</a></li><li><a href="#creating-kafka-connections_kafka">14.2. Creating a connection to a Kafka broker</a></li><li><a href="#adding-kafka-connection-start_kafka">14.3. Obtaining data from a Kafka broker to trigger integration execution</a></li><li><a href="#adding-kafka-connection-finish-middle_kafka">14.4. Publishing data to a Kafka broker</a></li></ul></li><li><a href="#connecting-to-knative-resources_connectors">15. Connecting to Knative resources</a><ul class="sectlevel2"><li><a href="#enabling-connections-to-knative-resources_knative">15.1. Enabling connections to Knative resources</a></li><li><a href="#subscribing-to-a-knative-channel-to-obtain-messages_knative">15.2. Subscribing to a Knative channel to obtain messages</a></li><li><a href="#sending-messages-to-a-knative-channel_knative">15.3. Sending messages to a Knative channel</a></li><li><a href="#exposing-a-simple-integration-as-a-knative-service_knative">15.4. Exposing a simple integration as a Knative service</a></li><li><a href="#calling-a-knative-service-from-a-simple-integration_knative">15.5. Calling a Knative service from a simple integration</a></li></ul></li><li><a href="#connecting-to-kudu_connectors">16. Connecting to Apache Kudu</a><ul class="sectlevel2"><li><a href="#create-kudu-connections_kudu">16.1. Creating a connection to an Apache Kudu data store</a></li><li><a href="#add-kudu-connection-get-records_kudu">16.2. Triggering an integration when scanning returns records from a Kudu table</a></li><li><a href="#add-kudu-connection-add-records_kudu">16.3. Inserting records into a Kudu table</a></li></ul></li><li><a href="#connecting-to-mongodb_connectors">17. Connecting to MongoDB</a><ul class="sectlevel2"><li><a href="#creating-mongodb-connections_mongodb">17.1. Creating a connection to a MongoDB database</a></li><li><a href="#adding-mongodb-connections-read_mongodb">17.2. Triggering an integration when a MongoDB collection is updated</a></li><li><a href="#adding-mongodb-connections-write_mongodb">17.3. Operating on documents in a MongoDB collection</a></li></ul></li><li><a href="#connecting-to-mqtt_connectors">18. Connecting to MQTT</a><ul class="sectlevel2"><li><a href="#creating-mqtt-connections_mqtt">18.1. Creating a connection to an MQTT broker</a></li><li><a href="#adding-mqtt-connection-start_mqtt">18.2. Obtaining a message from an MQTT broker to trigger integration execution</a></li><li><a href="#adding-mqtt-connection-finish-middle_mqtt">18.3. Publishing a message to an MQTT broker</a></li></ul></li><li><a href="#connecting-to-odata_connectors">19. Connecting to OData</a><ul class="sectlevel2"><li><a href="#creating-odata-connections_odata">19.1. Creating a connection to an OData service</a></li><li><a href="#adding-odata-connections-read_odata">19.2. Triggering an integration when polling returns data from an OData service</a></li><li><a href="#adding-odata-connections-write_odata">19.3. Updating, creating, and deleting data that is managed by an OData service</a></li></ul></li><li><a href="#connecting-to-rest-apis_connectors">20. Connecting to REST APIs</a><ul class="sectlevel2"><li><a href="#register-with-rest-api_rest">20.1. Registering Syndesis as a REST API client</a></li><li><a href="#create-rest-api-connection_rest">20.2. Creating a REST API client connection</a></li><li><a href="#add-api-client-connection_rest">20.3. Adding an API client connection to an integration</a></li></ul></li><li><a href="#connecting-to-sf_connectors">21. Connecting to Salesforce</a><ul class="sectlevel2"><li><a href="#register-with-salesforce_salesforce">21.1. Registering Syndesis as a Salesforce client application</a></li><li><a href="#create-salesforce-connection_salesforce">21.2. Creating a Salesforce connection</a></li><li><a href="#adding-sf-connections_salesforce">21.3. Adding a Salesforce connection to an integration</a></li></ul></li><li><a href="#connecting-to-concur_connectors">22. Connecting to SAP Concur</a><ul class="sectlevel2"><li><a href="#user-roles-for-connecting-to-concur_concur">22.1. User roles for connecting to SAP Concur</a></li><li><a href="#obtain-concur-oauth-credentials-implementation_concur">22.2. How to Obtain SAP Concur implementation site OAuth credentials</a></li><li><a href="#obtain-concur-oauth-credentials-production_concur">22.3. How to obtain SAP Concur production site OAuth credentials</a></li><li><a href="#configure-concur-connector_concur">22.4. Configuring the SAP Concur connector</a></li><li><a href="#create-concur-connection_concur">22.5. Creating a SAP Concur connection</a></li><li><a href="#add-concur-connection_concur">22.6. Adding a SAP Concur connection to an integration</a></li><li><a href="#identify-concur-fields-for-mapping_concur">22.7. Example of mapping integration data fields to SAP Concur fields</a></li></ul></li><li><a href="#connecting-to-servicenow_connectors">23. Connecting to ServiceNow</a><ul class="sectlevel2"><li><a href="#create-servicenow-connection_servicenow">23.1. Creating a ServiceNow connection</a></li><li><a href="#add-servicenow-connection-start_servicenow">23.2. Obtaining records from ServiceNow to trigger integration execution</a></li><li><a href="#create-servicenow-import-set_servicenow">23.3. Creating an import set in ServiceNow</a></li><li><a href="#add-servicenow-connection-finish_servicenow">23.4. Copying records to ServiceNow during or to finish an integration</a></li><li><a href="#example-sf-servicenow-integration_servicenow">23.5. Example Salesforce to ServiceNow integrations</a></li></ul></li><li><a href="#connecting-to-slack_connectors">24. Connecting to Slack</a><ul class="sectlevel2"><li><a href="#creating-slack-connections_slack">24.1. Creating a Slack connection</a></li><li><a href="#add-slack-connection-start_slack">24.2. Adding a Slack connection to trigger integration execution upon receiving messages</a></li><li><a href="#add-slack-connection-middle-finish_slack">24.3. Adding a Slack connection to send a message to a Slack channel or user</a></li></ul></li><li><a href="#connecting-to-databases_connectors">25. Connecting to SQL databases</a><ul class="sectlevel2"><li><a href="#create-database-connection_db">25.1. Creating a database connection</a></li><li><a href="#how-to-specify-the-schema-in-a-database-connection_db">25.2. How to specify the schema in a database connection</a></li><li><a href="#adding-db-connection-start_db">25.3. Obtaining database records to trigger integration execution</a></li><li><a href="#about-parameter-placeholders-and-values_db">25.4. About parameter placeholders and values in SQL statements that update data</a></li><li><a href="#adding-db-connection-finish-middle_db">25.5. Accessing a database in the middle or to complete an integration</a></li><li><a href="#connecting-to-proprietary-databases_db">25.6. Connecting to proprietary databases</a></li></ul></li><li><a href="#connecting-to-telegram_connectors">26. Connecting to Telegram</a><ul class="sectlevel2"><li><a href="#creating-telegram-connections_connectors">26.1. Creating a Telegram connection</a></li><li><a href="#add-telegram-connection-start_connectors">26.2. Adding a Telegram connection to trigger integration execution upon receiving messages</a></li><li><a href="#add-telegram-connection-middle-finish_connectors">26.3. Adding a Telegram connection to send a message to a Telegram chat</a></li></ul></li><li><a href="#connecting-to-twitter_connectors">27. Connecting to Twitter</a><ul class="sectlevel2"><li><a href="#register-with-twitter_twitter">27.1. Registering Syndesis as a Twitter client application</a></li><li><a href="#create-twitter-connection_twitter">27.2. Creating a Twitter connection</a></li><li><a href="#adding-twitter-connection-start_twitter">27.3. Adding a Twitter connection to trigger integration execution</a></li><li><a href="#adding-twitter-connection-finish-middle_twitter">27.4. Adding a Twitter connection that sends a direct message</a></li></ul></li></ul></div></div><div id="content"><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>To integrate applications, you create a connection to each application or service that you want to integrate. You then create an integration and add a connection to it for each integration or service that you want to integrate.</p></div><div class="paragraph"><p>Syndesis <a href="#supported-connectors_connectors">supports numerous connectors</a> that serve as templates for creating connections. The following topics provide details for creating connections and adding them to integrations:</p></div><div class="ulist"><ul><li><p><a href="#connecting-to-aws_connectors">Connecting to Amazon Web Services</a></p></li><li><p><a href="#connecting-to-amq_connectors">Connecting to AMQ</a></p></li><li><p><a href="#connecting-to-amqp_connectors">Connecting to AMQP</a></p></li><li><p><a href="#connecting-to-box_connectors">Connecting to Box</a></p></li><li><p><a href="#connecting-to-dropbox_connectors">Connecting to Dropbox</a></p></li><li><p><a href="#connecting-to-email-servers_connectors">Connecting to Email Servers (IMAP, POP3, SMTP)</a></p></li><li><p><a href="#connecting-to-fhir_connectors">Connecting to FHIR</a></p></li><li><p><a href="#connecting-to-ftp_connectors">Connecting to an FTP or SFTP server</a></p></li><li><p><a href="#connecting-to-google_connectors">Connecting to Google applications</a></p></li><li><p><a href="#connecting-to-http_connectors">Connecting to HTTP and HTTPS endpoints</a></p></li><li><p><a href="#connecting-to-irc_connectors">Connecting to IRC</a></p></li><li><p><a href="#connecting-to-jira_connectors">Connecting to Jira</a></p></li><li><p><a href="#connecting-to-kafka_connectors">Connecting to Kafka</a></p></li><li><p><a href="#connecting-to-knative-resources_connectors">Connecting to Knative resources</a></p></li><li><p><a href="#connecting-to-kudu_connectors">Connecting to Apache Kudu</a></p></li><li><p><a href="#connecting-to-mongodb_connectors">Connecting to MongoDB</a></p></li><li><p><a href="#connecting-to-mqtt_connectors">Connecting to MQTT</a></p></li><li><p><a href="#connecting-to-odata_connectors">Connecting to OData</a></p></li><li><p><a href="#connecting-to-rest-apis_connectors">Connecting to REST APIs</a></p></li><li><p><a href="#connecting-to-sf_connectors">Connecting to Salesforce</a></p></li><li><p><a href="#connecting-to-concur_connectors">Connecting to SAP Concur</a></p></li><li><p><a href="#connecting-to-servicenow_connectors">Connecting to ServiceNow</a></p></li><li><p><a href="#connecting-to-slack_connectors">Connecting to Slack</a></p></li><li><p><a href="#connecting-to-databases_connectors">Connecting to SQL databases</a></p></li><li><p><a href="#connecting-to-telegram_connectors">Connecting to Telegram</a></p></li><li><p><a href="#connecting-to-twitter_connectors">Connecting to Twitter</a></p></li></ul></div></div></div><div class="sect1"><h2 id="supported-connectors_connectors">1. Connectors that are supported by Syndesis</h2><div class="sectionbody"><div class="paragraph"><p>Syndesis supports the following connectors.</p></div><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width:25%"><col style="width:75%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Name</th><th class="tableblock halign-left valign-top">Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-amazon-dynamodb_connectors">Amazon DynamoDB</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain, add, update, or delete data in an Amazon DynamoDB table.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-amazon-sns_connectors">Amazon Simple Notification Service (SNS)</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Send messages to an Amazon SNS topic.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-amazon-sqs_connectors">Amazon Simple Queue Service (SQS)</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve messages from or send messages to an Amazon SQS queue.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-s3_connectors">Amazon Simple Storage Service (S3)</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve data from an Amazon S3 bucket or copy data into a bucket.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-amq_connectors">AMQ</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain messages from a Red Hat AMQ (Apache ActiveMQ) broker or publish messages to a Red Hat AMQ (Apache ActiveMQ) broker.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-amqp_connectors">AMQP</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain messages from an Advanced Message Queue Protocol broker or publish messages to an AMQP broker.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-box_connectors">Box</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Download files from Box or upload files to Box.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-dropbox_connectors">Dropbox</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Download files from Dropbox or upload files to Dropbox.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-email-servers_connectors">Email Servers</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve email from an IMAP or POP3 email server or connect to an SMTP email server to send email.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-fhir_connectors">FHIR</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain resources from a FHIR server or update resources on a FHIR server.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-ftp_connectors">FTP/SFTP</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Download files from an FTP or SFTP server or upload files to an FTP or SFTP server.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-gmail_google">Gmail</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain messages sent to a particular Gmail account and send messages from a particular Gmail account.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-google-calendar_google">Google Calendar</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain events from a Google Calendar that you specify or add/update events in a Google Calendar that you specify.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-google-sheets_google">Google Sheets</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain data from a Google Sheets spreadsheet that you specify, add/update spreadsheet data, create charts, or create pivot tables in a spreadsheet that you specify.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-http_connectors">HTTP/HTTPS</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Connect to an HTTP or HTTPS endpoint and execute the <code>GET</code>, <code>PUT</code>, <code>POST</code>, <code>DELETE</code>, <code>HEAD</code>, <code>OPTIONS</code>, <code>TRACE</code>, OR <code>PATCH</code> method.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-irc_connectors">IRC</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Receive messages that are sent to an IRC nickname or channel, or send messages to an IRC nickname on a particular channel.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-jira_connectors">Jira</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain, create, or update issues on a Jira server.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-knative-resources_connectors">Knative resources</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain messages from a Knative channel, send messages to a Knative channel, expose a simple integration as a Knative service, or call a Knative service.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-kudu_connectors">Kudu</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain records from a table in an Apache Kudu data store or add records to a table in a Kudu data store.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-mongodb_connectors">MongoDB</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain data from a MongoDB database or update data in a MongoDB database.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-mqtt_connectors">MQTT</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain messages from an MQ Telemetry Transport broker or publish messages to an MQTT broker.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-odata_connectors">OData</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain entities from an OData service or update, create, or delete entities that are managed by an OData service.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-rest-apis_connectors">REST APIs</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Create a custom REST API client connector by uploading an OpenAPI document. You can then create a connection to that REST API.</p><p class="tableblock">Create a REST API provider integration by uploading an OpenAPI document that defines operations that trigger integration execution. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/integrating_applications_with_fuse_online/#trigger-integrations-with-api-calls_ug">Creating an integration that is triggered by a REST API call</a> in Integrating Applications with Fuse Online.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-sf_connectors">Salesforce</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Create, update, fetch, or delete a Salesforce record.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-concur_connectors">SAP Concur</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Perform any one of a large variety of SAP Concur actions.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-servicenow_connectors">ServiceNow</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain records from or copy records to your ServiceNow instance.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-slack_connectors">Slack</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain messages from a channel or send a message to a Slack channel or user.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-databases_connectors">SQL databases</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoke a SQL statement or a SQL stored procedure on an Apache Derby, MySQL, or PostgreSQL database. To connect to other types of SQL databases, you upload a Syndesis library extension that contains a JDBC driver for that database.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting_to_telegram_connectors">Telegram</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtain messages from a chat or send messages to a chat by using a Telegram chat bot.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-twitter_connectors">Twitter</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger execution of a simple integration upon tweets that mention you or that contain data that you specify.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/integrating_applications_with_fuse_online/#triggering-integrations-with-http-requests_ug">Webhook</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger execution of simple integrations with HTTP <code>GET</code> or <code>POST</code> requests.</p></td></tr></tbody></table><div class="paragraph"><p>If Syndesis does not provide a connector that you need, an experienced developer can create an extension that defines a custom connector. For information about coding the extension and creating its <code>.jar</code> file, which you upload to Syndesis, see:</p></div><div class="ulist"><ul><li><p><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/tooling_user_guide/index#FuseOnlineExtension">Tooling User Guide, how to use Fuse tooling to develop extensions</a></p></li><li><p><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/integrating_applications_with_fuse_online/#developing-extensions_custom">Integrating Applications with Fuse Online, how to code extensions</a></p></li></ul></div></div></div><div class="sect1"><h2 id="connecting-to-aws_connectors">2. Connecting to Amazon Web Services</h2><div class="sectionbody"><div class="paragraph"><p>A Syndesis integration can connect to the following Amazon web services:</p></div><div class="ulist"><ul><li><p>DynamoDB</p></li><li><p>Simple Notification Service (SNS)</p></li><li><p>Simple Queue Service (SQS)</p></li><li><p>Simple Storage Service (S3)</p></li></ul></div><div class="paragraph"><p>You must obtain AWS credentials before you can create a connection to an Amazon web service. For details, see:</p></div><div class="ulist"><ul><li><p><a href="#obtaining-aws-credentials_aws">Obtaining AWS credentials for creating connections to Amazon services</a></p></li><li><p><a href="#connecting-to-amazon-dynamodb_aws">Connecting to Amazon DynamoDB</a></p></li><li><p><a href="#connecting-to-amazon-sns_aws">Connecting to Amazon Simple Notification Service (SNS)</a></p></li><li><p><a href="#connecting-to-amazon-sqs_aws">Connecting to Amazon Simple Queue Service (SQS)</a></p></li><li><p><a href="#connecting-to-amazon-s3_aws">Connecting to Amazon Simple Storage Service (S3)</a></p></li></ul></div><div class="sect2"><h3 id="obtaining-aws-credentials_aws">2.1. Obtaining AWS credentials for creating connections to Amazon services</h3><div class="paragraph"><p>To create a connection to an Amazon service, you must have an access key that is associated with an AWS account. This is the AWS account that created, or will create, the resource that you want the Syndesis connection to access. The resource can be an S3 bucket, an SNS topic, or an SQS queue.</p></div><div class="paragraph"><p>An AWS access key has two parts:</p></div><div class="ulist"><ul><li><p>Amazon access key ID</p></li><li><p>Amazon secret access key</p></li></ul></div><div class="paragraph"><p>AWS uses access keys to authenticate requests from a Syndesis connection. There is plenty of AWS documentation about creating and managing access keys. If you already created an AWS Identity and Access Management (IAM) user and captured the access key associated with that user, you can specify those values to create a Syndesis connection to S3, SNS, or SQS.</p></div><div class="paragraph"><p>If you need to obtain an access key, the procedure below is one way to do it.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>Login credentials for the AWS account that created the resource that you want a connection to access.</p></li><li><p>Or, login credentials for the AWS account that you want the connection to use to create a new resource.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>Go to <a href="https://aws.amazon.com/" class="bare">https://aws.amazon.com/</a> and sign in to the console.</p></li><li><p>In the console, in the upper right, click the down arrow next to the user name and click <strong>My Security Credentials</strong>.</p></li><li><p>In the popup dialog, click <strong>Get Started with IAM Users</strong>.</p><div class="paragraph"><p>If a popup with this button does not appear, then on the left, click <strong>Users</strong>.</p></div></li><li><p>Add a user:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Click <strong>Add User</strong></p></li><li><p>Enter a user name and select <strong>Programmatic Access</strong>.</p></li><li><p>Click <strong>Next: Permissions</strong>.</p></li><li><p>Respond to the prompts for adding the new user to a group.</p></li><li><p>Click <strong>Next: Tags</strong>.</p></li><li><p>Skip adding tags and click <strong>Next: Review</strong>.</p></li><li><p>Click <strong>Create User</strong>.</p></li></ol></div></li><li><p>Click <strong>Download .csv</strong> to obtain a local copy of the access key. The downloaded file contains the access key ID and the secret access key, which you must specify to create a connection to an Amazon service.</p></li><li><p>Click <strong>Close</strong>.</p></li></ol></div><div class="ulist"><div class="title">Additional resources</div><ul><li><p><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html">Managing Access Keys for IAM Users</a></p></li><li><p><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html">IAM Best Practices</a></p></li></ul></div></div><div class="sect2"><h3 id="connecting-to-amazon-dynamodb_aws">2.2. Connecting to Amazon DynamoDB</h3><div class="paragraph"><p>An integration can retrieve data from an Amazon DynamoDB table, add data to a DynamoDB table, or remove data from a DynamoDB table. To do this, create an Amazon DynamoDB connection and then add that connection to an integration flow.</p></div><div class="paragraph"><p>For details, see:</p></div><div class="ulist"><ul><li><p><a href="#create-dynamodb-connections_dynamodb">Creating Amazon DynamoDB connections</a></p></li><li><p><a href="#adding-dynamodb-connection-query_dynamodb">Obtaining data from an Amazon DynamoDB table</a></p></li><li><p><a href="#adding-dynamodb-connection-put_dynamodb">Adding data to an Amazon DynamoDB table</a></p></li><li><p><a href="#adding-dynamodb-connection-remove_dynamodb">Removing data from an Amazon DynamoDB table</a></p></li></ul></div><div class="sect3"><h4 id="create-dynamodb-connections_dynamodb">2.2.1. Creating Amazon DynamoDB connections</h4><div class="paragraph"><p>You must create an Amazon DynamoDB connection before you can connect to Amazon DynamoDB in an integration.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You must have an AWS access key. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#obtaining-aws-credentials_aws">Obtaining AWS credentials for creating connections to Amazon services</a>.</p></li><li><p>You must know which AWS region contains the DynamoDB table that you want the connection to access.</p></li><li><p>You must know the name of the DynamoDB table that you want the connection to access. This table must exist when an integration connects to DynamoDB.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display Syndesis connectors.</p></li><li><p>Click the <strong>Amazon DynamoDB</strong> connector.</p></li><li><p>In the <strong>Access Key</strong> field, enter an Amazon access key ID that is part of a user access key in the AWS account that manages the DynamoDB table that you want the connection to access.</p></li><li><p>In the <strong>Secret Key</strong> field, enter the Amazon secret access key for the Amazon access key ID that you specified.</p></li><li><p>In the <strong>Region</strong> field, select the AWS region in which the DynamoDB table resides.</p></li><li><p>In the <strong>Table Name</strong> field, enter the name of the DynamoDB table that you want this connection to access.</p></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether or not validation is successful. If validation fails, revise the configuration details as needed and try again.</p></li><li><p>When validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code>DynamoDB West</code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample DynamoDB connection that accesses sales data in the western region.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>DynamoDB West</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div><div class="paragraph"><div class="title">Results</div><p>When Syndesis is prompting you to add to an integration, it displays the DynamoDB connection that you just created. This connection always and only accesses the DynamoDB table that you specified when you created the connection.</p></div></div><div class="sect3"><h4 id="adding-dynamodb-connection-query_dynamodb">2.2.2. Obtaining data from an Amazon DynamoDB table</h4><div class="paragraph"><p>In an integration flow, to obtain an item from an Amazon DynamoDB table, add an Amazon DynamoDB connection to the middle of the flow.</p></div><div class="paragraph"><p>A DynamoDB connection cannot start a simple integration. If you want to periodically obtain data from a DynamoDB table, start a simple integration with a timer followed by a DynamoDB connection that queries a table.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created an Amazon DynamoDB connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the flow visualization, click the plus sign where you want to add an Amazon DynamoDB connection.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the Amazon DynamoDB connection that is configured to access that table that you want to obtain data from.</p></li><li><p>On the <strong>Choose an action</strong> page, select the <strong>Query</strong> action.</p></li><li><p>In the <strong>Filter</strong> field, specify JSON notation that identifies the key attribute(s) for the item that the connection should return. You can specify input parameters with <code>:#</code>. For example, to obtain an item that has two key attributes, the specification might be something like this:</p><div class="listingblock"><div class="content"><pre>{"key1":":#PARAM1", "key2":":#PARAM2"}</pre></div></div></li><li><p>Optional. In the <strong>Attributes to query</strong> field, enter a comma-separated list of the attribute names that contain the data that you want the connection to return. For example:</p><div class="listingblock"><div class="content"><pre>key1,key2,attribute3,attribute4,attribute5</pre></div></div><div class="paragraph"><p>If you do not specify attributes, the query returns the key attribute(s).</p></div></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The integration now has a DynamoDB connection that obtains data. At runtime, the connection returns a JSON instance document that contains the result of the query.</p></div><div class="paragraph"><div class="title">Next step</div><p>If you specified placeholder parameters in the <strong>Filter</strong> field, add a data mapper step before this connection. In the data mapper step, map source fields to the target placeholder fields in the DynamoDB connection.</p></div></div><div class="sect3"><h4 id="adding-dynamodb-connection-put_dynamodb">2.2.3. Adding data to an Amazon DynamoDB table</h4><div class="paragraph"><p>In the middle of a flow, or to finish a simple integration, a DynamoDB connection can add an item to a DynamoDB table. To do this, add a DynamoDB connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content">In this release, a DynamoDB connection cannot update an item in a DynamoDB table. This is expected to change in a future release.</td></tr></table></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created an Amazon DynamoDB connection.</p></li><li><p>You are creating or editing a simple integration and Syndesis is prompting you to add to the integration or to choose the finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Choose a connection</strong> page, click the Amazon DynamoDB connection that is configured to access the table that you want to add to.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Put Item</strong>.</p></li><li><p>In the <strong>JSON definition of the element</strong> field, enter JSON notation that defines the table item to be added. You must specify the item&#8217;s key attribute(s). Input parameter placeholders prefixed with <code>:#</code> are allowed. Be sure to specify all attributes/values that you want to store. In the following example, <code>userID</code> is the key:</p><div class="listingblock"><div class="content"><pre>{"userID":"aslan","attr1":"some-value","attr2":"another-value"}</pre></div></div></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization at the location you added it. During execution, the connection adds the defined JSON item to the DynamoDB table that the connection is configured to access.</p></div><div class="paragraph"><div class="title">Next step</div><p>If you specified placeholder parameters in the JSON definition of the item, add a data mapper step before this connection. In the data mapper step, map source fields to the target placeholder fields in the DynamoDB connection.</p></div></div><div class="sect3"><h4 id="adding-dynamodb-connection-remove_dynamodb">2.2.4. Removing data from an Amazon DynamoDB table</h4><div class="paragraph"><p>In the middle of a flow, or to finish a simple integration, a DynamoDB connection can remove an item from a DynamoDB table. To do this, add a DynamoDB connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created an Amazon DynamoDB connection.</p></li><li><p>You are creating or editing a simple integration and Syndesis is prompting you to add to the integration or to choose the finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Choose a connection</strong> page, click the Amazon DynamoDB connection that is configured to access the table that contains the item that you want to remove.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Remove Item</strong>.</p></li><li><p>In the <strong>JSON filter of the element</strong> field, enter JSON notation that identifies the item that you want to remove. You must specify the item&#8217;s key attribute(s). Input parameters prefixed with <code>:#</code> are allowed. In the following example input, <code>userID</code> is a key attribute:</p><div class="listingblock"><div class="content"><pre>{"userID":"aslan"}</pre></div></div></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the flow visualization where you added it.</p></div><div class="paragraph"><div class="title">Next step</div><p>If you specified placeholder parameters in the <strong>JSON filter of the element</strong> field, add a data mapper step before this connection. In the data mapper step, map a source field to each target placeholder field in the DynamoDB connection.</p></div></div></div><div class="sect2"><h3 id="connecting-to-amazon-sns_aws">2.3. Connecting to Amazon Simple Notification Service (SNS)</h3><div class="paragraph"><p>An integration can send a message to an AWS Simple Notification Service topic. To do this, create an AWS SNS connection and then add that connection to an integration flow or as the finish connection for a simple integration. For details, see:</p></div><div class="ulist"><ul><li><p><a href="#creating-amazon-sns-connections_sns">Creating Amazon SNS connections</a></p></li><li><p><a href="#adding-amazon-sns-connection-send_sns">Sending messages to Amazon SNS</a></p></li></ul></div><div class="sect3"><h4 id="creating-amazon-sns-connections_sns">2.3.1. Creating Amazon SNS connections</h4><div class="paragraph"><p>You must create an Amazon SNS connection before you can add an Amazon SNS connection to an integration.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>AWS access key. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#obtaining-aws-credentials_aws">Obtaining AWS credentials</a>.</p></li><li><p>You must know the region in which the SNS topic is located. This is the topic that you want the SNS connection that you are creating to send a message to.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display Syndesis connectors.</p></li><li><p>Click the <strong>Amazon SNS</strong> connector.</p></li><li><p>In the <strong>Access Key</strong> field, enter an Amazon access key ID that is part of a user access key in the AWS account that manages the topic that you want the connection to send a message to.</p><div class="paragraph"><p>If the topic that you want the connection to access does not already exist then when Syndesis tries to start running the integration, it uses the AWS account associated with this access key to create the topic. However, if the topic already exists in some other AWS account, then the connection cannot create the topic and the integration cannot start.</p></div></li><li><p>In the <strong>Secret Key</strong> field, enter the Amazon secret access key for the Amazon access key ID that you specified.</p></li><li><p>In the <strong>Region</strong> field, select the AWS region in which the topic resides. If the connection creates the topic, then it creates it in the selected region.</p></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether or not validation is successful. If validation fails, revise the configuration details as needed and try again.</p></li><li><p>When validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code>SNS North</code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample SNS connection that sends messages to our north region topic.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>SNS North</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect3"><h4 id="adding-amazon-sns-connection-send_sns">2.3.2. Sending messages to Amazon SNS</h4><div class="paragraph"><p>To send a message to an Amazon SNS topic, add an Amazon SNS connection to the middle of a flow or as the finish connection in a simple integration.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created an Amazon SNS connection.</p></li><li><p>Syndesis is prompting you to add to the integration, or to add the finish connection to a simple integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the Amazon SNS connection that you want to use to send a message.</p></li><li><p>Click the <strong>Send Object</strong> action.</p></li><li><p>In the <strong>Topic Name or Amazon Resource Name</strong> field, enter the name of the SNS topic to send a message to or enter the topics&#8217;s Amazon Resource Name (ARN).</p><div class="paragraph"><p>If the SNS topic does not already exist in either the AWS account that the connection is authorized to access, or in any other AWS account, the connection creates the topic in the AWS account that the connection is configured to access.</p></div></li><li><p>Click <strong>Next</strong> to add the connection to the integration.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration flow where you added it.</p></div></div></div><div class="sect2"><h3 id="connecting-to-amazon-sqs_aws">2.4. Connecting to Amazon Simple Queue Service (SQS)</h3><div class="paragraph"><p>An integration can retrieve messages from an Amazon SQS queue or send messages to an Amazon SQS queue. To do this, create an Amazon SQS connection and then add that connection to an integration flow. For details, see:</p></div><div class="ulist"><ul><li><p><a href="#creating-amazon-sqs-connections_sqs">Creating Amazon SQS connections</a></p></li><li><p><a href="#adding-amazon-sqs-connection-retrieve_sqs">Obtaining messages from Amazon SQS to trigger integration execution</a></p></li><li><p><a href="#adding-amazon-sqs-connection-send_sqs">Sending messages to an Amazon SQS queue</a></p></li></ul></div><div class="sect3"><h4 id="creating-amazon-sqs-connections_sqs">2.4.1. Creating Amazon SQS connections</h4><div class="paragraph"><p>You must create an Amazon SQS connection before you can add an Amazon SQS connection to an integration.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>AWS access key. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#obtaining-aws-credentials_aws">Obtaining AWS credentials</a>.</p></li><li><p>You must know the region in which the SQS queue is located. This is the queue that you want the SQS connection that you are creating to send messages to or retrieve messages from.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display Syndesis connectors.</p></li><li><p>Click the <strong>Amazon SQS</strong> connector.</p></li><li><p>In the <strong>Access Key</strong> field, enter an Amazon access key ID that is part of a user access key in the AWS account that manages the queue that you want the connection to access.</p><div class="paragraph"><p>If the queue that you want the connection to access does not already exist then when Syndesis tries to start running the integration, it uses the AWS account associated with this access key to create the queue. However, if the queue already exists in some other AWS account, then the connection cannot create the queue and the integration cannot start.</p></div></li><li><p>In the <strong>Secret Key</strong> field, enter the Amazon secret access key for the Amazon access key ID that you specified.</p></li><li><p>In the <strong>Region</strong> field, select the AWS region in which the queue resides. If the connection creates the queue, then it creates it in the selected region.</p></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether or not validation is successful. If validation fails, revise the configuration details as needed and try again.</p></li><li><p>When validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code>SQS South</code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample SQS connection that sends messages to our southern region queue.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>SQS South</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect3"><h4 id="adding-amazon-sqs-connection-retrieve_sqs">2.4.2. Obtaining messages from Amazon SQS to trigger integration execution</h4><div class="paragraph"><p>To start an integration by obtaining messages from an Amazon SQS queue, add an Amazon SQS connection as a simple integration&#8217;s start connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created an Amazon SQS connection that is configured to access the queue that you want to obtain messages from.</p></li><li><p>You know the name of the SQS queue that you want the connection to obtain messages from.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the Amazon SQS connection that you want to use to start the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Poll an Amazon SQS Queue</strong> to periodically retrieve messages from an SQS queue.</p></li><li><p>Configure this action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Delay</strong> field, accept the default of 500 milliseconds as the time that elapses between polls. Or, to specify a different polling interval, enter a number and select its time unit.</p></li><li><p>In the <strong>Maximum Objects to Retrieve</strong> field, enter the largest number of messages that one poll operation can obtain. The default is 10.</p><div class="paragraph"><p>To have no limit on the number of messages that can be obtained, specify <code>0</code> or a negative integer. When <strong>Maximum Objects to Retrieve</strong> is unlimited, the poll action obtains all messages in the SQS queue.</p></div></li><li><p>In the <strong>Queue Name or Amazon Resource Name</strong> field, specify the name of the SQS queue to retrieve messages from, or the queue&#8217;s ARN. If a queue with this name does not exist, the connection creates it. This is the only required field.</p></li><li><p>Indicate whether you want to <strong>Obtain messages and then delete them from the queue</strong>. Obtaining messages and then deleting them from the queue is the default behavior. Unselect this option only if you want the connection to retrieve messages and also leave them on the queue, which means that the messages will be retrieved again.</p></li><li><p>Indicate whether you want to <strong>Obtain messages and delete the message if it does make it through a Camel filter</strong>. This option is selected by default. Leave it selected when you want to pass a retrieved message through a filter to determine whether to delete it from the queue. You do not need to unselect <strong>Obtain messages and then delete from the queue</strong>. Syndesis ensures the correct behavior when you select <strong>Obtain messages and delete the message if it does make it through a Camel filter</strong>.</p></li></ol></div></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears at the beginning of the integration flow.</p></div><div class="paragraph"><div class="title">Next steps</div><p>If you selected <strong>Obtain messages and delete the message if it does make it through a Camel filter</strong> then you need to add a filter step after this SQS connection. The filter step does not need to be immediately after the SQS connection. Add all connections to the integration, and then add the filter step. During execution, if there are messages that pass the filter, Syndesis uses the same connection, the SQS start connection, to delete those messages from the queue.</p></div></div><div class="sect3"><h4 id="adding-amazon-sqs-connection-send_sqs">2.4.3. Sending messages to an Amazon SQS queue</h4><div class="paragraph"><p>In the middle of a flow, or to finish a simple integration, you can send messages to an Amazon SQS queue.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created an Amazon SQS connection that is configured to access the queue that you want to send messages to.</p></li><li><p>You know the name of the SQS queue that you want the connection to send messages to.</p></li><li><p>Syndesis is prompting you to add to the integration, or to choose the finish connection for a simple integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the Amazon SQS connection that you want to use to send messages.</p></li><li><p>Select the action that you want the connection to perform:</p><div class="ulist"><ul><li><p><strong>Send Object</strong> sends one message to the queue.</p></li><li><p><strong>Send Batch Object</strong> sends a batch of messages to the queue.</p></li></ul></div></li><li><p>In the <strong>Message group ID strategy</strong> field, for a first-in, first-out (FIFO) queue, accept <code>ConstantMessageGroupIdStrategy</code> or click in the field and select a different strategy.</p><div class="paragraph"><p>The setting of this parameter has no effect on simple queues. The message group ID identifies the group that a message belongs to. Messages that belong to the same message group are always processed one by one, in a strict order relative to the message group. The message group ID strategy determines how the connection assigns a group ID to a message. The options are:</p></div><div class="ulist"><ul><li><p><code>ConstantMessageGroupIdStrategy</code>&#8201;&#8212;&#8201;The connection uses a constant to group messages.</p></li><li><p><code>ExchangeIdMessageGroupIdStrategy</code>&#8201;&#8212;&#8201;The connection uses the exchange ID, which is in each message, to group messages.</p></li><li><p><code>PropertyValueMessageGroupIdStrategy</code>&#8201;&#8212;&#8201;The connection uses the value of an internal property to group messages.</p></li></ul></div><div class="paragraph"><p>FIFO queues are designed to ensure that the order in which messages are sent and received is strictly preserved and that each message is processed exactly once. A FIFO queue name has <code>.fifo</code> as a suffix.</p></div></li><li><p>In the <strong>Message deduplication ID strategy</strong> field, for a FIFO queue, accept <code>NullMessageDeduplicationIdStrategy</code> or click in the field to select <code>ExchangeIdMessageDeduplicationIdStrategy</code>.</p><div class="paragraph"><p>The setting of this parameter has no effect on simple queues. For a FIFO queue, the connection uses the selected strategy to ensure that it does not send duplicate messages to the queue.</p></div><div class="ulist"><ul><li><p><code>NullMessageDeduplicationIdStrategy</code> uses the message body as the deduplication element. In other words, the connection compares message bodies to identify duplicate messages.</p></li><li><p><code>ExchangeIdMessageDeduplicationIdStrategy</code> uses the message&#8217;s exchange ID as the deduplication element. In other words, the connection compares exchange IDs to identify duplicate messages.</p></li></ul></div></li><li><p>In the <strong>Queue Name or Amazon Resource Name</strong> field, enter the name of the queue to send messages to. If the queue does not exist, the connection creates it.</p></li><li><p>In the <strong>Delay</strong> field, accept the default, which is 0 for no delay. Or, to add a delay, specify a number. The integration waits this number of seconds before sending messages. This is useful when the message consumers might not be immediately ready for the messages that the connection is sending.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration flow where you added it.</p></div><div class="ulist"><div class="title">Additional resources</div><ul><li><p><a href="https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/using-messagededuplicationid-property.html">Using the Amazon Message Deduplication ID</a></p></li><li><p><a href="https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/using-messagegroupid-property.html">Using the Amazon SQS Message Group ID</a></p></li></ul></div></div></div><div class="sect2"><h3 id="connecting-to-amazon-s3_aws">2.5. Connecting to Amazon Simple Storage Service (S3)</h3><div class="paragraph"><p>An integration can retrieve data from an Amazon S3 bucket or copy data into an Amazon S3 bucket. To do this, create an Amazon S3 connection and then add that connection to an integration flow. For details, see:</p></div><div class="ulist"><ul><li><p><a href="#create-s3-connection_s3">Creating Amazon S3 connections</a></p></li><li><p><a href="#adding-s3-connection-start_s3">Obtaining data from Amazon S3 to trigger integration execution</a></p></li><li><p><a href="#adding-s3-connection-finish_s3">Adding data to Amazon S3 to finish an integration</a></p></li><li><p><a href="#adding-s3-connection-middle_s3">Adding data to Amazon S3 in the middle of an integration</a></p></li></ul></div><div class="sect3"><h4 id="create-s3-connection_s3">2.5.1. Creating Amazon S3 connections</h4><div class="paragraph"><p>You must create an Amazon S3 connection before you can add an Amazon S3 connection to an integration.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>AWS access key. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#obtaining-aws-credentials_aws">Obtaining AWS credentials</a>.</p></li><li><p>If the bucket that you want the connection to access already exists, you must know:</p><div class="ulist"><ul><li><p>The region that the bucket is in.</p></li><li><p>The bucket&#8217;s name or Amazon Resource Name (ARN).</p></li></ul></div></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display Syndesis connectors.</p></li><li><p>Click the <strong>Amazon S3</strong> connector.</p></li><li><p>In the <strong>Access Key</strong> field, enter an Amazon access key ID that is part of a user access key in the AWS account that manages the bucket that you want the connection to access.</p><div class="paragraph"><p>If the bucket that you want the connection to access does not already exist then when Syndesis tries to start running the integration, it uses the AWS account associated with this access key to create the bucket. However, if the bucket already exists in some other AWS account, then the connection cannot create the bucket and the integration cannot start.</p></div></li><li><p>In the <strong>Secret Key</strong> field, enter the Amazon secret access key for the Amazon access key ID that you specified.</p></li><li><p>In the <strong>Region</strong> field, select the AWS region in which the bucket resides. If the connection creates the bucket, then it creates it in the selected region.</p></li><li><p>In the <strong>Bucket Name or Amazon Resource Name</strong> field, enter the name of the bucket that you want this connection to access or enter the bucket&#8217;s ARN.</p><div class="paragraph"><p>If the bucket you specify does not yet exist then the connection tries to create a bucket with the name that you specify. Because S3 allows a bucket to be used as a URL that can be accessed publicly, the bucket name that you specify must be globally unique. Also, it must meet <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-s3-bucket-naming-requirements.html">S3 bucket naming requirements</a>.</p></div></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether or not validation is successful. If validation fails, revise the configuration details as needed and try again.</p></li><li><p>When validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code>Obtain S3 Data</code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample S3 connection that obtains data from a northeast bucket.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>Obtain S3 Data</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect3"><h4 id="adding-s3-connection-start_s3">2.5.2. Obtaining data from Amazon S3 to trigger integration execution</h4><div class="paragraph"><p>To start an integration by obtaining data from an Amazon S3 bucket, add an Amazon S3 connection as a simple integration&#8217;s start connection.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You created an Amazon S3 connection.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the Amazon S3 connection that you want to use to start the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select the action that you want the connection to perform:</p><div class="ulist"><ul><li><p><strong>Get Object</strong> obtains a file from the bucket that the connection accesses. In the <strong>File Name</strong> field, enter the name of the file that you want to obtain. If the specified file is not in the bucket, it is a runtime error.</p></li><li><p><strong>Poll an Amazon S3 Bucket</strong> periodically obtains files from the bucket that the connection accesses. To configure this action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Delay</strong> field, accept the default of 500 milliseconds as the time that elapses between polls. Or, to specify a different polling interval, enter a number and select its time unit.</p></li><li><p>In the <strong>Maximum Objects to Retrieve</strong> field, enter the largest number of files that one poll operation can obtain. The default is 10.</p><div class="paragraph"><p>To have no limit on the number of files that can be obtained, specify <code>0</code> or a negative integer. When <strong>Maximum Objects to Retrieve</strong> is unlimited, the poll action obtains all files in the bucket.</p></div><div class="paragraph"><p>If the bucket contains more than the specified maximum number of files then the action obtains the files that were most recently modified or created.</p></div></li><li><p>In the <strong>Prefix</strong> field, optionally specify a regular expression that evaluates to a string. If you specify a prefix then this action retrieves a file only when its name starts with that string.</p></li><li><p>Indicate whether you want to <strong>Obtain files and then delete them from the bucket</strong>.</p></li></ol></div></li></ul></div></li><li><p>After you configure the action, click <strong>Next</strong> to specify the action&#8217;s output type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection output in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The integration now has a start connection and Syndesis is prompting you to choose the finish connection.</p></div></div><div class="sect3"><h4 id="adding-s3-connection-finish_s3">2.5.3. Adding data to Amazon S3 to finish an integration</h4><div class="paragraph"><p>To finish an integration by copying data to Amazon S3, add an Amazon S3 connection as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created an Amazon S3 connection.</p></li><li><p>You are creating or editing a simple integration and Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Choose a connection</strong> page, click the Amazon S3 connection that you want to use to finish the integration.</p></li><li><p>Select the action that you want the connection to perform:</p><div class="ulist"><ul><li><p><strong>Copy Object</strong> adds one or more objects to the bucket.</p><div class="paragraph"><p>To add one file to the bucket, you can enter its name in the <strong>File Name</strong> field.</p></div><div class="paragraph"><p>To add multiple files to the bucket, do not specify a file name. In this case, the action adds all objects that it obtains from the previous integration step(s).</p></div><div class="paragraph"><p>If you used the poll action to obtain multiple files and you specify a file name then the <strong>Copy Object</strong> action adds only the last file that was received from the poll action.</p></div></li><li><p><strong>Delete Object</strong> deletes an object from the bucket. In the <strong>File Name</strong> field, specify the name of the object that you want to delete. If the specified file is not in the bucket, the integration continues with no error.</p></li></ul></div></li><li><p>After you configure the chosen action, click <strong>Next</strong> to specify the action&#8217;s input type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection input in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears at the end of the integration visualization.</p></div></div><div class="sect3"><h4 id="adding-s3-connection-middle_s3">2.5.4. Adding data to Amazon S3 in the middle of an integration</h4><div class="paragraph"><p>In the middle of an integration, to add data to Amazon S3, add an Amazon S3 connection to the middle of a flow.</p></div><div class="ulist"><div class="title">Prerequisite</div><ul><li><p>You created an Amazon S3 connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the flow visualization, click the plus sign where you want to add an Amazon S3 connection.</p></li><li><p>Click the Amazon S3 connection that you want to use in the middle of a flow.</p></li><li><p>Select the action that you want the connection to perform:</p><div class="ulist"><ul><li><p><strong>Copy Object</strong> adds one or more objects to the bucket.</p><div class="paragraph"><p>To add one file to the bucket, you can enter its name in the <strong>File Name</strong> field.</p></div><div class="paragraph"><p>To add multiple files to the bucket, do not specify a file name. In this case, the action adds all objects that it obtains from the previous integration step(s).</p></div><div class="paragraph"><p>If you used the poll action to obtain multiple files and you specify a file name then the <strong>Copy Object</strong> action adds only the last file that was received from the poll action.</p></div></li><li><p><strong>Delete Object</strong> deletes an object from the bucket. In the <strong>File Name</strong> field, specify the name of the object that you want to delete. If the specified file is not in the bucket, the integration continues with no error.</p></li></ul></div></li><li><p>After you configure the chosen action, click <strong>Next</strong> to specify the action&#8217;s input type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection input in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the flow visualization where you added it.</p></div></div></div></div></div><div class="sect1"><h2 id="connecting-to-amq_connectors">3. Connecting to AMQ</h2><div class="sectionbody"><div class="paragraph"><p>In an integration, you can obtain messages from a Red Hat AMQ broker or publish messages to a Red Hat AMQ broker. Red Hat AMQ uses the OpenWire protocol for communication between clients and message brokers. To communicate with the following broker types, use the Red Hat AMQ connector to create a connection to the broker of interest:</p></div><div class="ulist"><ul><li><p>Apache ActiveMQ broker that does not support AMQP</p></li><li><p>AMQ 6 broker</p></li></ul></div><div class="paragraph"><p>To communicate with one of the following broker types, <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-amqp_amqp">use the AMQP connector</a> to create a connection to the broker of interest:</p></div><div class="ulist"><ul><li><p>Apache ActiveMQ broker that supports AMQP</p></li><li><p>Apache ActiveMQ Artemis</p></li><li><p>AMQ 7 broker</p></li><li><p>EnMasse, which is an open source messaging platform</p></li></ul></div><div class="paragraph"><p>To use the Red Hat AMQ connector, see:</p></div><div class="ulist"><ul><li><p><a href="#create-amq-connection_amq">Creating an AMQ connection</a></p></li><li><p><a href="#adding-amq-connection-start_amq">Adding an AMQ connection to trigger integration execution upon receiving messages</a></p></li><li><p><a href="#adding-amq-connection-finish_amq">Publishing AMQ messages to finish an integration</a></p></li><li><p><a href="#adding-amq-connection-middle_amq">Publishing AMQ messages in the middle of an integration</a></p></li></ul></div><div class="sect2"><h3 id="create-amq-connection_amq">3.1. Creating an AMQ connection</h3><div class="paragraph"><p>In an integration, to obtain messages from or to publish messages to:</p></div><div class="ulist"><ul><li><p>An Apache ActiveMQ broker that does not support AMQP</p></li><li><p>An AMQ 6 broker</p></li></ul></div><div class="paragraph"><p>Create a Red Hat AMQ connection, which you can add to an integration.</p></div><div class="paragraph"><div class="title">Prerequisites</div><p>For the Red Hat AMQ broker that you want to connect to, you have the following:</p></div><div class="ulist"><ul><li><p>Broker URL</p></li><li><p>User account credentials</p></li><li><p>Broker&#8217;s PEM certificate text</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display connectors.</p></li><li><p>Click the <strong>Red Hat AMQ</strong> connector.</p></li><li><p>Configure the connection:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Broker URL</strong> field, enter the location that you want to send data to or obtain data from, for example, <code>tcp://localhost:61616</code>.</p></li><li><p>In the <strong>User name</strong> field, enter the user name for the account that you want to use to access this broker.</p></li><li><p>In the <strong>Password</strong> field, enter the password for the account that you want to use to access this broker.</p></li><li><p>In the <strong>Client ID</strong> field, enter the ID that allows connections to close and reopen without missing messages. The destination type must be a topic.</p></li><li><p>If this connection will be used in a development environment, you can save some time by disabling <strong>Check certificates</strong>. Disabling the checking of certificates is a convenience for development environments. For secure production environments, always enable <strong>Check certificates</strong>.</p></li><li><p>In the <strong>Broker certificate</strong> field, paste the Red Hat AMQ broker&#8217;s PEM certificate text. This is required except when you disable checking the certificates.</p></li><li><p>In the <strong>Client certificate</strong> field, paste the Red Hat client&#8217;s PEM certificate text. Content in this field is always optional.</p></li></ol></div></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether validation is successful. If validation fails, revise the configuration details as needed and try again.</p></li><li><p>If validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, you might enter <code>Red Hat AMQ 1</code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample Red Hat AMQ connection that uses a provided broker.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>Red Hat AMQ 1</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="adding-amq-connection-start_amq">3.2. Adding an AMQ connection to trigger integration execution upon receiving messages</h3><div class="paragraph"><p>To trigger execution of an integration upon receiving a message from a Red Hat AMQ broker, add a Red Hat AMQ connection as the start connection.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You created a Red Hat AMQ connection to the Red Hat AMQ broker that you want to obtain messages from.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the Red Hat AMQ connection that you want to use to start the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select the <strong>Subscribe for messages</strong> action to receive messages from the queue or topic that you specify.</p></li><li><p>Configure the action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Destination name</strong> field, enter the name of the queue or topic to receive data from.</p></li><li><p>For the <strong>Destination type</strong>, accept <strong>Queue</strong> or select <strong>Topic</strong>.</p></li><li><p>In the <strong>Durable subscription ID</strong> field, to allow connections to close and reopen without missing messages, enter the durable subscription ID. The destination type must be a topic.</p></li><li><p>In the <strong>Message selector</strong> field, if you want to receive only data that satisfies a particular condition, enter a filter expression.</p><div class="paragraph"><p>A message selector is a string that contains an expression. The syntax of the expression is based on a subset of the SQL92 conditional expression syntax. The message selector in the following example selects any message that has a <code>NewsType</code> property whose value is set to <code>Sports</code> or <code>Opinion</code>:</p></div><div class="paragraph"><p><code>NewsType = ’Sports’ OR NewsType = ’Opinion’</code></p></div><div class="paragraph"><p>The message consumer receives only those messages whose headers and properties match the message selector expression. A message selector cannot select messages on the basis of the content of the message body.</p></div></li></ol></div></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s output type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection output in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears at the beginning of the integration flow.</p></div></div><div class="sect2"><h3 id="adding-amq-connection-finish_amq">3.3. Publishing AMQ messages to finish an integration</h3><div class="paragraph"><p>To finish a simple integration by publishing messages to a Red Hat AMQ broker, add a Red Hat AMQ connection as the simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a connection to the Red Hat AMQ broker that you want to publish messages to.</p></li><li><p>You are creating an integration and Syndesis is prompting you to choose the finish connection, or you are editing an integration to change the finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Choose a connection</strong> page, click the Red Hat AMQ connection that you want to use to finish the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select the <strong>Publish messages</strong> action to publish messages to the queue or topic that you specify.</p></li><li><p>In the <strong>Destination name</strong> field, enter the name of the queue or topic to send messages to.</p></li><li><p>For the <strong>Destination type</strong>, accept <strong>Queue</strong> or select <strong>Topic</strong>.</p></li><li><p>Select <strong>Persistent</strong> to guarantee message delivery even if a connection fails.</p></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s input/output type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection input/output in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears at the end of the integration visualization.</p></div></div><div class="sect2"><h3 id="adding-amq-connection-middle_amq">3.4. Publishing AMQ messages in the middle of an integration</h3><div class="paragraph"><p>In the middle of an integration, to publish messages to a Red Hat AMQ broker, add a Red Hat AMQ connection to the middle of a flow.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a connection to the Red Hat AMQ broker that you want to publish messages to.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the Red Hat AMQ connection that you want in the middle of the flow.</p></li><li><p>On the <strong>Choose an action</strong> page, select one of the following actions:</p><div class="ulist"><ul><li><p><strong>Publish messages</strong> to publish messages to the queue or topic that you specify. To configure this action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Destination name</strong> field, enter the name of the queue or topic to send messages to.</p></li><li><p>For the <strong>Destination type</strong>, accept <strong>Queue</strong> or select <strong>Topic</strong>.</p></li><li><p>Select <strong>Persistent</strong> to guarantee message delivery even if a connection fails.</p></li></ol></div></li><li><p><strong>Request response using messages</strong> to send messages to the JMS destination that you specify and receive a response. To configure this action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Destination name</strong> field, enter the name of the queue or topic to send messages to.</p></li><li><p>For the <strong>Destination type</strong>, accept <strong>Queue</strong> or select <strong>Topic</strong>.</p></li><li><p>In the <strong>Message selector</strong> field, if you want to receive only responses that satisfy a particular condition, enter a filter expression.</p><div class="paragraph"><p>A message selector is a string that contains an expression. The syntax of the expression is based on a subset of the SQL92 conditional expression syntax. The message selector in the following example selects any message that has a <code>NewsType</code> property whose value is set to <code>Sports</code> or <code>Opinion</code>:</p></div><div class="paragraph"><p><code>NewsType = ’Sports’ OR NewsType = ’Opinion’</code></p></div><div class="paragraph"><p>The message consumer receives only those messages whose headers and properties match the message selector expression. A message selector cannot select messages on the basis of the content of the message body.</p></div></li><li><p>In the <strong>Named reply to</strong> field, enter the name of a queue or topic. The destination sends its response to this queue or topic.</p></li><li><p>Select <strong>Persistent</strong> to guarantee message delivery even if a connection fails.</p></li><li><p>In the <strong>Response time out</strong> field, specify the number of milliseconds that this connection waits for a response message before throwing a runtime exception. The default is 5000 milliseconds (5 seconds).</p></li></ol></div></li></ul></div></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s input type and then the action&#8217;s output type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection input/output in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-amqp_connectors">4. Connecting to AMQP</h2><div class="sectionbody"><div class="paragraph"><p>In an integration, you can obtain messages from or publish messages to an Advanced Message Queue Protocol (AMQP) broker. AMQP defines communication between clients and message brokers. To communicate with the following broker types, use the AMQP connector to create a connection to the broker of interest:</p></div><div class="ulist"><ul><li><p>Apache ActiveMQ broker that supports AMQP</p></li><li><p>Apache ActiveMQ Artemis</p></li><li><p>AMQ 7 broker</p></li><li><p>EnMasse, which is an open source messaging platform</p></li></ul></div><div class="paragraph"><p>To communicate with one of the following broker types, <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#connecting-to-amq_amq">use the Red Hat AMQ connector</a> to create a connection to the broker of interest:</p></div><div class="ulist"><ul><li><p>Apache ActiveMQ broker that does not support AMQP</p></li><li><p>AMQ 6 broker</p></li></ul></div><div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content">It is possible to use the AMQP connector to create a connection to an Apache ActiveMQ broker that does not support AMQP or to an AMQ 6 broker. Doing this requires transport configuration in the broker. For information about configuring the broker, see <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_a-mq/6.3/html/managing_and_monitoring_a_broker/fmqadmintransportconnectors">Red Hat JBoss A-MQ Managing and Monitoring Brokers, Adding Client Connection Points</a>. For information about the configuration values to specify, see <a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_a-mq/6.3/html-single/connection_reference/index#AMQP">Red Hat JBoss A-MQ Connection Reference, Advanced Message Queuing Protocol (AMQP)</a>.</td></tr></table></div><div class="paragraph"><p>To use the AMQP connector, see:</p></div><div class="ulist"><ul><li><p><a href="#create-amqp-connection_amqp">Creating an AMQP connection</a></p></li><li><p><a href="#adding-amqp-connection-start_amqp">Adding an AMQP connection to trigger integration execution upon receiving messages</a></p></li><li><p><a href="#adding-amqp-connection-middle_amqp">Publishing messages to AMQP in the middle of a flow or to finish an integration</a></p></li></ul></div><div class="sect2"><h3 id="create-amqp-connection_amqp">4.1. Creating an AMQP connection</h3><div class="paragraph"><p>In an integration, to obtain messages from or publish messages to an AMQP broker, create an AMQP connection, which you can add to an integration.</p></div><div class="paragraph"><div class="title">Prerequisites</div><p>For the AMQP broker that you want to connect to, you have the following:</p></div><div class="ulist"><ul><li><p>Its URI</p></li><li><p>User account credentials</p></li><li><p>Its PEM certificate text</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display connectors.</p></li><li><p>Click the <strong>AMQP Message Broker</strong> connector.</p></li><li><p>Configure the connection:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Connection URI</strong> field, enter the location you want to send data to or obtain data from.</p></li><li><p>In the <strong>User name</strong> field, enter the user name for the account that you want to use to access this broker.</p></li><li><p>In the <strong>Password</strong> field, enter the password for the account that you want to use to access this broker.</p></li><li><p>In the <strong>Client ID</strong> field, enter the ID that allows connections to close and reopen without missing messages. The destination type must be a topic.</p></li><li><p>If this connection will be used in a development environment, you can save some time by disabling <strong>Check certificates</strong>. Disabling the checking of certificates is a convenience for development environments. For secure production environments, always enable <strong>Check certificates</strong>.</p></li><li><p>In the <strong>Broker certificate</strong> field, paste the broker&#8217;s PEM certificate text. This is required except when you disable the checking of certificates.</p></li><li><p>In the <strong>Client certificate</strong> field, paste the client&#8217;s PEM certificate text. Content in this field is always optional.</p></li></ol></div></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether validation is successful. If validation fails, revise the configuration details as needed and try again.</p></li><li><p>If validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, you might enter <code>AMQP 1</code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample AMQP connection</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>AMQP 1</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="adding-amqp-connection-start_amqp">4.2. Adding an AMQP connection to trigger integration execution upon receiving messages</h3><div class="paragraph"><p>To trigger execution of an integration upon receiving messages from an AMQP broker, add an AMQP connection as the integration&#8217;s start connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a connection to the AMQP broker that you want to receive messages from.</p></li><li><p>You are creating an integration and Syndesis is prompting you to choose the start connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Choose a connection</strong> page, click the AMQP connection that you want to use to start the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select the <strong>Subscribe for messages</strong> action to receive messages from the queue or topic that you specify.</p></li><li><p>Configure the action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Destination name</strong> field, enter the name of the queue or topic to receive data from.</p></li><li><p>For the <strong>Destination type</strong>, accept <strong>Queue</strong> or select <strong>Topic</strong>.</p></li><li><p>In the <strong>Durable subscription ID</strong> field, to allow connections to close and reopen without missing messages, enter the durable subscription ID. The destination type must be a topic.</p></li><li><p>In the <strong>Message selector</strong> field, if you want to receive only data that satisfies a particular condition, enter a filter expression.</p><div class="paragraph"><p>A message selector is a string that contains an expression. The syntax of the expression is based on a subset of the SQL92 conditional expression syntax. The message selector in the following example selects any message that has a <code>NewsType</code> property whose value is set to <code>Sports</code> or <code>Opinion</code>:</p></div><div class="paragraph"><p><code>NewsType = ’Sports’ OR NewsType = ’Opinion’</code></p></div><div class="paragraph"><p>The message consumer receives only those messages whose headers and properties match the message selector expression. A message selector cannot select messages on the basis of the content of the message body.</p></div></li></ol></div></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s output type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection output in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears at the beginning of the integration flow.</p></div></div><div class="sect2"><h3 id="adding-amqp-connection-middle_amqp">4.3. Publishing messages to AMQP in the middle of a flow or to finish an integration</h3><div class="paragraph"><p>You can publish messages to an AMQP broker in the middle of a flow or to finish a simple integration. To do this, add an AMQP connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a connection to the AMQP broker that you want to publish messages to.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a simple integration&#8217;s finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the AMQP connection that you want to use to publish messages.</p></li><li><p>On the <strong>Choose an action</strong> page, select one of the following actions:</p><div class="ulist"><ul><li><p><strong>Publish messages</strong> to publish messages to the queue or topic that you specify without receiving a response. To configure this action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Destination name</strong> field, enter the name of the queue or topic to send messages to.</p></li><li><p>For the <strong>Destination type</strong>, accept <strong>Queue</strong> or select <strong>Topic</strong>.</p></li><li><p>Select <strong>Persistent</strong> to guarantee message delivery even if a connection fails.</p></li></ol></div></li><li><p><strong>Request response using messages</strong> to publish messages to the queue or topic that you specify and receive a response.</p><div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content"><div class="paragraph"><p>When the finish connection in a simple integration is an AMQP connection that performs the <strong>Request response using messages</strong> action, the connection publishes the messages but the response is discarded. To avoid losing the response, add an AMQP connection as a middle connection that performs the <strong>Request response using messages</strong> action and finish the simple integration with a log step.</p></div></td></tr></table></div><div class="paragraph"><p>To configure this action:</p></div><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Destination name</strong> field, enter the name of the queue or topic to send messages to.</p></li><li><p>For the <strong>Destination type</strong>, accept <strong>Queue</strong> or select <strong>Topic</strong>.</p></li><li><p>In the <strong>Durable subscription ID</strong> field, to allow connections to close and reopen without missing messages, enter the durable subscription ID. The destination type must be a topic.</p></li><li><p>In the <strong>Message selector</strong> field, if you want to receive only responses that satisfy a particular condition, enter a filter expression.</p><div class="paragraph"><p>A message selector is a string that contains an expression. The syntax of the expression is based on a subset of the SQL92 conditional expression syntax. The message selector in the following example selects any message that has a <code>NewsType</code> property whose value is set to <code>Sports</code> or <code>Opinion</code>:</p></div><div class="paragraph"><p><code>NewsType = ’Sports’ OR NewsType = ’Opinion’</code></p></div><div class="paragraph"><p>The message consumer receives only those messages whose headers and properties match the message selector expression. A message selector cannot select messages on the basis of the content of the message body.</p></div></li></ol></div></li></ul></div></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s input and output type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection input/output in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-box_connectors">5. Connecting to Box</h2><div class="sectionbody"><div class="paragraph"><p>In an integration, you can download files from Box or upload files to Box.</p></div><div class="paragraph"><p>A connection to Box cannot start a simple integration. In other words, you cannot use a Box connection to trigger integration execution.</p></div><div class="paragraph"><p>The following topics provide the details:</p></div><div class="ulist"><ul><li><p><a href="#register-with-box_box">Registering Syndesis as a Box client</a></p></li><li><p><a href="#creating-box-connections_box">Creating a Box connection</a></p></li><li><p><a href="#adding-box-connection-middle_box">Downloading or uploading a Box file in the middle of an integration</a></p></li><li><p><a href="#adding-box-connection-finish_box">Uploading files to Box to finish an integration</a></p></li></ul></div><div class="sect2"><h3 id="register-with-box_box">5.1. Registering Syndesis as a Box client</h3><div class="paragraph"><p>You must register your Syndesis environment as a client application that can access Box. This lets you create any number of integrations that connect to Box. In other words, you need to register a particular Syndesis environment with Box only once.</p></div><div class="paragraph"><p>In each Syndesis environment, there can be only one registration of Syndesis as a Box client application. However, while each Box connection uses the same registration, it can use different user credentials.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You have a Box developer account, which you can obtain at <a href="https://app.box.com/developers/console" class="bare">https://app.box.com/developers/console</a>.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the left panel, click <strong>Settings</strong>.</p></li><li><p>On the <strong>Settings</strong> page, near the top, to the right of the callback URL, click <span class="image"><img src="images/tutorials/CopyCallback.png" alt="Copy Callback URL"></span>to copy the callback URL for your Syndesis environment to the clipboard. You will need this URL toward the end of this procedure.</p></li></ol></div></li><li><p>In another browser tab, go to the Box developer portal at <a href="https://app.box.com/developers/console" class="bare">https://app.box.com/developers/console</a> and do the following:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Sign in.</p></li><li><p>Click <strong>Create New App</strong>.</p></li><li><p>Click <strong>Custom App</strong> and then <strong>Next</strong>.</p></li><li><p>For <strong>Authentication Method</strong>, click <strong>Standard OAuth 2.0 (User Authentication)</strong> and then <strong>Next</strong>.</p></li><li><p>Enter an app name, for example, <strong>Syndesis Client</strong> and click <strong>Create App</strong>.</p></li><li><p>Click <strong>View Your App</strong>.</p></li><li><p>Optional. In the <strong>OAuth 2.0 Credentials</strong> section, copy the client ID and the client secret to a safe location. These values are needed to create a connection to Box.</p></li><li><p>Click <strong>Save Changes</strong>.</p></li></ol></div></li></ol></div><div class="paragraph"><div class="title">Result</div><p>Your Syndesis environment is now registered as a Box client, which means that Syndesis can access content in the Box account that you signed into.</p></div></div><div class="sect2"><h3 id="creating-box-connections_box">5.2. Creating a Box connection</h3><div class="paragraph"><p>In an integration, to download or upload Box files, create a Box connection, which you can add to an integration. You can add the same connection to any number of integrations.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>There is a Box client application that registers your Syndesis environment as an application that can access Box.</p></li><li><p>You can log in to the Box developer account that created that application, or you have the Box client ID and Box client secret for that application.</p></li><li><p>You know the user name and password for the Box account that you want this connection to use to access Box.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>If you already have the Box client ID and the client secret, skip to the next step. Otherwise, to obtain those values, in a new browser tab, go to <a href="https://app.box.com/developers/console" class="bare">https://app.box.com/developers/console</a> and do the following:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Sign in to the Box account in which you created the app that registers access to Box from your Syndesis environment.</p></li><li><p>On the <strong>My Apps</strong> page, click the Syndesis app to display its settings.</p></li><li><p>On the left, click <strong>Configuration</strong>.</p></li><li><p>In the <strong>OAuth 2.0 Credentials</strong> section, copy the client ID to the clipboard.</p></li></ol></div></li><li><p>In a different browser tab, in Syndesis:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Click <strong>Connections</strong>.</p></li><li><p>Click <strong>Create Connection</strong>.</p></li><li><p>Click the Box connector.</p></li><li><p>In the <strong>User name</strong> field, enter the user name for the Box account that you want this connection to use to download or upload Box files.</p></li><li><p>In the <strong>User password</strong> field, enter the password for that account.</p></li><li><p>In the <strong>Client ID</strong> field, paste the Box client ID.</p></li></ol></div></li><li><p>Optional. If you need to, go back to the <strong>OAuth 2.0 Credentials</strong> for the Box app, copy the client secret to the clipboard and then return to Syndesis.</p></li><li><p>In the <strong>Client secret</strong> field, paste the Box client secret string.</p></li><li><p>Click <strong>Validate</strong>. Syndesis displays a message that indicates whether it can validate this connection. If validation fails, try again and be sure to enter the correct values.</p></li><li><p>When validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code><strong>Box Sales Account</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample Box connection that can access content in our company sales Box account.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>Box Sales Account</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="adding-box-connection-middle_box">5.3. Downloading or uploading a Box file in the middle of an integration</h3><div class="paragraph"><p>To download a file from Box, or upload a file to Box in the middle of a flow, add a Box connection to the middle of the flow.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Box connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection.</p></li><li><p>Click the Box connection that you want the integration to use.</p></li><li><p>On the <strong>Choose an action</strong> page, select one of the following:</p><div class="ulist"><ul><li><p><strong>Download</strong> to obtain a file from the Box account that this connection accesses.</p></li><li><p><strong>Upload</strong> to upload a file to the Box account that this connection accesses.</p></li></ul></div></li><li><p>Configure the action you selected.</p><div class="paragraph"><p>To <strong>download</strong> a file:</p></div><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>File encoding</strong> field, accept <code>UTF-8</code> or specify the encoding for the file that you want the connection to obtain.</p></li><li><p>Optional. In the <strong>File ID</strong> field, specify the Box ID for the file that you want to obtain. The file ID is at the end of the URL when you are viewing the file in Box. For example, in this URL: <code>https://app.box.com/file/537364588548</code>, the file ID is <code>537364588548</code>.</p><div class="paragraph"><p>Alternatively, you can add a data mapper step before this connection and map the file ID from a previous step to this connection.</p></div><div class="paragraph"><p>In this release, you can download only a single file. However, mapping the file ID from a previous step can make identification of the file dynamic, for example, the ID can come from a database table. This means each execution might download a different file.</p></div></li></ol></div><div class="paragraph"><p>To <strong>upload</strong> a file:</p></div><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Parent folder ID</strong> field, enter the ID of the Box folder to upload the file to.</p><div class="paragraph"><p>Box folder IDs are at the end of the URL when you view the content of a folder in Box. In this example: <code>https://app.box.com/folder/89490291417</code>, the folder ID is <code>89490291417</code>. In this release, you can upload only a single file.</p></div></li><li><p>Optional. In the <strong>File name</strong> field, enter the name for a new file. If you specify the name of a file that is already in the specified Box folder, the connection overwrites the file that is in the folder.</p><div class="paragraph"><p>The input to the connection must be a file that you want to upload to Box. If you do not specify a file name, the connection uploads a file that has the same name as the input file to the connection as long as a file with that name is not already present.</p></div></li><li><p>Click <strong>Next</strong> to specify the upload action&#8217;s input type.</p></li><li><p>In the <strong>Select Type</strong> field, accept <strong>Type specification not required</strong> and click <strong>Next</strong>.</p></li></ol></div></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration flow where you added it.</p></div></div><div class="sect2"><h3 id="adding-box-connection-finish_box">5.4. Uploading files to Box to finish an integration</h3><div class="paragraph"><p>To finish an integration by uploading files to Box, add a Box connection as the integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Box connection.</p></li><li><p>You are creating or editing a simple integration and Syndesis is prompting you to choose the finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Choose a connection</strong> page, click the Box connection that you want to use to finish the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select the <strong>Upload</strong> action to upload a file to the Box account that this connection accesses.</p></li><li><p>In the <strong>Parent folder ID</strong> field, enter the ID of the Box folder to upload the file to.</p><div class="paragraph"><p>Box folder IDs are at the end of the URL when you select a folder in Box. In this example: <code>https://app.box.com/folder/89490291417</code>, the folder ID is <code>89490291417</code>. In this release, you can upload only a single file.</p></div></li><li><p>Optional. In the <strong>File name</strong> field, enter the name for a new file or an existing file. If you specify the name of a file that is already in the specified Box folder, the connection overwrites the file that is in the folder.</p><div class="paragraph"><p>The input to the connection must be a file that you want to upload to Box. If you do not specify a file name, the connection uploads a file that has the same name as the input file to the connection.</p></div></li><li><p>Click <strong>Next</strong>.</p></li><li><p>In the <strong>Select Type</strong> field, accept <strong>Type specification not required</strong> and click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears at the end of the integration visualization.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-dropbox_connectors">6. Connecting to Dropbox</h2><div class="sectionbody"><div class="paragraph"><p>In an integration, you can download files from Dropbox or upload files to Dropbox. The following topics provide the details:</p></div><div class="ulist"><ul><li><p><a href="#register-with-dropbox_dropbox">Registering Syndesis as a Dropbox client</a></p></li><li><p><a href="#create-dropbox-connection_dropbox">Creating a Dropbox connection</a></p></li><li><p><a href="#adding-dropbox-connection-start_dropbox">Obtaining files from Dropbox to trigger integration execution</a></p></li><li><p><a href="#adding-dropbox-connection-finish_dropbox">Adding files to Dropbox to finish an integration</a></p></li><li><p><a href="#adding-dropbox-connection-middle_dropbox">Accessing Dropbox in the middle of an integration</a></p></li></ul></div><div class="sect2"><h3 id="register-with-dropbox_dropbox">6.1. Registering Syndesis as a Dropbox client</h3><div class="paragraph"><p>You must register your Syndesis environment as a client application that can access Dropbox. This lets you create any number of integrations that connect to Dropbox. In other words, you need to register a particular Syndesis environment with Dropbox only once.</p></div><div class="paragraph"><p>In each Syndesis environment, there can be only one registration of Syndesis as a Dropbox client application. However, while each Dropbox connection uses the same registration, it can use different user credentials.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You can sign in to the Dropbox account that you want an integration to use to download or upload files.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the left panel, click <strong>Settings</strong>.</p></li><li><p>On the <strong>Settings</strong> page, near the top, to the right of the callback URL, click <span class="image"><img src="images/tutorials/CopyCallback.png" alt="Copy Callback URL"></span>to copy the callback URL for your Syndesis environment to the clipboard. You will need this URL toward the end of this procedure.</p></li></ol></div></li><li><p>In another browser tab, go to <code><a href="https://www.dropbox.com" class="bare">https://www.dropbox.com</a></code> and do the following:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Sign in to the Dropbox account that has the data that you want to access in an integration.</p></li><li><p>After signing in, go to <a href="https://www.dropbox.com/developers/apps" class="bare">https://www.dropbox.com/developers/apps</a>.</p></li><li><p>Click <strong>Create App</strong>.</p></li><li><p>Select <strong>Dropbox API</strong>.</p></li><li><p>Near the top of the page, in the sentence that starts with <code><strong>During registration, enter this callback URL:</strong></code>, paste the URL that you copied to the clipboard at the beginning of this procedure. For example, the URL that you paste is something like this: <code>https://app-proj9128.7b63.fuse-ignite.openshiftapps.com/api/v1/credentials/callback</code>.</p></li><li><p>Choose whether Syndesis can access a single folder or all of the folders and files.</p></li><li><p>Specify a name for your Dropbox app. For example, you might specify <code><strong>Fuse Online Access From Aslan LLC</strong></code>. The name you specify must be unique in the set of Dropbox app names.</p></li><li><p>Check the box to indicate that you agree to Dropbox API terms and conditions.</p></li><li><p>Click <strong>Create App</strong>.</p></li><li><p>In the Dropbox <strong>Settings</strong> page for your new app, in the input field for <strong>OAuth2 Redirect URIs</strong>, paste your Syndesis URL, which you copied to the clipboard at the beginning of this procedure.</p></li><li><p>Click <strong>Add</strong>.</p></li></ol></div></li></ol></div><div class="paragraph"><div class="title">Result</div><p>Your Syndesis environment is now registered as a Dropbox client, which means that Syndesis can access content in the Dropbox account that you signed into.</p></div></div><div class="sect2"><h3 id="create-dropbox-connection_dropbox">6.2. Creating a Dropbox connection</h3><div class="paragraph"><p>In an integration, to download or upload Dropbox files, create a Dropbox connection, which you can add to an integration. You can add the same connection to any number of integrations.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You registered your Syndesis environment as an application that can access Dropbox.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In a new browser tab, go to <code><a href="https://www.dropbox.com" class="bare">https://www.dropbox.com</a></code> and do the following:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Sign in to the Dropbox account in which you created the app that registers access from your Syndesis environment.</p></li><li><p>Go to <a href="https://www.dropbox.com/developers/apps" class="bare">https://www.dropbox.com/developers/apps</a>.</p></li><li><p>Click the Syndesis app to display its settings.</p></li></ol></div></li><li><p>In another browser tab, in Syndesis, do the following:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display the available connectors.</p></li><li><p>Click the <strong>Dropbox</strong> connector.</p></li></ol></div></li><li><p>Go back to the Dropbox settings display for your app and do the following:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Scroll down to see <strong>Generated Access Token</strong>.</p></li><li><p>Click <strong>Generate</strong>.</p></li><li><p>Copy the generated access token to the clipboard.</p></li></ol></div></li><li><p>Back in Syndesis, in the <strong>Configure Connection</strong> page, in the <strong>Access Token</strong> field, paste the generated access token.</p></li><li><p>In the <strong>Client Identifier</strong> field, enter the name that you specified when you created the Dropbox app.</p></li><li><p>Click <strong>Validate</strong>. Syndesis displays a message that indicates whether it can validate this connection. If validation fails, try again and be sure to enter the correct values.</p></li><li><p>When validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code><strong>Dropbox Connect 1</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample Dropbox connection that can access all content in our company Dropbox account.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>Dropbox Connect 1</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="adding-dropbox-connection-start_dropbox">6.3. Obtaining files from Dropbox to trigger integration execution</h3><div class="paragraph"><p>To start an integration by downloading files from Dropbox, add a Dropbox connection as the start connection.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You created a Dropbox connection.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the Dropbox connection that you want to use to start the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select the <strong>Download</strong> action to obtain one or more files from the Dropbox account that this connection accesses.</p></li><li><p>To configure the action, in the <strong>Folder or file name path to download</strong> field, specify the filename path for the content that you want the integration to obtain. In this release, you can download only a single file.</p></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s output type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection output in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection starts the simple integration and Syndesis prompts you to choose the finish connection.</p></div></div><div class="sect2"><h3 id="adding-dropbox-connection-finish_dropbox">6.4. Adding files to Dropbox to finish an integration</h3><div class="paragraph"><p>To finish an integration by uploading files to Dropbox, add a Dropbox connection as the integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Dropbox connection.</p></li><li><p>You are creating or editing an integration and Syndesis is prompting you to choose the finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Choose a connection</strong> page, click the Dropbox connection that you want to use to finish the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select the <strong>Upload</strong> action to add the current integration data to the Dropbox account that this connection accesses.</p></li><li><p>In the <strong>Remote Path</strong> field, enter the local filename path for file that you want to upload. Dropbox stores the file with the same path and name. In this release, you can upload only a single file.</p></li><li><p>For the <strong>Upload mode</strong>:</p><div class="ulist"><ul><li><p>Select <strong>Add</strong> to upload a file only when a file with the same name is not already in the same Dropbox folder. If a file with the same name is already in the same Dropbox folder, then the file is not uploaded and the integration continues. This is the behavior regardless of whether the content in the file you are trying to upload has been updated.</p></li><li><p>Select <strong>Force</strong> to ensure that the file is uploaded even if a file with the same name is present in the same Dropbox folder. Dropbox overwrites the file that it already has with the file that you are uploading.</p></li></ul></div></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s input type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection input in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears at the end of the integration visualization.</p></div></div><div class="sect2"><h3 id="adding-dropbox-connection-middle_dropbox">6.5. Accessing Dropbox in the middle of an integration</h3><div class="paragraph"><p>To upload a file to Dropbox in the middle of a flow, add a Dropbox connection to the middle of the flow.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Dropbox connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the Dropbox connection that you want the integration to use.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Upload</strong> to add the current integration data to the Dropbox account that this connection accesses.</p></li><li><p>Configure this action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Remote Path</strong> field, specify the local path and file name of the file that you want to upload. Dropbox stores the file with the same path and name. In this release, you can upload only a single file.</p></li><li><p>For the <strong>Upload mode</strong>:</p><div class="ulist"><ul><li><p>Select <strong>Add</strong> to upload a file only when a file with the same name is not already in the same Dropbox folder. If a file with the same name is already in the same Dropbox folder, then the file is not uploaded and the integration continues. This is the behavior regardless of whether the content in the file you are trying to upload has been updated.</p></li><li><p>Select <strong>Force</strong> to ensure that the file is uploaded even if a file with the same name is present in the same Dropbox folder. Dropbox overwrites the file that it already has with the file that you are uploading.</p></li></ul></div></li></ol></div></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s input and output type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection input/output in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration flow where you added it.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-email-servers_connectors">7. Connecting to Email Servers (IMAP, POP3, SMTP)</h2><div class="sectionbody"><div class="paragraph"><p>An integration can connect to an IMAP or POP3 email server to retrieve email messages or connect to an SMTP email server to send email messages. To trigger integration execution upon retrieving email, create a connection to an IMAP or POP3 email server and then add that connection as a simple integration&#8217;s start connection. To send an email from a flow, create a connection to an SMTP email server and then add that connection to the middle of a flow or to finish a simple integration.</p></div><div class="paragraph"><p>For details, see:</p></div><div class="ulist"><ul><li><p><a href="#creating-a-connection-to-an-imap-or-pop3-email-server_email">Creating a connection to an IMAP or POP3 email server</a></p></li><li><p><a href="#creating-a-connection-to-an-smtp-email-server_email">Creating a connection to an SMTP email server</a></p></li><li><p><a href="#obtaining-email-to-trigger-integration-execution_email">Obtaining email to trigger integration execution</a></p></li><li><p><a href="#sending-email-from-an-integration_email">Sending email from an integration</a></p></li></ul></div><div class="sect2"><h3 id="creating-a-connection-to-an-imap-or-pop3-email-server_email">7.1. Creating a connection to an IMAP or POP3 email server</h3><div class="paragraph"><p>You must create a connection to an IMAP or POP3 email server before you can create a simple integration whose execution is triggered by received email.</p></div><div class="paragraph"><div class="title">Prerequisites</div><p>You must be familiar with the email server that this connection accesses. Specifically, you must know:</p></div><div class="ulist"><ul><li><p>Whether the email server uses the IMAP or POP3 protocol.</p></li><li><p>Whether authentication credentials are required. If they are, you must have a user name and password.</p></li><li><p>Whether a security method is implemented. If one is, you must know which method.</p></li><li><p>Whether a server certificate is required. If it is, you must be able to specify it.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display Syndesis connectors.</p></li><li><p>Click the <strong>Receive Email</strong> connector.</p></li><li><p>Configure the connection:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Protocol</strong> field, accept <strong>imap</strong> or select <strong>pop3</strong>.</p></li><li><p>In the <strong>Email Host Name</strong> field, enter the email server host name, virtual host name, or IP address.</p></li><li><p>In the <strong>Email Server Port Number</strong> field, enter the port number that the email server listens on.</p></li><li><p>In the <strong>User Name</strong> field, specify the user name for the email account that this connection is authorized to access. During execution of an integration, this connection polls this email account for messages.</p><div class="paragraph"><p>Rarely, an email server does not authenticate access. In that case, specification of user name and password is not required.</p></div></li><li><p>In the <strong>Password</strong> field, specify the password for the email account that this connection is authorized to access.</p></li><li><p>Optional. In the <strong>Security Method</strong> field, if the email server implements a security method, select <strong>StartTLS</strong> or <strong>SSL/TLS</strong>.</p></li><li><p>Optional. In the <strong>Server Certificate</strong> field, if the email server is not public, that is, it is on an internal network, and if you selected <strong>StartTLS</strong> or <strong>SSL/TLS</strong> as the security method, paste the self-signed email server certificate in this field. Syndesis cannot verify this connection if a server certificate is required and you do not specify it.</p></li></ol></div></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether or not validation is successful. If validation fails, revise the configuration details as needed and try again.</p></li><li><p>When validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code><strong>Obtain Info Emails</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Connect to our company email server to obtain messages sent to info@ourcompany.com.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>Obtain Info Emails</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="creating-a-connection-to-an-smtp-email-server_email">7.2. Creating a connection to an SMTP email server</h3><div class="paragraph"><p>You must create a connection to an SMTP email server before you can edit an integration flow so that it connects to an SMTP email server to send email.</p></div><div class="paragraph"><div class="title">Prerequisites</div><p>You must be familiar with the email server that this connection accesses. Specifically, you must know:</p></div><div class="ulist"><ul><li><p>Whether authentication credentials are required. If they are, you must have a user name and password.</p></li><li><p>Whether a security method is implemented. If one is, you must know which method.</p></li><li><p>Whether a server certificate is required. If it is, you must be able to specify it.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display Syndesis connectors.</p></li><li><p>Click the <strong>Send Email</strong> connector.</p></li><li><p>Configure the connection:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Email Host Name</strong> field, enter the email server host name, virtual host name, or IP address.</p></li><li><p>In the <strong>Email Server Port Number</strong> field, enter the port number that the email server listens on.</p></li><li><p>In the <strong>User Name</strong> field, specify the user name for the email account that this connection is authorized to access. During execution of an integration, this connection uses this email account to send messages.</p><div class="paragraph"><p>Rarely, an email server does not authenticate access. In that case, specification of user name and password is not required.</p></div></li><li><p>In the <strong>Password</strong> field, specify the password for the email account that this connection is authorized to access.</p></li><li><p>Optional. In the <strong>Security Method</strong> field, if the email server implements a security method, select <strong>StartTLS</strong> or <strong>SSL/TLS</strong>.</p></li><li><p>Optional. In the <strong>Server Certificate</strong> field, if the email server is not public, that is, it is on an internal network, and if you selected <strong>StartTLS</strong> or <strong>SSL/TLS</strong> as the security method, paste the self-signed email server certificate in this field. Syndesis cannot verify this connection if a server certificate is required and you do not specify it.</p></li></ol></div></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether or not validation is successful. If validation fails, revise the configuration details as needed and try again.</p></li><li><p>When validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code><strong>Send Emails to Leads</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Connect to our company email server to send messages from info@ourcompany.com.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>Send Emails to Leads</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="obtaining-email-to-trigger-integration-execution_email">7.3. Obtaining email to trigger integration execution</h3><div class="paragraph"><p>To trigger execution of an integration upon receiving email, add an IMAP or POP3 email server connection as a simple integration&#8217;s start connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created an IMAP or POP3 email server connection that is configured to access the account that you want to obtain email from.</p></li><li><p>You know the name of the folder to retrieve messages from.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the email server connection that you want to use to start the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Receive Email</strong> to periodically retrieve messages from the email account that the connection is authorized to access.</p></li><li><p>Configure the action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Leave the <strong>Folder</strong> field blank to obtain email from the inbox. Or, to obtain messages from a particular folder, enter the name of that folder.</p><div class="paragraph"><p>If this connection accesses a POP3 email server, only standard folders, such as <strong>Inbox</strong> or <strong>Sent</strong> are supported.</p></div></li><li><p>Select the <strong>Unseen Only</strong> checkbox to obtain only messages that are marked as unread on the email server.</p></li><li><p>In the <strong>Delay</strong> field, accept the default of 5 seconds as the time that elapses between polls for messages. Or, to specify a different polling interval, enter a number and select its time unit.</p></li><li><p>In the <strong>Maximum Emails</strong> field, enter the largest number of messages that one poll operation can return. The default is 5. If the inbox or folder contains more than the maximum number of messages that can be returned, the connection returns the oldest messages up to the number set for <strong>Maximum Emails</strong>.</p><div class="paragraph"><p>Set <strong>Maximum Emails</strong> to <strong><code>-1</code></strong> if you want each poll to obtain:</p></div><div class="ulist"><ul><li><p>All new messages in the specified folder when <strong>Unseen Only</strong> is selected.</p></li><li><p>All messages in the specified folder when <strong>Unseen Only</strong> is NOT selected.</p></li></ul></div></li></ol></div></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears at the beginning of the integration flow. During execution, if a poll returns email, the connection passes the messages to the next step in the integration. If a poll does not return any email, the integration continues to run but Syndesis does not trigger the rest of the integration steps.</p></div><div class="paragraph"><div class="title">Example</div><p>Consider a <strong>Receive Email</strong> action that is configured as follows:</p></div><div class="ulist"><ul><li><p>The <strong>Folder</strong> field is blank so the connection polls the inbox.</p></li><li><p><strong>Unseen Only</strong> is selected.</p></li><li><p>The defaults for <strong>Delay</strong> (5 seconds) and <strong>Maximum Emails</strong> (5) are accepted.</p></li></ul></div><div class="paragraph"><p>Suppose that 10 messages arrive in the inbox during the delay before the next poll. The connection returns the 5 oldest messages. At the next poll, 5 seconds later, the connection returns the other 5 messages. Even if new messages arrived, this is the case because the connection returns the oldest messages if there are more messages than the number set for <strong>Maximum Emails</strong>.</p></div></div><div class="sect2"><h3 id="sending-email-from-an-integration_email">7.4. Sending email from an integration</h3><div class="paragraph"><p>In the middle of a flow, or to finish a simple integration, you can add an email server connection that sends messages.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created an SMTP email server connection that is configured to access the account that you want to send messages from.</p></li><li><p>Syndesis is prompting you to add to the integration, or to choose the finish connection for a simple integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the email server connection that you want to use to send messages.</p></li><li><p>Select the <strong>Send Email</strong> action.</p></li><li><p>In the <strong>Email from</strong> field, enter the email address that sends the messages. This is required even if you plan to add a data mapper step that maps an email address from a previous integration step to this connection.</p></li><li><p>Recommended: Specify a value in each of the following fields. Separate multiple email addresses with a comma.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p><strong>Email to</strong></p></li><li><p><strong>Email subject</strong></p></li><li><p><strong>Email text</strong></p></li><li><p><strong>Email cc</strong></p></li><li><p><strong>Email bcc</strong></p></li></ol></div></li><li><p>In the <strong>Parameter Priority</strong> field, accept <strong>Input Values</strong> or select <strong>Consumed Data</strong>. This determines which of the following has precedence:</p><div class="ulist"><ul><li><p>Input values in this action configuration</p></li><li><p>Data values that you map to this connection</p></li></ul></div><div class="paragraph"><p>The recommendation is to select <strong>Consumed Data</strong>. This means that the values that you specify in the email fields here serve as default values.</p></div></li><li><p>Click <strong>Next</strong> to add the connection to the flow.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration flow where you added it.</p></div><div class="paragraph"><div class="title">Next steps</div><p>Add all other needed to connections to the flow. Then add a data mapper step before the connection that sends email. In the data mapper step, map source fields to the target fields for sending emails.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-fhir_connectors">8. Connecting to FHIR</h2><div class="sectionbody"><div class="paragraph"><p>Fast Healthcare Interoperability Resources (FHIR) is a standard for exchanging healthcare data. In an integration, you can obtain one or more FHIR resources, create or update a resource, update one or more fields in a resource, or use a transaction to create multiple resources. To do this, add a FHIR connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="paragraph"><p>Syndesis connections to FHIR:</p></div><div class="ulist"><ul><li><p>Can communicate with FHIR servers that use basic or bearer token (OAuth) authentication.</p></li><li><p>Can operate on all FHIR resources that comply with FHIR DSTU3.</p></li><li><p>Cannot operate on extensions, which allow for storing custom data in a resource. If an extension is in data that is received from a FHIR server, the integration silently ignores it.</p></li></ul></div><div class="paragraph"><p>In an integration that connects to FHIR, in a data mapper step, you can map only one level of depth for a FHIR list field. In other words, if a FHIR list contains a list then you cannot map the fields in the nested list. To mitigate this limitation, Syndesis converts some FHIR resource list fields to single-value fields, for example, an address that is in a list field might be displayed in the data mapper as a single field.</p></div><div class="paragraph"><p>Details for connecting to FHIR are in the following topics:</p></div><div class="ulist"><ul><li><p><a href="#creating-fhir-connections_fhir">Creating a connection to a FHIR server</a></p></li><li><p><a href="#adding-fhir-connection-read_fhir">Obtaining a resource from a FHIR server</a></p></li><li><p><a href="#adding-fhir-connection-search_fhir">Querying a FHIR server for resources</a></p></li><li><p><a href="#adding-fhir-connection-create_fhir">Creating a resource on a FHIR server</a></p></li><li><p><a href="#adding-fhir-connection-update_fhir">Updating all fields in a resource on a FHIR server</a></p></li><li><p><a href="#adding-fhir-connection-patch_fhir">Updating specified fields in a resource on a FHIR server</a></p></li><li><p><a href="#adding-fhir-connection-transaction_fhir">Creating resources of different types on a FHIR server</a></p></li><li><p><a href="#adding-fhir-connection-delete_fhir">Deleting a resource from a FHIR server</a></p></li></ul></div><div class="sect2"><h3 id="creating-fhir-connections_fhir">8.1. Creating a connection to a FHIR server</h3><div class="paragraph"><p>In an integration, to operate on FHIR resources, create a connection to a FHIR server and then add that connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="paragraph"><p>A FHIR connection cannot be the start connection of a simple integration. However, you can start a simple integration with a timer that periodically triggers a FHIR connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You must know the URL for the FHIR server that you want to connect to.</p></li><li><p>You must have authorization credentials for accessing the FHIR server. You should obtain these from the FHIR server administrator. Rarely, a FHIR server does not require authentication and you can create a connection without specifying credentials. For example, a public FHIR server or a FHIR server in a private network might not require authentication.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display connectors.</p></li><li><p>Click the <strong>FHIR</strong> connector and configure the connection as follows:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>FHIR version</strong> field, accept <strong>DSTU3</strong>, which is required.</p></li><li><p>In the <strong>FHIR server URL</strong> field, enter the URL for the FHIR server that you want to access. While creating an integration, you might accept the default test server <code>http://fhirtest.uhn.ca/baseDstu3</code>.</p></li><li><p>In the <strong>FHIR server username</strong> field, enter your username. This is required by FHIR servers that use basic authentication.</p></li><li><p>In the <strong>FHIR server password</strong> field, enter your password, which is also required by FHIR servers that use basic authentication.</p></li><li><p>In the <strong>FHIR server bearer token</strong> field, enter your token. This is required by FHIR servers that use OAuth authentication.</p></li></ol></div></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether validation is successful. If validation fails, revise the input parameters and try again.</p></li><li><p>If validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, you might enter <code>FHIR West</code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection.</p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>FHIR West</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="adding-fhir-connection-read_fhir">8.2. Obtaining a resource from a FHIR server</h3><div class="paragraph"><p>In an integration, you can obtain one resource that is of the type that you specify. To do this, add a FHIR connection to the middle of a flow.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a connection to the FHIR server that has the resource that you want to obtain.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection.</p></li><li><p>Click the FHIR connection that can access the resource that you want to obtain.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Read</strong>.</p></li><li><p>Click in the <strong>Resource Type</strong> field to display a list of FHIR resource types. Select or enter the type of resource that you want to obtain.</p></li><li><p>In the <strong>Contained Resource Types</strong> field, if the resource type that you want contains other resource types, select them. Use the <strong>Ctrl</strong> key if you need to select more than one.</p><div class="paragraph"><p>Identifying contained resource types lets the data mapper display the fields that are in the contained resources. If you do not specify a contained resource type then you cannot map from any fields that are in the contained resource. There is no harm in selecting a resource that is not actually contained.</p></div></li><li><p>In the <strong>Resource Id</strong> field, enter the ID of the resource that you want. Or, leave this field blank if you plan to map it from an earlier step that is in the flow.</p></li><li><p>In the <strong>Resource version</strong> field, optionally specify a version ID for the resource. Leave this field blank to obtain the most recent version of the resource or to map the version ID of the resource that you want to obtain from a previous step.</p></li><li><p>Click <strong>Next</strong> to add this connection to the flow.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it. During execution, this connection returns one resource.</p></div><div class="paragraph"><div class="title">Next steps</div><p>To map a value to the <strong>Resource Id</strong> field or the <strong>Resource version</strong> field, add a data mapper step before this connection.</p></div></div><div class="sect2"><h3 id="adding-fhir-connection-search_fhir">8.3. Querying a FHIR server for resources</h3><div class="paragraph"><p>In an integration, you can query a FHIR server to obtain instances of a particular FHIR resource that satisfy a query that you specify. For example, suppose you want to ensure that all patients who are 65 and older received a pneumonia vaccination. Specify a query that obtains the resources for patients who were born before 1955. To do this, add a FHIR connection to the middle of a flow.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a connection to the FHIR server that has the resources that you want to obtain.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection.</p></li><li><p>Click the FHIR connection that has the resources that you want to obtain.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Search</strong>.</p></li><li><p>Click in the <strong>Resource Type</strong> field to display a list of FHIR resource types. Select or enter the type of resource that you want to obtain.</p></li><li><p>In the <strong>Query</strong> field, specify a FHIR query or leave this field blank to map the query from a previous step. For details about forming a FHIR query, see <a href="http://hl7.org/fhir/STU3/search.html">FHIR Release 3 Search</a>.</p></li><li><p>Click <strong>Next</strong> to add this connection to the flow.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it. During execution, this connection returns a list of resources that satisfy the query that you specified. Syndesis treats this list as a collection.</p></div><div class="paragraph"><div class="title">Next steps</div><p>If you did not specify a query, then add a data mapper step before this connection and map the query to this connection. To operate on individual returned resources, rather than on the returned list collection, after this connection, add a split step to the flow.</p></div></div><div class="sect2"><h3 id="adding-fhir-connection-create_fhir">8.4. Creating a resource on a FHIR server</h3><div class="paragraph"><p>In an integration, you can create and add a resource to a FHIR server. When you configure the connection&#8217;s <strong>Create</strong> action, you specify the type of the resource that you want to create. For example, you might want to add a new patient resource to a FHIR server. To create a resource, add a FHIR connection to the middle of a flow, or as a simple integration&#8217;s finish connection.</p></div><div class="paragraph"><p>To populate the values in the new resource, add a data mapper step to the flow just before the FHIR connection that you are adding in this procedure. It is expected that the previous steps in the flow provide the data that you want the new resource to contain. Map fields in the previous steps to fields in the target resource that this FHIR connection is creating. The new resource contains only the fields that you map to.</p></div><div class="paragraph"><p>When a connection performs the <strong>Create</strong> action to create a new resource on a FHIR server, the new resource has an automatically-generated FHIR resource ID. If you want to specify the resource ID for a new resource, instead of selecting the <strong>Create</strong> action choose the <a href="#adding-fhir-connection-update_fhir"><strong>Update</strong> action</a> for the connection to perform.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a connection to the FHIR server that you want to add a resource to.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to add a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the FHIR connection to the server that you want to add a resource to.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Create</strong>.</p></li><li><p>Click in the <strong>Resource Type</strong> field to display a list of FHIR resource types. Select or enter the type of resource that you want to create.</p></li><li><p>In the <strong>Contained Resource Types</strong> field, if the resource type that you want to create contains other resource types, select them. Use the <strong>Ctrl</strong> key if you need to select more than one.</p><div class="paragraph"><p>Identifying contained resource types lets the data mapper display the fields that are in the contained resources. If you do not specify a contained resource type then you cannot map to or from any fields that are in the contained resource. There is no harm in selecting a resource that is not actually contained.</p></div></li><li><p>Click <strong>Next</strong> to add this connection to the flow.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it. During execution, the connection creates a new resource on the FHIR server. The connection returns a <strong>MethodOutcome</strong> resource that includes an <code>id.idPart</code> field. This field contains the new resource’s resource ID, which you might want to map to a subsequent step in the flow.</p></div><div class="paragraph"><div class="title">Next steps</div><p>If this flow needs additional steps to obtain the data that you want the new resource to contain, add them before this FHIR connection. After those steps are in place, add a data mapper step to the flow just before the FHIR connection that creates a new resource. In the data mapper step, map to the fields in the resource to be created.</p></div><div class="admonitionblock caution"><table><tr><td class="icon"><div class="title">Caution</div></td><td class="content">Without a data mapper step just before a FHIR connection that creates a new resource, the connection tries to create an empty resource. Depending on the FHIR server configuration, this might or might not work.</td></tr></table></div></div><div class="sect2"><h3 id="adding-fhir-connection-update_fhir">8.5. Updating all fields in a resource on a FHIR server</h3><div class="paragraph"><p>In an integration, you can update a resource that is on a FHIR server. To provide the updated values, add a data mapper step to the flow just before a FHIR connection that updates a resource. It is expected that previous steps in the flow provide the data that you want the updated resource to contain. Map fields in the previous steps to fields in the target resource that this FHIR connection updates.</p></div><div class="admonitionblock caution"><table><tr><td class="icon"><div class="title">Caution</div></td><td class="content">The updated resource contains only the fields that you map to. In other words, in addition to mapping the fields whose values are changing, you must map the fields that you want to be in the resource and whose values are not changing. If you do not map a particular resource field then the connection deletes that field from the updated resource.</td></tr></table></div><div class="paragraph"><p>Be sure to map the resource ID from a previous step to the resource ID in this connection. This is the only resource field that the connection does not change. If the FHIR server does not already have a resource that has the resource ID for the resource to be updated, then the connection creates a new resource with that resource ID. This is the only way to add a new resource that has a resource ID that you choose.</p></div><div class="paragraph"><p>To update or create a resource, add a FHIR connection to the middle of a flow, or as a simple integration’s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a connection to the FHIR server on which you want to update or create a resource.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to add a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the FHIR connection that you want to use to update a resource on a FHIR server.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Update</strong>.</p></li><li><p>Click in the <strong>Resource Type</strong> field to display a list of FHIR resource types. Select or enter the type of resource that you want to update or create.</p></li><li><p>In the <strong>Contained Resource Types</strong> field, if the resource type that you want to update or create contains other resource types, select them. Use the <strong>Ctrl</strong> key if you need to select more than one.</p><div class="paragraph"><p>Identifying contained resource types lets the data mapper display the fields that are in the contained resources. If you do not specify a contained resource type then you cannot map to or from any fields that are in the contained resource. There is no harm in selecting a resource that is not actually contained.</p></div></li><li><p>Click <strong>Next</strong> to add this connection to the flow.</p></li><li><p>If this flow needs additional steps to obtain the data that you want the updated resource to contain, add them before this FHIR connection.</p></li><li><p>In the integration visualization, click the plus sign that is before the FHIR connection that updates a resource.</p></li><li><p>Click <strong>Data Mapper</strong>.</p></li><li><p>In the data mapper:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Map a resource ID to the target resource ID. This is the only way to specify the resource ID for a new resource.</p></li><li><p>Map to each resource field that you want the updated or new resource to contain. Be sure to map fields whose values are not changing, as well as fields whose values need to be updated.</p></li><li><p>Click <strong>Done</strong> to add the data mapper step to the flow.</p></li></ol></div></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it. During execution, the connection updates or creates a resource on the FHIR server and returns a <strong>MethodOutcome</strong> resource that includes an <code>id.idPart</code> field. This field contains the updated/created resource&#8217;s ID, which you might want to map to a subsequent step in the flow.</p></div></div><div class="sect2"><h3 id="adding-fhir-connection-patch_fhir">8.6. Updating specified fields in a resource on a FHIR server</h3><div class="paragraph"><p>In an integration, you can update individual fields in a resource that is on a FHIR server. To do this, add a FHIR connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a connection to the FHIR server that has the resource that you want to update.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the FHIR connection that you want to use to update the resource.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Patch</strong>.</p></li><li><p>Click in the <strong>Resource Type</strong> field to display a list of FHIR resource types. Select or enter the type of the resource whose fields you want to update.</p></li><li><p>In the <strong>Number of Operations</strong> field, specify the number of fields that you want to update.</p></li><li><p>Leave the <strong>Resource id</strong> field blank if you want to map the value from a previous step in the flow, which is typically what you want to do. Otherwise, specify the resource ID of the resource whose fields you want to update.</p></li><li><p>Specify a JSON patch that describes the updates. The JSON patch must have the format described in <a href="http://jsonpatch.com/">What is a JSON Patch?</a>.</p><div class="paragraph"><p><strong>Examples of patches for a <code>Patient</code> resource</strong>:</p></div><div class="paragraph"><p>Set the <code>active</code> field to <code>true</code>:</p></div><div class="listingblock"><div class="content"><pre>[{ "op":"replace", "path":"/active", "value": true }]</pre></div></div><div class="paragraph"><p>Replace the value of the <code>name</code> field, which is an array of the patient’s names. In this example, the patient has one name. If the patient had more than one name, a similarly formatted patch could replace all of the patient’s names:</p></div><div class="listingblock"><div class="content"><pre>[{ "op":"replace", "path":"/name", "value": [{"given": ["Bob"]}] }]</pre></div></div><div class="paragraph"><p>Replace the given name of a patient:</p></div><div class="listingblock"><div class="content"><pre>[{ "op":"replace", "path":"/name/0/given/0", "value": "John" }]</pre></div></div><div class="paragraph"><p>Add another name to a patient before the first name:</p></div><div class="listingblock"><div class="content"><pre>[{ "op":"add", "path":"/name/0", "value": {"given": ["Anthony"]} }]</pre></div></div><div class="paragraph"><p>For some updates, you must specify the JSON patch when you configure the <strong>Patch</strong> action. For example, if you want to copy the value of a resource field to another field. For other updates, you can leave the <strong>JSON Patch</strong> field blank and instead map values that define each update.</p></div></li><li><p>Click <strong>Next</strong> to add this connection to the flow.</p></li><li><p>If you did not specify a JSON patch and/or a resource ID, then add a data mapper step:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the flow visualization, click the plus sign that is before the FHIR connection that you just added.</p></li><li><p>Click <strong>Data Mapper</strong>.</p><div class="paragraph"><p>The <strong>Target</strong> panel displays a numbered folder for each field that you want to update. When you configured the <strong>Patch</strong> action, you specified how many fields to update. The data mapper displays this number of folders in the <strong>Target</strong> panel. For example, if you specified 3 as the number of fields to update, you would see three target folders with the labels <code>1</code>, <code>2</code>, and <code>3</code>.</p></div></li><li><p>For each field that you want to update, map to the fields in one target folder:</p><div class="olist lowerroman"><ol class="lowerroman" type="i"><li><p>In the <strong>Target</strong> panel, expand a folder to display three fields for <code>op</code>, <code>path</code>, and <code>value</code>.</p></li><li><p>Map a source field, constant, or property to the target <code>path</code> field. The path identifies the resource field that you want to update. In a path value, a number indicates the index of a list field, and a slash leads to a child field. For example, map this path <code>/name/1/given/1/value</code> to update the value of the given name field.</p></li><li><p>Accept the default update operation, which replaces the current value of the field, or map a source field, constant, or property to the <code>op</code> field to indicate how you want to update the field. For details about possible operations, see <a href="ttp://jsonpatch.com/#operations">JSON patch operations</a>.</p></li><li><p>If you are updating a field to have a new value, then map a source field, constant, or property to the target <code>value</code>. This is the new value that you want the field to contain.</p></li></ol></div></li><li><p>If you did not specify a resource ID when you configured the <strong>Patch</strong> action, then map the resource ID to the target <strong>id</strong> field.</p></li><li><p>Click <strong>Done</strong> to add the data mapper step to the flow.</p></li></ol></div></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it. During execution, the connection updates the specified resource field(s) and returns a <strong>MethodOutcome</strong> resource that includes an <code>id.idPart</code> field. This field contains the ID of the resource that was updated.</p></div></div><div class="sect2"><h3 id="adding-fhir-connection-transaction_fhir">8.7. Creating resources of different types on a FHIR server</h3><div class="paragraph"><p>In an integration, you can create two or more resources on a FHIR server and each resource can be of a different type. For example, you can add a new patient resource and a new provider resource in one connection to a FHIR server. To do this, add a FHIR connection to the middle of a flow, or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a connection to the FHIR server that you want to add resources to.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the FHIR connection that you want to use to create and add new resources to a FHIR server.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Transaction</strong>.</p></li><li><p>In the <strong>Included Resource Types</strong> field, select the resource types that this connection creates. Use the <strong>Ctrl</strong> key to select multiple resource types. The connection creates one resource of each type that you select.</p></li><li><p>Click <strong>Next</strong> to add this connection to the flow.</p></li><li><p>To populate fields in the new resources, add a data mapper step before this connection:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the flow visualization, click the plus sign that is before the connection that you just added.</p></li><li><p>Click <strong>Data Mapper</strong>.</p></li><li><p>In the data mapper, map source fields to the target resource fields. The new resources contain only the target fields that you map to.</p></li><li><p>Click <strong>Next</strong> to add the data mapper step to the flow.</p></li></ol></div></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it. During execution, the connection adds all resources to the FHIR server or, if there is an error, the connection does not add any resources to the FHIR server. A successful action returns a transaction resource, which contains the resource ID for each new resource. You can map these resource IDs to subsequent steps in the flow.</p></div></div><div class="sect2"><h3 id="adding-fhir-connection-delete_fhir">8.8. Deleting a resource from a FHIR server</h3><div class="paragraph"><p>In an integration, you can delete a resource from a FHIR server. To do this, add a FHIR connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a connection to the FHIR server that has the resource that you want to delete.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to select a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the FHIR connection that you want to use to delete the resource.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Delete</strong>.</p></li><li><p>Click in the <strong>Resource Type</strong> field to display a list of FHIR resource types. Select or enter the type of resource that you want to delete.</p></li><li><p>In the <strong>Resource Id</strong> field, specify the resource ID of the resource that you want to delete or leave this field blank if you plan to map the resource ID from an earlier step in the integration.</p></li><li><p>In the <strong>Resource version</strong> field, optionally specify a version ID for the resource. Leave this field blank to delete the most recent version of the resource or to map the version ID of the resource that you want to delete from a previous step.</p></li><li><p>Click <strong>Next</strong> to add this connection to the flow. .</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it. During execution, the connection deletes the specified resource on the FHIR server and returns a <strong>MethodOutcome</strong> resource that includes an <code>id.idPart</code> field. This field contains the resource ID for the deleted resource.</p></div><div class="paragraph"><div class="title">Next steps</div><p>To map a value to the <strong>Resource Id</strong> field or the <strong>Resource version</strong> field, add a data mapper step before this connection.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-ftp_connectors">9. Connecting to an FTP or SFTP server</h2><div class="sectionbody"><div class="paragraph"><p>In an integration, you can connect to an FTP or SFTP server to download or upload files. To do this, create an FTP or SFTP connection and then add it to an integration flow. The following topics provide details:</p></div><div class="ulist"><ul><li><p><a href="#creating-ftp-connections_ftp">Creating an FTP or SFTP connection</a></p></li><li><p><a href="#adding-ftp-start-connection_ftp">Obtaining files from an FTP or SFTP server</a></p></li><li><p><a href="#adding-ftp-finish-middle-connection_ftp">Uploading files to an FTP or SFTP server</a></p></li></ul></div><div class="sect2"><h3 id="creating-ftp-connections_ftp">9.1. Creating an FTP or SFTP connection</h3><div class="paragraph"><p>In an integration, to download or upload files from/to an FTP or SFTP server, create a connection to that FTP or SFTP server. You can add the same connection to any number of integrations.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You must know the host name of the server you want to connect to.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display Syndesis connectors.</p></li><li><p>To create a connection that uses File Transfer Protocol, click the <strong>FTP</strong> connector.</p><div class="paragraph"><p>Or, to create a connection that uses Secure File Transfer Protocol, click the <strong>SFTP</strong> connector.</p></div></li><li><p>Configure the connection.</p><div class="ulist"><ul><li><p>For an FTP connection:</p><div class="ulist"><ul><li><p><strong>Host</strong> is the only parameter that you must specify. Enter the host name of the server that you want to connect to. For example, if the name of your FTP host is <code>FTP.WEST</code>, then you would enter exactly that, <code>FTP.WEST</code>. Do not specify the protocol, for example, you should not specify something like this: <code><a href="ftp://FTP.WEST" class="bare">ftp://FTP.WEST</a></code>.</p></li><li><p><strong>Port</strong> is required and has a default value of <code>21</code>. This is the port that the FTP server is listening on.</p></li><li><p>All other parameters are either not required or have default values. The defaults are suitable for most integrations. Descriptions of these parameters are after this procedure.</p></li></ul></div></li><li><p>For an SFTP connection, there must be values for these parameters:</p><div class="ulist"><ul><li><p><strong>Host</strong> is the host name of the SFTP server that you want to connect to. For example, if the name of your SFTP host is <code>SFTP.EAST</code>, then you would enter exactly that, <code>SFTP.EAST</code>. Do not specify the protocol, for example, you should not specify something like this: <code>sftp://SFTP.EAST</code>.</p></li><li><p><strong>Port</strong> has a default of <code>22</code>. This is the port that the SFTP server is listening on.</p></li><li><p><strong>User name</strong> of the account that you want to use to access the SFTP server.</p></li><li><p><strong>Password</strong> that is associated with that user name.</p></li><li><p>All other parameters have default values. The defaults are suitable for most integrations. Descriptions of these parameters are after this procedure.</p></li></ul></div></li></ul></div></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether or not validation is successful. If validation fails, revise the configuration details as needed and try again.</p></li><li><p>When validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code><strong>XLight FTP Server</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection.</p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>XLight FTP Server</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div><div class="ulist"><div class="title">Descriptions of other parameters</div><ul><li><p><strong>Connect timeout</strong> defaults to <strong>10000</strong> milliseconds and indicates a maximum wait of 10 seconds to establish the connection. If 10 seconds elapse without a connection then Syndesis waits for the number of milliseconds defined by <strong>Reconnect delay</strong> and then tries to reconnect.</p></li><li><p><strong>Reconnect delay</strong> defaults to <strong>1000</strong> milliseconds and indicates the wait time before trying to reconnect again.</p></li><li><p><strong>Maximum reconnect attempts</strong> defaults to <strong>3</strong>. Syndesis tries as many as 3 times to establish a connection.</p></li><li><p><strong>Binary file transfer mode</strong> is used by default. Select <strong>No</strong> for ASCII transfer mode.</p></li><li><p><strong>Passive connection mode</strong> defaults to <strong>Yes</strong>, which is usually the preferred mode. In passive mode, the client opens communication channels with the server as a way to avoid firewall issues. If you select <strong>No</strong> then active mode is used.</p></li><li><p><strong>Disconnect from the server after use</strong> defaults to <strong>No</strong>. The connection remains established after it performs the action. Select <strong>Yes</strong> if you want to disconnect from the server after the connection performs the upload or download.</p></li><li><p><strong>Data timeout</strong> defaults to <strong>30000</strong> milliseconds and indicates the maximum length of time that Syndesis waits for a reply.</p></li></ul></div></div><div class="sect2"><h3 id="adding-ftp-start-connection_ftp">9.2. Obtaining files from an FTP or SFTP server</h3><div class="paragraph"><p>To trigger integration execution when an FTP or SFTP connection finds the file(s) you are interested in, add an FTP or SFTP connection as an integration&#8217;s start connection.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You created an FTP or SFTP connection.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the FTP or SFTP connection that you want to use to poll an FTP or SFTP server.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Download</strong>.</p></li><li><p>In the <strong>File name expression</strong> field, if you are interested in a single file, then enter an <a href="http://camel.apache.org/simple.html">Apache Camel Simple language</a> expression that resolves to a file name. You cannot specify a regular expression. The connection polls (periodically checks) the server for this file and downloads it when it is found. Leave this field blank if you want to download more than one file.</p></li><li><p>In the <strong>FTP directory</strong> field, enter the absolute or relative path of the server directory to poll. The connection watches this directory for any content and downloads all files when it finds any content.</p></li><li><p>In the <strong>Milliseconds before polling starts</strong> field, accept the default of <strong>1000</strong> milliseconds or change the number of milliseconds.</p></li><li><p>In the <strong>Milliseconds before the next poll</strong> field, accept the default of <strong>500</strong> milliseconds or change the number of milliseconds. This is the interval between polls.</p></li><li><p>In the <strong>Delete after download</strong> field, accept the default of <strong>No</strong> or select <strong>Yes</strong> to download the file(s) and then delete it(them) from the server.</p></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s output type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection output in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears at the beginning of the integration visualization.</p></div></div><div class="sect2"><h3 id="adding-ftp-finish-middle-connection_ftp">9.3. Uploading files to an FTP or SFTP server</h3><div class="paragraph"><p>In an integration, you can upload files to an FTP or SFTP server in the middle of a flow or to finish a simple integration. To do this, add an FTP or SFTP connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisite</div><ul><li><p>You created an FTP or SFTP connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the FTP or SFTP connection that you want to use to upload files.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Upload</strong>.</p></li><li><p>In the <strong>File name expression</strong> field, if you want to upload only one particular file, then enter an <a href="http://camel.apache.org/simple.html">Apache Camel Simple language</a> expression that resolves to a file name. This is the name of the file that the action uploads to the server. You cannot specify a regular expression. To upload more than one file, leave this field blank.</p></li><li><p>In the <strong>FTP directory</strong> field, enter the absolute or relative name of a server directory. If the <strong>File name expression</strong> field contains an expression, then the connection stores the specified file in this directory. If the <strong>File name expression</strong> field is blank, then the connection uploads to this directory all files that were received from the previous step.</p></li><li><p>In the <strong>If file exists</strong> field, indicate the behavior when you are uploading a file that has the same path and name as a file that is on the server. Accept the default, <strong>Override</strong>, to overwrite the file that is on the server with the file that you are uploading. Or, select one of the following:</p><div class="ulist"><ul><li><p><strong>Append</strong> adds the content in the file being uploaded to the file that is on the server.</p></li><li><p><strong>Fail</strong> throws <code>GenericFileOperationException</code>. The integration does not enter an error state.</p></li><li><p><strong>Ignore</strong> does not upload the file. The integration continues running under the assumption that everything is okay.</p></li><li><p><strong>Move</strong> renames one of the files.</p></li><li><p><strong>TryRename</strong> uploads the file with a temporary name and renames the file to the desired name. This operation does not check for the existence of a file with the desired name, which makes the operation faster on most servers than when existence checks are done.</p></li></ul></div></li><li><p>In the <strong>Temporary file prefix while copying</strong> field, specify a string. The connection prepends this string to the name of a file while it is being uploaded. This enables the connection to write to a temporary file on the server and then rename that temporary file to have the correct name. This is useful for reducing locks when uploading very large files.</p></li><li><p>In the <strong>Temporary file name while copying</strong> field, specify a string. The connection renames a file being uploaded to have this name while it is being uploaded. This enables the connection to write to a temporary file on the server and then rename that temporary file to have the correct name. This is useful for reducing locks when uploading very large files.</p></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s input type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection input in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-google_connectors">10. Connecting to Google applications</h2><div class="sectionbody"><div class="paragraph"><p>An integration can connect to these Google applications: Gmail, Calendar, Sheets. See the following topics for details:</p></div><div class="ulist"><ul><li><p><a href="#register-with-google_google">Registering Syndesis as a Google client application</a></p></li><li><p><a href="#connecting-to-gmail_google">Connecting to Gmail</a></p></li><li><p><a href="#connecting-to-google-calendar_google">Connecting to Google Calendar</a></p></li><li><p><a href="#connecting-to-google-sheets_google">Connecting to Google Sheets</a></p></li></ul></div><div class="sect2"><h3 id="register-with-google_google">10.1. Registering Syndesis as a Google client application</h3><div class="paragraph"><p>In an integration, to be able to connect to Gmail, Google Calendar, or Google Sheets, you must register your Syndesis environment as a Google client application. During registration, you enable Google APIs and create credentials that Syndesis uses to access the Google APIs that you have enabled.</p></div><div class="paragraph"><p>With registration in place, you can create multiple connections to Gmail, Google Calendar, and Google Sheets. You can use each connection in multiple integrations. While each connection to a Google application can use the same Google client ID and Google client secret, which you obtain during registration, each connection can access a different Google account, which you choose.</p></div><div class="paragraph"><p>This procedure instructs you to enable the Gmail API, the Google Calendar API, and the Google Sheets API. However, you can enable only the API(s) that you need rather than all three APIs. At a later time, if you need to create connections to the applications whose APIs you did not enable, you can return here and follow the instructions to enable their APIs.</p></div><div class="admonitionblock important"><table><tr><td class="icon"><div class="title">Important</div></td><td class="content"><div class="paragraph"><p>You must create a new Google client application for Syndesis. The credentials that Google provides for a new client application contain a refresh token that is used for refreshing expired access tokens. This refresh token is available only the first time that the Syndesis client application uses the credentials. In Syndesis, connections to Gmail, Google Calendar, and Google Sheets can all use the same Google client ID and Google client secret. If they do, the refresh token is available to all connections to Google applications. When you view connection details in the Syndesis user interface, do not click the <strong>Validate</strong> button. Validation is a second use of the credentials and the refresh token is no longer part of the client credentials. You can, however, re-connect to Google applications.</p></div><div class="paragraph"><p>In development environments, be careful if you choose to use the Google client ID and Google client secret that you are using for some other, non-Syndesis, OAuth client. Syndesis requires offline access that is requested on the first OAuth exchange. If another OAuth client already entered the OAuth exchange and did not request offline access, then Syndesis cannot obtain offline access on subsequent OAuth exchanges. If you are unsure whether offline access was requested on the first exchange, create a new Google client application for Syndesis.</p></div></td></tr></table></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You must be able to sign in to the Google account that you want to use to register Syndesis as a Google client application.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the left navigation panel, click <strong>Settings</strong>.</p></li><li><p>On the <strong>Settings</strong> page, near the top, to the right of the callback URL, click <span class="image"><img src="images/tutorials/CopyCallback.png" alt="Copy Callback URL"></span>to copy the callback URL for your Syndesis environment to the clipboard. You will need this URL later in this procedure.</p></li></ol></div></li><li><p>In another browser tab, go to <code><a href="https://console.developers.google.com" class="bare">https://console.developers.google.com</a></code> and do the following:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Check that you are signed into the Google account that you want to use to register Syndesis as a Google client application. Or, choose a different Google account and sign in to that account.</p><div class="paragraph"><p>The name of the current Google project appears at the top of the Google APIs page.</p></div></li><li><p>To use the current project to grant authorization to Syndesis, continue to the next step. To grant authorization to Syndesis in another Google project, choose or create that project. If this Google account does not already have a project, you must create one.</p></li><li><p>Enable Google APIs:</p><div class="olist lowerroman"><ol class="lowerroman" type="i"><li><p>In the upper left corner, click <span class="image"><img src="images/connecting/Hamburger.png" alt="Navigation menu icon"></span>and select <strong>APIs and Services</strong> &gt; <strong>Library</strong>.</p></li><li><p>If necessary, scroll down to see the <strong>G Suite</strong> row of cards.</p></li><li><p>Click the <strong>Google Calendar API</strong> card, which displays a page that indicates that the Google Calendar API is enabled.</p></li><li><p>Scroll down and click the <strong>Gmail API</strong> card, which displays a page that indicates that the Gmail API is enabled.</p></li><li><p>In the upper left corner, click <span class="image"><img src="images/connecting/Hamburger.png" alt="Navigation menu icon"></span>and select <strong>APIs and Services</strong> &gt; <strong>Library</strong>.</p></li><li><p>If necessary, scroll down to see the <strong>G Suite</strong> row of cards.</p></li><li><p>Click the <strong>Google Sheets API</strong> card, which displays a page that indicates that the Google Sheets API is enabled.</p></li></ol></div></li><li><p>Give your client application a name:</p><div class="olist lowerroman"><ol class="lowerroman" type="i"><li><p>Click <strong>MANAGE</strong>.</p></li><li><p>In the page that appears, in the left navigation panel, click <strong>Credentials</strong> and then on the right, click <strong>Credentials in APIs &amp; Services</strong>.</p></li><li><p>Click the <strong>OAuth consent screen</strong> tab.</p></li><li><p>In the page that appears, in the <strong>Application Name</strong> field, enter a name for the Syndesis client application. For example, enter <code><strong>Syndesis client application</strong></code>.</p></li><li><p>Skip the other fields.</p></li><li><p>Click <strong>Save</strong>.</p></li></ol></div></li><li><p>Obtain client application credentials as follows:</p><div class="olist lowerroman"><ol class="lowerroman" type="i"><li><p>To the right of <strong>Create Credentials</strong>, click the down arrow to display a menu and select <strong>OAuth client ID</strong>.</p></li><li><p>In the page that appears, select <strong>Web application</strong> to display more content.</p></li><li><p>In the <strong>Name</strong> field, enter a name for the OAuth client ID for your Syndesis environment. This is different from the name that you entered for the client application itself. For example, enter <code>OAuth client ID for Syndesis</code>.</p></li><li><p>Skip <strong>Authorized JavaScript origins</strong>.</p></li><li><p>In the <strong>Authorized redirect URIs</strong> field, paste the callback URL that you copied from your Syndesis environment at the beginning of this procedure.</p></li><li><p>Click <strong>Create</strong> to display the client ID and client secret for your Syndesis environment.</p></li></ol></div></li><li><p>To the right of the client ID field, click <span class="image"><img src="images/connecting/copy_icon.png" alt="the Copy icon"></span>to copy the client ID to your clipboard.</p></li></ol></div></li><li><p>Return to the Syndesis <strong>Settings</strong> page and do the following:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Expand the entries for Gmail, Google Calendar, and Google Sheets.</p></li><li><p>In the <strong>Client ID</strong> field for each Google application, paste the Google client ID that you just copied.</p></li></ol></div></li><li><p>Return to the Google developers site and to the right of the client secret field, click <span class="image"><img src="images/connecting/copy_icon.png" alt="the Copy icon"></span>to copy the client secret to your clipboard.</p></li><li><p>Return to the Syndesis <strong>Settings</strong> page and do the following in the entry for each Google application:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Client Secret</strong> field, paste the Google client secret that you just copied.</p></li><li><p>Click <strong>Save</strong>. You should get a <strong>Registration Successful!</strong> notification.</p></li><li><p>Collapse the entry.</p></li></ol></div></li></ol></div><div class="paragraph"><div class="title">Results</div><p>For each Google application API that you enabled, you can create a connection to that application.</p></div><div class="paragraph"><p>All connections from Syndesis to Google applications use the same Google client ID and Google client secret.</p></div><div class="admonitionblock important"><table><tr><td class="icon"><div class="title">Important</div></td><td class="content"><div class="paragraph"><p>The Google client ID and Google client secret contain token refresh information to ensure that integrations that have connections to Google applications continuously work correctly. Consequently, you should <strong>not</strong> obtain new credentials. If you do, then you would need to recreate each Google connection, replace the old connections with new connections, and re-publish each integration that uses a Google connection.</p></div></td></tr></table></div></div><div class="sect2"><h3 id="connecting-to-gmail_google">10.2. Connecting to Gmail</h3><div class="paragraph"><p>To trigger execution of an integration when a particular Gmail account receives an email, add a Gmail connection to a simple integration as its start connection. In an integration, to send an email from a particular Gmail account, do either of the following:</p></div><div class="ulist"><ul><li><p>Add a Gmail connection to the middle of a flow.</p></li><li><p>Add a Gmail connection to finish a simple integration.</p></li></ul></div><div class="paragraph"><p>The general steps for connecting to Gmail in an integration are:</p></div><div class="olist arabic"><ol class="arabic"><li><p><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#register-with-google_google">Registering Syndesis as a Google client application</a>.</p></li><li><p>Creating a Gmail connection. When you do this you choose the Gmail account that the connection is authorized to access.</p></li><li><p>If your integration sends an email from a Gmail account, decide how to populate an email to send.</p></li><li><p>Adding a Gmail connection to an integration flow.</p></li><li><p>For a Gmail connection that sends an email, optionally mapping integration data to the email fields.</p></li></ol></div><div class="paragraph"><p>Information and instructions are in the following topics:</p></div><div class="ulist"><ul><li><p><a href="#create-gmail-connection_gmail">Creating a Gmail connection</a></p></li><li><p><a href="#alternatives-for-populating-email-to-send_gmail">Alternatives for populating email to send</a></p></li><li><p><a href="#add-gmail-connection-start_gmail">Triggering an integration when polling returns a Gmail message</a></p></li><li><p><a href="#add-gmail-connection-finish-middle_gmail">Sending an email from a Gmail account</a></p></li></ul></div><div class="sect3"><h4 id="create-gmail-connection_gmail">10.2.1. Creating a Gmail connection</h4><div class="paragraph"><p>When you create a Gmail connection, you authorize the connection to access one particular Gmail account. After you create a Gmail connection, you can add it to multiple integrations.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#register-with-google_google">registered Syndesis as a Google client application</a> and enabled the Gmail API.</p></li><li><p>The Syndesis <strong>Settings</strong> page entry for Gmail has values for the client ID and client secret, which you obtained by registering Syndesis as a Google client application.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display the available connectors. A connector is a template that you use to create one or more connections.</p></li><li><p>Click the <strong>Gmail</strong> connector.</p></li><li><p>In the <strong>Configure Connection</strong> page, click <strong>Connect Gmail</strong>, which takes you to a <strong>Sign in with Gmail</strong> page.</p><div class="paragraph"><p>If <strong>Connect Gmail</strong> does not display, your Syndesis environment is not registered as a Google client application. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#register-with-google_google">Registering Syndesis as a Google client application</a>. When you try to create a Gmail connection and your Syndesis environment is not registered as a Google client application, then Syndesis displays multiple fields that prompt for authorization information. While you can create a Gmail connection by entering values in these fields, it is not recommended.</p></div></li><li><p>In the page that is prompting you to sign in to Gmail, enter the email address of the Google account that you want this connection to access from Syndesis and click <strong>Next</strong>.</p></li><li><p>In response to <strong>openshiftapps.com wants to access your Google Account</strong>, click <strong>Allow</strong> to return to Syndesis.</p></li><li><p>In the Syndesis <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code><strong>Gmail Connect 1</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample Gmail connection that uses jkim Gmail account credentials.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>Gmail Connect 1</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect3"><h4 id="alternatives-for-populating-email-to-send_gmail">10.2.2. Alternatives for populating email to send</h4><div class="paragraph"><p>A Gmail connection that finishes a simple integration or that is in the middle of a flow sends an email from the Gmail account that the connection is authorized to access. There are several ways to populate the content of the email that the connection sends. Before you add a Gmail connection that sends an email, consider how you want to populate that email.</p></div><div class="paragraph"><p>The alternatives for populating an email to send are as follows:</p></div><div class="ulist"><ul><li><p>Add a data mapper step just before the Gmail connection that sends an email. In this data mapper step, map data fields that are output from previous steps to Gmail connection <strong>Send Email</strong> action fields. The <strong>Send Email</strong> action fields are:</p><div class="ulist"><ul><li><p><strong>Email to</strong></p></li><li><p><strong>Email subject</strong></p></li><li><p><strong>Email text</strong></p></li><li><p><strong>Email cc</strong></p></li><li><p><strong>Email bcc</strong></p></li></ul></div><div class="paragraph"><p>If you add a data mapper step then you can map one, some, or all <strong>Send Email</strong> action fields.</p></div></li><li><p>When you add a Gmail connection to a flow, configure the action by specifying values in the <strong>Send Email</strong> action fields. You can specify values in one, some, or all fields.</p></li><li><p>Use both a data mapper step and <strong>Send Email</strong> action configuration to populate the fields. In other words, you can configure the <strong>Send Email</strong> action by specifying one or more fields and also add a data mapper step that populates other fields.</p><div class="paragraph"><p>A value that you specify directly in a <strong>Send Email</strong> action field has precedence over a value that is mapped to the <strong>Send Email</strong> action field. In other words, suppose you populate a <strong>Send Email</strong> field by specifying a value when you add the connection and configure the action and also by mapping a value to the same field. The value that you specify in the action configuration always overrides the value that was mapped. For example, suppose you specify <code>people@redhat.com</code> in the <strong>Email to</strong> action field and you also map an email field from a previous step to the Gmail <strong>Email to</strong> field. The integration always uses <code>people@redhat.com</code> as the email address.</p></div></li></ul></div><div class="paragraph"><p>When you add a Gmail connection that sends an email, all action configuration parameters are optional. This is because you might choose to populate an email entirely by mapping integration data to the <strong>Send Email</strong> action fields. However, the presence of an email address in the <strong>Email to</strong> field, either by action configuration specification or by mapping, is required. Without an email address to send the message to, Syndesis generates a runtime error and the integration stops executing.</p></div></div><div class="sect3"><h4 id="add-gmail-connection-start_gmail">10.2.3. Triggering an integration when polling returns a Gmail message</h4><div class="paragraph"><p>To trigger execution of an integration based on email received by a particular Gmail account, add a Gmail connection as the start connection of a simple integration. When the integration is running, the Gmail connection checks this account for emails at intervals that you control. When the connection finds an unread email, it passes the email to the next step in the integration and, by default, marks the email as <strong>read</strong>.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Gmail connection that is authorized to access the Gmail account that you want to obtain emails from.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the Gmail connection that you want to use to start the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select the <strong>Receive Email</strong> action.</p></li><li><p>To configure the <strong>Receive Email</strong> action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Delay</strong> field, accept the default of 30 seconds or specify how often you want the integration to check for new email.</p></li><li><p>Leave the <strong>Labels</strong> field blank to obtain any unread email. To obtain only certain emails, specify a comma-separated list of labels that are used in the Gmail account that the connection is accessing. By default, the integration obtains the unread emails that have those labels.</p></li><li><p>Select <strong>Mark as read</strong> to ensure that the connection does not return the same email twice. If <strong>Mark as read</strong> is not selected, the connection returns emails that are in the account&#8217;s in box, whether or not they were previously read. Or, if you specify one or more labels, then the integration return emails that have those labels whether or not they were already read.</p></li><li><p>In the <strong>Max Results</strong> field, accept the default of <strong>5</strong> or indicate the maximum number of emails that the connection can return for each poll. If the connection finds more than this number of unread emails, then it returns the most recent <strong>Max Results</strong> emails.</p><div class="paragraph"><p>When a Gmail connection returns more than one email, the integration processes the emails as a batch. In other words, Syndesis executes the integration once for the batch.</p></div></li><li><p>Click <strong>Next</strong> to add this Gmail connection as the start connection in the integration. The connection appears as the first step in the integration flow.</p></li></ol></div></li></ol></div></div><div class="sect3"><h4 id="add-gmail-connection-finish-middle_gmail">10.2.4. Sending an email from a Gmail account</h4><div class="paragraph"><p>In an integration, you can send an email from a Gmail account either in the middle of a flow or to finish a simple integration. To do this, add a Gmail connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Gmail connection.</p></li><li><p>You are familiar with the <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#alternative-for-populating-email-to-send_gmail">alternatives for populating an email to send</a> and you have a plan for populating such emails.</p></li><li><p>Syndesis is prompting you to add to the integration or to choose the finish connection for a simple integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the Gmail connection that you want to use to send an email.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Send Email</strong>.</p></li><li><p>On the <strong>Configure Send Email</strong> page, do one of the following:</p><div class="ulist"><ul><li><p>Leave all fields blank if you plan to add a data mapper step just before this connection and you plan to map integration data to the <strong>Send Email</strong> fields.</p></li><li><p>Enter information in one or more of the following <strong>Send Email</strong> fields. Separate multiple email addresses with a comma.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p><strong>Email To</strong></p></li><li><p><strong>Email Subject</strong></p></li><li><p><strong>Email Text</strong></p></li><li><p><strong>Email cc</strong></p></li><li><p><strong>Email bcc</strong></p></li></ol></div></li><li><p>Leave some fields blank and enter information in some fields.</p><div class="paragraph"><p>If you plan to add a data mapper step just before this Gmail connection, and you want to map integration data to some email fields, leave those fields blank in the action configuration. Enter values in other action fields as needed.</p></div><div class="paragraph"><p>A value that you specify in a <strong>Send Email</strong> action configuration field has precedence over a value that is mapped from a previous step.</p></div></li></ul></div></li><li><p>Click <strong>Next</strong> to add the connection to the flow.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration flow where you added it.</p></div><div class="paragraph"><div class="title">Next step</div><p>If you plan to add a data mapper step before this connection, first add any other connections that you plan to add to this flow. Then add the data mapper step.</p></div></div></div><div class="sect2"><h3 id="connecting-to-google-calendar_google">10.3. Connecting to Google Calendar</h3><div class="paragraph"><p>To trigger integration execution when a poll returns an update to a Google calendar, add a Google Calendar connection to a simple integration as its start connection. To add an event to a calendar or update an event in a calendar, you can do either of the following:</p></div><div class="ulist"><ul><li><p>Add a Google Calendar connection to the middle of a flow.</p></li><li><p>Add a Google Calendar connection to finish a simple integration.</p></li></ul></div><div class="paragraph"><p>Details for connecting to Google Calendar are in the following topics:</p></div><div class="ulist"><ul><li><p><a href="#create-google-calendar-connection_calendar">Creating a Google Calendar connection</a></p></li><li><p><a href="#add-google-calendar-connection-start_calendar">Triggering an integration when polling returns an event from a Google Calendar</a></p></li><li><p><a href="#add-google-calendar-connection-to-get-one-event_calendar">Obtaining a particular event from a Google Calendar</a></p></li><li><p><a href="#add-google-calendar-connection-update-event_calendar">Updating an event in a Google Calendar</a></p></li><li><p><a href="#add-google-calendar-connection-add-event_calendar">Adding an event to a Google Calendar</a></p></li></ul></div><div class="sect3"><h4 id="create-google-calendar-connection_calendar">10.3.1. Creating a Google Calendar connection</h4><div class="paragraph"><p>When you create a Google Calendar connection, you authorize the connection to access the Google Calendars that are associated with one particular Google account. After you create a Google Calendar connection, you can add it to multiple integrations.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#register-with-google_google">registered Syndesis as a Google client application</a> and enabled the Google Calendar API.</p></li><li><p>The Syndesis <strong>Settings</strong> page entry for Google Calendar has values for the client ID and client secret, which you obtained by registering Syndesis as a Google client application.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display the available connectors. A connector is a template that you use to create one or more connections.</p></li><li><p>Click the <strong>Google Calendar</strong> connector.</p></li><li><p>In the <strong>Configure Connection</strong> page, click <strong>Connect Google Calendar</strong>, which takes you to a Google sign-in page.</p><div class="paragraph"><p>If <strong>Connect Google Calendar</strong> does not display, then your Syndesis environment is not registered as a Google client application with the Google Calendar API enabled. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#register-with-google_google">Registering Syndesis as a Google client application</a>. When your environment is not registered with Google, then when you try to create a Google Calendar connection, Syndesis displays multiple fields that prompt for authorization information. While you can create a Google Calendar connection by entering values in these fields, it is not recommended.</p></div></li><li><p>In the Google sign-in page, select the Google account that you want this connection to access from Syndesis and click <strong>Next</strong>.</p></li><li><p>In response to the <strong>openshiftapps.com wants to access your Google Account</strong> prompt, click <strong>Allow</strong> to return to Syndesis.</p></li><li><p>In the Syndesis <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from other connections. For example, enter <code><strong>Google Calendar Work Connection</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample Google Calendar connection that uses my Google work account.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>Google Calendar Work Connection</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect3"><h4 id="add-google-calendar-connection-start_calendar">10.3.2. Triggering an integration when polling returns an event from a Google Calendar</h4><div class="paragraph"><p>To trigger execution of an integration upon obtaining events from a Google Calendar that you specify, add a Google Calendar connection to a simple integration as its start connection. When the integration is running, the Google Calendar connection checks the Google Calendar for events at intervals that you control. When the connection finds events that comply with the way that you configured the Google Calendar <strong>Get Events</strong> action, the connection passes the events to the next step in the integration.</p></div><div class="paragraph"><p>When a Google Calendar connection returns more than one event, Syndesis executes the integration for each returned event. For example, if the poll returns 5 events then Syndesis executes the integration five times.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Google Calendar connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the Google Calendar connection that you want to use to start the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select the <strong>Get Events</strong> action.</p></li><li><p>To configure the <strong>Get Events</strong> action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Delay</strong> field, accept the default of 30 seconds or specify how often you want the integration to check the calendar.</p></li><li><p>In the <strong>Calendar name</strong> field, enter the name of a calendar that is accessible from the Google account that this Google Calendar connection is authorized to access.</p></li><li><p>In the <strong>Max Results</strong> field, accept the default of <strong>5</strong> or indicate the maximum number of events that the connection can return for each poll.</p></li><li><p>Select one of the following to indicate the date that you want the connection to use to start checking for events. The connection checks that date and subsequent dates.</p><div class="ulist"><ul><li><p><strong>Consume from the current date ahead</strong> starts on the current date.</p><div class="paragraph"><p>For example, if you select this option, and if <strong>Max Results</strong> is 5, then the Google Calendar connection starts checking for events on the current date and returns no more than the first five events that it finds. It does not matter whether or not these events have been updated or added since the last poll.</p></div></li><li><p><strong>Consume from the last event update date on the next poll</strong> starts on the date of the most recently updated event that was returned in a previous poll.</p><div class="paragraph"><p>For example, if you select this option, and if <strong>Max Results</strong> is 5, then the Google Calendar connection returns no more that 5 updated or new events. The connection starts checking for new or updated events on the date of the most recently updated event that was returned in a previous poll.</p></div></li></ul></div></li><li><p>Optionally, in the <strong>Query for events</strong> field, specify text to filter the events that the poll can return. The connection returns only events that contain the specified text in at least one event field.</p><div class="paragraph"><p>For example, suppose that you specify <code>Standup meeting</code> in the query field. A poll would return only those events that have <code>Standup meeting</code> in an event field.</p></div></li></ol></div></li><li><p>Click <strong>Next</strong> to add this Google Calendar connection as the integration&#8217;s start connection.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears as the first step in the simple integration.</p></div></div><div class="sect3"><h4 id="add-google-calendar-connection-to-get-one-event_calendar">10.3.3. Obtaining a particular event from a Google Calendar</h4><div class="paragraph"><p>In an integration, you can obtain a particular Google Calendar event in the middle of a flow. Obtaining a particular event is useful, for example, when you want to:</p></div><div class="ulist"><ul><li><p>Update the event in a subsequent Google Calendar connection.</p></li><li><p>Announce the event by using a subsequent Twitter connection.</p></li></ul></div><div class="paragraph"><p>To obtain one event, add a Google Calendar connection to the middle of a flow.</p></div><div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content"><div class="paragraph"><p>In this release, while obtaining a specific event in a simple integration&#8217;s finish connection is supported, it is not particularly useful. This is expected to change in a future release.</p></div></td></tr></table></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Google Calendar connection that is authorized to access the Google Calendar that has the event that that you want to get.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection.</p></li><li><p>Click a Google Calendar connection that is authorized to access the calendar that you want to connect to.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Get a Specific Event</strong>.</p></li><li><p>Specify the name of the calendar that has the event that you want.</p></li><li><p>Specify the ID of the event to get. To obtain the event ID, do one of the following:</p><div class="ulist"><ul><li><p>Map it from a previous Google Calendar connection.</p></li><li><p>Manually obtain it from the calendar as follows:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In a browser, display the calendar that contains the event you want to get.</p></li><li><p>Append <code>?gsessionid=OK&amp;eventdeb=1</code> to the URL and redisplay the calendar.</p></li><li><p>In the calendar, click the event that you want to get.</p></li><li><p>In the event popup, click <span class="image"><img src="images/tutorials/ThreeVerticalDotsKebab.png" alt="Options"></span>and select <strong>Troubleshooting info</strong>.</p></li><li><p>In the popup that Google Calendar displays, copy the string that follows <strong><code>eid=</code></strong>. For example, an event ID looks something like this: <code>p1pva2a4t504gbsha12di9ch6k_20181107T150000Z*</code>.</p></li></ol></div></li></ul></div></li><li><p>Click <strong>Next</strong> to add the connection to the flow.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the flow where you added it.</p></div><div class="paragraph"><div class="title">Next step</div><p>If you want to map any values from a previous step to the fields in this connection, add a data mapper step. First, add all needed connections to the flow. Then add a data mapper step immediately before this connection.</p></div></div><div class="sect3"><h4 id="add-google-calendar-connection-add-event_calendar">10.3.4. Adding an event to a Google Calendar</h4><div class="paragraph"><p>In an integration, you can add an event to a Google Calendar in the middle of a flow or to finish a simple integration. To do this, add a Google Calendar connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Google Calendar connection that is authorized to access the Google Calendar to which you want to add an event.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click a Google Calendar connection that is authorized to access the calendar that you want to add an event to.</p></li><li><p>On the <strong>Choose an action</strong> page, select the <strong>Create Event</strong> action.</p></li><li><p>Configure the <strong>Create Event</strong> action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Enter a title for the new event.</p></li><li><p>Enter the name of the Google Calendar to add the event to.</p></li><li><p>For the other input parameters, you can enter data or you might want to map values from an event that you obtained in a previous Google Calendar connection.</p></li></ol></div></li><li><p>Click <strong>Next</strong> to add the connection to the flow.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration flow where you added it.</p></div><div class="paragraph"><div class="title">Next step</div><p>If you want to map any values to the fields in this Google Calendar connection, add a data mapper step to the flow. First, add all needed connections to the flow. Then add a data mapper step immediately before this Google Calendar connection.</p></div></div><div class="sect3"><h4 id="add-google-calendar-connection-update-event_calendar">10.3.5. Updating an event in a Google Calendar</h4><div class="paragraph"><p>In an integration, you can update an event in a Google Calendar in the middle of a flow or to finish a simple integration. To do this, add a Google Calendar connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="admonitionblock important"><table><tr><td class="icon"><div class="title">Important</div></td><td class="content"><div class="paragraph"><p>In this release, the <strong>Update Event</strong> action requires a value in each event field. In most if not all cases, this means that you must add a Google Calendar connection that <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#add-google-calendar-connection-to-get-one-event_calendar">obtains the event that you want to update</a>, then add the Google Calendar connection that updates the event, and then insert a data mapper step between the two Google Calendar connections.</p></div></td></tr></table></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Google Calendar connection that is authorized to access the Google Calendar that has the event that you want to update.</p></li><li><p>In the flow, there is an earlier connection to Google Calendar and that connection obtains the event that you want to update.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click a Google Calendar connection that is authorized to access the calendar that has the event that you want to update.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Update Event</strong>.</p></li><li><p>To configure the <strong>Update Event</strong> action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Enter the title of the event that you want to update.</p></li><li><p>Enter content in each event field that you want to update. Do not enter content in an event field when you want the content in that field to remain unchanged.</p></li></ol></div></li><li><p>Click <strong>Next</strong> to add the connection to the flow. The connection appears in the integration visualization where you added it.</p></li><li><p>In the integration visualization, click the plus sign that is just before the connection that you just added.</p></li><li><p>Click <strong>Data Mapper</strong>.</p></li><li><p>In the data mapper, for each event field that remains the same in the updated event, map that field from the Google Calendar connection that obtained the event to the corresponding field in the Google Calendar connection that updates the event.</p><div class="paragraph"><p>Do not map fields that you are updating. If you map a field and also specify an update for that field when you configure the <strong>Update Event</strong> action, Syndesis uses the mapped value.</p></div></li><li><p>In the upper right, click <strong>Done</strong> to add the data mapper step.</p></li></ol></div></div></div><div class="sect2"><h3 id="connecting-to-google-sheets_google">10.4. Connecting to Google Sheets</h3><div class="paragraph"><p>To trigger execution of an integration when a Google Sheets connection returns spreadsheet data or spreadsheet properties, add a Google Sheets connection to a simple integration as its start connection. To finish a simple integration by updating spreadsheet values or properties, or by inserting a chart or pivot table into a spreadsheet, add a Google Sheets connection to a simple integration as its finish connection.</p></div><div class="paragraph"><p>In the middle of a flow, you can add a Google Sheets connection that obtains, creates or updates values in a spreadsheet, or that inserts a chart or pivot table into a spreadsheet.</p></div><div class="paragraph"><p>Details for connecting to Google Sheets are in the following topics:</p></div><div class="ulist"><ul><li><p><a href="#create-google-sheets-connection_sheets">Creating a Google Sheets connection</a></p></li><li><p><a href="#add-google-sheets-connection-get-sheet-values_sheets">Obtaining spreadsheet data to trigger an integration or in the middle of a flow</a></p></li><li><p><a href="#add-google-sheets-connection-get-properties_sheets">Triggering an integration when polling returns spreadsheet properties</a></p></li><li><p><a href="#add-google-sheets-connection-create-spreadsheet_sheets">Creating a spreadsheet</a></p></li><li><p><a href="#add-google-sheets-connection-update-sheet-values_sheets">Updating data in a sheet</a></p></li><li><p><a href="#add-google-sheets-connection-append-sheet-values_sheets">Appending data to a sheet</a></p></li><li><p><a href="#add-google-sheets-connection-update-properties_sheets">Updating spreadsheet properties</a></p></li><li><p><a href="#add-google-sheets-connection-add-chart_sheets">Adding a chart to a sheet</a></p></li><li><p><a href="#add-google-sheets-connection-add-pivot-table_sheets">Adding a pivot table to a sheet</a></p></li></ul></div><div class="sect3"><h4 id="create-google-sheets-connection_sheets">10.4.1. Creating a Google Sheets connection</h4><div class="paragraph"><p>When you create a Google Sheets connection, you authorize the connection to access the Google Sheets spreadsheets that are associated with one particular Google account, which you choose. After you create a Google Sheets connection, you can add it to multiple integrations.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#register-with-google_google">registered Syndesis as a Google client application</a> and enabled the Google Sheets API.</p></li><li><p>The Syndesis <strong>Settings</strong> page entry for Google Sheets has values for the client ID and client secret, which you obtained by registering Syndesis as a Google client application.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display the available connectors. A connector is a template that you use to create one or more connections.</p></li><li><p>Click the <strong>Google Sheets</strong> connector.</p></li><li><p>In the <strong>Configure Connection</strong> page, click <strong>Connect Google Sheets</strong>, which takes you to a Google sign-in page.</p><div class="paragraph"><p>If <strong>Connect Google Sheets</strong> does not display, then your Syndesis environment is not registered as a Google client application with the Google Sheets API enabled. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#register-with-google_google">Registering Syndesis as a Google client application</a>. When your environment is not registered with Google, then when you try to create a Google Sheets connection, Syndesis displays multiple fields that prompt for authorization information. While you can create a Google Sheets connection by entering values in these fields, it is not recommended.</p></div></li><li><p>In the Google sign-in page, select the Google account that you want this connection to access from Syndesis and click <strong>Next</strong>.</p></li><li><p>In response to the <strong>openshiftapps.com wants to access your Google Account</strong> prompt, click <strong>Allow</strong> to return to Syndesis.</p></li><li><p>In the Syndesis <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from other connections. For example, enter <code><strong>Google Sheets Work Connection</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample Google Sheets connection that uses my Google work account.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection that you created is now available. If you entered the example name, you would see that <strong>Google Sheets Work Connection</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect3"><h4 id="add-google-sheets-connection-get-sheet-values_sheets">10.4.2. Obtaining spreadsheet data to trigger an integration or in the middle of a flow</h4><div class="paragraph"><p>To trigger execution of an integration upon obtaining data from a Google Sheets spreadsheet, add a Google Sheets connection to a simple integration as its start connection. When the integration is running, the Google Sheets connection polls the spreadsheet at the interval that you specified, obtains the data that you identified, and passes the data to the next step in the integration.</p></div><div class="paragraph"><p>To obtain spreadsheet data in the middle of a flow, add a Google Sheets connection as a middle connection. During execution, Syndesis polls the spreadsheet for the specified data as soon as it starts processing this connection. In other words, the connection does not wait for an interval to elapse before polling the spreadsheet.</p></div><div class="paragraph"><p>To obtain data from a particular sheet in a spreadsheet, you specify the sheet name when you configure the action for the Google Sheets connection. A particular connection can obtain data from only one sheet.</p></div><div class="paragraph"><p>Between polls, if there are no changes to the sheet values that the connection is configured to return, then the next poll returns the same values as the previous poll.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Google Sheets connection that is authorized to access the spreadsheet that you want to obtain data from.</p></li><li><p>If this Google Sheets connection is triggering integration execution, then you are creating an integration and Syndesis is prompting you to choose the start connection.</p></li><li><p>If this Google Sheets connection is in the middle of a flow, then the integration already has a start connection and a finish connection, and Syndesis is prompting you to add to the integration by choosing a step.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>Click the Google Sheets connection that you want to use.</p></li><li><p>On the <strong>Choose an action</strong> page, for a start connection, select the <strong>Get sheet values</strong> action or for a middle connection, select the <strong>Retrieve sheet values</strong> action.</p></li><li><p>To configure the action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>SpreadsheetId</strong> field, enter the ID of a Google spreadsheet that is accessible from the Google account that this Google Sheets connection is authorized to access.</p><div class="paragraph"><p>To obtain a spreadsheet ID, display the spreadsheet in a browser. The ID is the part of the URL between <code>d/</code> and <code>/edit</code>.</p></div></li><li><p>In the <strong>Range</strong> field, enter Google A1 notation that identifies the data that you want to obtain. The default is <strong>A:A</strong>.</p><div class="paragraph"><p>For example, suppose that you want all data from a spreadsheet that has one sheet with 4 columns. Specify <code>A:D</code>. Or, to obtain data from rows 5 through 15, specify <code>A5:D15</code>.</p></div><div class="paragraph"><p>If the spreadsheet from which you are obtaining data has more than one sheet, specify the sheet name as well as the start cell coordinate and the end cell coordinate. If there is more than one sheet, and you do not specify a sheet name, then the connection obtains data from the first sheet in the spreadsheet. For example, specification of <code>2019!A1:D5</code> specifies that you want to obtain data from the sheet whose name is <code>2019</code>. In that sheet, you want the data that is in columns A through D for rows 1 through 5.</p></div></li><li><p>In the <strong>Major dimension</strong> field, accept <strong>Rows</strong>, which is the default, or select <strong>Columns</strong>.</p><div class="paragraph"><p><strong>Rows</strong> configures the action to return a collection of row objects where each row object contains a value for each desired column. When <strong>Major dimension</strong> is <strong>Rows</strong>, Syndesis can display meaningful column headings as field names in the data mapper, rather than <strong>A</strong>, <strong>B</strong>, <strong>C</strong>, and so on.</p></div><div class="paragraph"><p><strong>Columns</strong> configures the action to return a collection of column objects where each column object contains a value for each desired row.</p></div></li><li><p>In the <strong>Header row number</strong> field, if <strong>Major dimension</strong> is set to <strong>Rows</strong>, optionally enter the number of the row that contains the column headings in the data that the connection obtains. Specification of a header row enables Syndesis to obtain the headings from the spreadsheet. If you do not specify a header row, column headings default to a letter heading for each column in the range of data that the connection obtains. You can edit obtained headings or letter headings in the subsequent page.</p><div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content">If you are configuring a Google Sheets middle connection, the rest of the configuration options are not needed and Syndesis does not prompt for them. Skip to step 4.</td></tr></table></div></li><li><p>In the <strong>Split results</strong> field, accept <strong>No</strong>, which is the default, or select <strong>Yes</strong>. A setting of <strong>No</strong> configures the action to return data as a collection of values. That is, the connection passes a collection of row objects or a collection of column objects to the next step in the flow. Select <strong>Yes</strong> to enable the connection to split the returned data according to the setting of <strong>Major dimension</strong>. For example, if <strong>Major dimension</strong> is set to <strong>Rows</strong> then the connection returns row objects. Each row object triggers a separate execution of the flow. That is, Syndesis executes the flow once for each returned row object. For example, if the poll returns 5 rows then Syndesis executes the flow 5 times.</p><div class="paragraph"><p>Syndesis also provides discrete split and aggregate steps, which you can add to a flow. If you want to process individual objects in one or more steps and then aggregate the row or column objects, do not split the Google Sheets connection result. Instead, accept the default, <strong>No</strong>, and then add a split step to the flow after this connection. A split step is required if you want an aggregate step in the flow.</p></div></li><li><p>In the <strong>Delay</strong> field, accept the default of 30 seconds or specify how often you want the connection to obtain spreadsheet data.</p></li><li><p>In the <strong>Max results</strong> field, accept the default of <strong>0</strong> if you do not want to restrict how many rows or columns polling can return. The setting of <strong>Max results</strong> applies to the setting of the major dimension in the result matrix. To limit the data that the connection returns for the major dimension, specify an integer.</p><div class="paragraph"><p>For example, suppose that the major dimension is rows and that <strong>Max results</strong> is set to <strong>25</strong>. The poll returns no more than 25 rows of values.</p></div><div class="paragraph"><p>When <strong>Range</strong> specifies the major dimension and you also specify <strong>Max results</strong>, polling uses the lower number to determine how much data to return. Consequently, setting a value for <strong>Max results</strong> is more helpful when you specify only the minor dimension for <strong>Range</strong>. For example, consider a sheet that has 30 rows with three columns of values in each row. Suppose that <strong>Major dimension</strong> is <strong>Rows</strong> and <strong>Range</strong> is <strong>A:C</strong>. If you set <strong>Max results</strong> to <strong>10</strong>, polling returns 10 rows of data. If you accept <strong>0</strong> as the setting of <strong>Max results</strong>, polling returns 30 rows. However, if you specify <strong>Range</strong> as <strong>A1:C15</strong> and you also specify <strong>Max results</strong> as <strong>25</strong>, polling returns 15 rows. If you specify <strong>Range</strong> as <strong>A1:C30</strong> and you also specify <strong>Max results</strong> as <strong>25</strong>, polling returns 25 rows.</p></div></li></ol></div></li><li><p>Click <strong>Next</strong> to view the column names in the data that the connection obtains when <strong>Major dimension</strong> is set to <strong>Rows</strong>. If <strong>Major dimension</strong> is <strong>Columns</strong>, content in this field is ignored and you can click <strong>Next</strong> now to complete this procedure.</p><div class="paragraph"><p>The values that appear in the <strong>Column names</strong> field become the field names that a data mapper step displays. If you specified a header row number, Syndesis displays the headings from that row in the sheet that you are obtaining data from. If you left the header row number field blank, Syndesis displays a letter (<strong>A</strong>, <strong>B</strong>, <strong>C</strong>, and so on) for each column in the range of data that you are obtaining.</p></div></li><li><p>Optionally, edit the <strong>Column names</strong> field so it contains the field names that you want to see in a data mapper step. The field must contain a comma-separated list with no spaces, for example, <code>Name,Address,City,State,Zip</code>.</p></li><li><p>Click <strong>Next</strong> to add this Google Sheets connection to the flow.</p></li></ol></div><div class="paragraph"><div class="title">Next steps</div><p>If you added a Google Sheets connection as a start connection, Syndesis prompts you to add the integration&#8217;s finish connection. With the start and finish connections in the integration, add any other connections that you want in the integration.</p></div><div class="paragraph"><p>After the connection that obtains sheet values, add a data mapper step. In the data mapper, Syndesis displays source fields according to how you configure the action that obtains spreadsheet values. That is, if the major dimension is <strong>Rows</strong>, then the data mapper lists the column names as fields that you can map to the target. If the major dimension is <strong>Columns</strong>, then the data mapper lists row indexes as fields that you can map to the target.</p></div><div class="paragraph"><div class="title">Additional resource</div><p><a href="https://developers.google.com/sheets/api/guides/concepts#a1_notation">Google A1 notation</a> for specifying groups of cells in a spreadsheet</p></div></div><div class="sect3"><h4 id="add-google-sheets-connection-get-properties_sheets">10.4.3. Triggering an integration when polling returns spreadsheet properties</h4><div class="paragraph"><p>To trigger execution of an integration upon obtaining properties from a Google Sheets spreadsheet, add a Google Sheets connection to a simple integration as its start connection. When the integration is running, the Google Sheets connection polls the spreadsheet at the interval that you specified, obtains the spreadsheet properties, and passes the result to the next step in the integration.</p></div><div class="paragraph"><p>Properties include the spreadsheet&#8217;s title, locale, and time zone. Between polls, if there are no changes to the sheet properties, then the next poll returns the same values as the previous poll.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Google Sheets connection that is authorized to access the spreadsheet that you want to obtain properties from.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the Google Sheets connection that you want to use to start the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select the <strong>Get spreadsheet properties</strong> action.</p></li><li><p>To configure the <strong>Get spreadsheet properties</strong> action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>SpreadsheetId</strong> field, enter the ID of a Google spreadsheet that is accessible from the Google account that this Google Sheets connection is authorized to access.</p><div class="paragraph"><p>To obtain a spreadsheet ID, display the spreadsheet in a browser. The ID is the part of the URL between <code>d/</code> and <code>/edit</code>.</p></div></li><li><p>In the <strong>Delay</strong> field, accept the default of 30 seconds or specify how often you want the connection to obtain properties.</p></li></ol></div></li><li><p>Click <strong>Next</strong> to add this Google Sheets connection as the integration&#8217;s start connection.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The integration now has a start connection and Syndesis is prompting you to choose the integration&#8217;s finish connection.</p></div></div><div class="sect3"><h4 id="add-google-sheets-connection-create-spreadsheet_sheets">10.4.4. Creating a spreadsheet</h4><div class="paragraph"><p>To create a new spreadsheet in the middle of a flow, add a Google Sheets connection between the start and finish connections. While you can also finish a simple integration with a Google Sheets connection that creates a spreadsheet, you cannot add data to a new spreadsheet in the same connection. Therefore, when you want to create a spreadsheet and add data to the spreadsheet in the same flow, the flow requires two Google Sheets connections. One connection creates the spreadsheet and then a subsequent connection adds data to the spreadsheet.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Google Sheets connection that is authorized to access the Google account in which you want to create the spreadsheet.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click a Google Sheets connection that is authorized to access the Google account that you want to use to create the spreadsheet.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Create spreadsheet</strong>.</p></li><li><p>To configure the <strong>Create spreadsheet</strong> action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Title</strong> field, enter the title of the new spreadsheet.</p></li><li><p>In the <strong>Time Zone</strong> field, enter the time zone that the new spreadsheet should use, for example, <code>India Standard Time</code>, or <code>Tokyo</code>.</p></li><li><p>In the <strong>Locale</strong> field, enter the locale of the new spreadsheet, for example, <code>Canada</code>, or <code>Hong Kong</code>.</p></li></ol></div></li><li><p>Click <strong>Next</strong> to add the connection to the flow. The connection appears in the integration visualization where you added it.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>A connection that creates a spreadsheet returns the spreadsheet ID for the new spreadsheet. In subsequent steps, you can map this spreadsheet ID to the spreadsheet ID in a connection that accesses the new spreadsheet, for example, to update it.</p></div></div><div class="sect3"><h4 id="add-google-sheets-connection-update-sheet-values_sheets">10.4.5. Updating data in a sheet</h4><div class="paragraph"><p>In an integration, you can update data in a spreadsheet in the middle of a flow or to finish a simple integration. To do this, add a Google Sheets connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Google Sheets connection that is authorized to access the Google spreadsheet that you want to update.</p></li><li><p>You have access to the spreadsheet ID for the spreadsheet that you want to update.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click a Google Sheets connection that is authorized to access the spreadsheet that you want to update.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Update sheet values</strong>.</p></li><li><p>To configure the <strong>Update sheet values</strong> action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>SpreadsheetId</strong> field, do one of the following:</p><div class="ulist"><ul><li><p>Enter the ID of the spreadsheet that you want to update.</p></li><li><p>Leave the field blank. In this case, after you add this connection to the flow, you must add a data mapper step before this connection. In the data mapper step, map the spreadsheet ID from a previous connection to this connection. The previous connection must access the spreadsheet that you want to update in this connection.</p></li></ul></div></li><li><p>In the <strong>Range</strong> field, use Google A1 notation to specify the spreadsheet cells that you want to update. Specify the start and end coordinates, for example, <code>A1:D4</code> updates the first 4 columns in the first 4 rows in the first sheet in the spreadsheet.</p><div class="paragraph"><p>The default is <code>A:A</code>, which updates the first column in the first sheet in the spreadsheet.</p></div></li><li><p>In the <strong>Major dimension</strong> field, accept <strong>Rows</strong>, which is the default, or select <strong>Columns</strong>. <strong>Rows</strong> configures the action to use row objects to update the sheet. Each row object contains a value for each column that you want to update. <strong>Columns</strong> configures the action to use column objects to update the sheet. Each column object contains a value for each row that you want to update.</p></li><li><p>In the <strong>Value input option</strong> field, indicate how you want Google sheets to interpret the data that it receives for updating the sheet. <strong>Unspecified</strong>, which is the default, enables Google Sheets to automatically convert data that it recognizes. For example, if the input data is a date, then Google Sheets formats it as a date. If the input data is a decimal, then Google Sheets formats it as a decimal.</p><div class="ulist"><ul><li><p><strong>Unspecified</strong> defaults to the Google Sheets API setting, which defaults to <strong>User entered</strong>.</p></li><li><p><strong>Raw</strong> causes Google Sheets to insert the input data as is.</p></li><li><p><strong>User entered</strong> enables automatic conversion of recognizable data.</p></li></ul></div></li><li><p>Click <strong>Next</strong> to add the connection to the flow. The connection appears in the integration visualization in the location where you added it.</p></li></ol></div></li><li><p>If you want to add any other connections to the flow, add them now and then return to these instructions.</p></li><li><p>After the flow has all desired connections, in the integration visualization, click the plus sign that is just before the Google Sheets connection that updates sheet values.</p></li><li><p>Click the <strong>Data Mapper</strong> card to add a data mapping step to the flow.</p></li><li><p>In the data mapper:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>If you did not specify the spreadsheet ID when you configured the <strong>Update sheet values</strong> action, then map a source <code>spreadsheetId</code> to the target <code>spreadsheetId</code>.</p></li><li><p>Specify the data that you want to use to update the sheet by mapping fields from a source step to the target spreadsheet. For example, you might map fields from another spreadsheet or from a database.</p><div class="paragraph"><p>If you need to, you can edit the Google Sheets connection that updates sheet values and change the settings for <strong>Range</strong> or <strong>Major dimension</strong>. Changing these settings causes the data mapper to display different target fields according to your changes.</p></div></li><li><p>In the upper right, click <strong>Done</strong> to add the data mapper step.</p></li></ol></div></li></ol></div></div><div class="sect3"><h4 id="add-google-sheets-connection-append-sheet-values_sheets">10.4.6. Appending data to a sheet</h4><div class="paragraph"><p>You can append data to a sheet in the middle of a flow or to finish a simple integration. To do this, add a Google Sheets connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Google Sheets connection that is authorized to access the Google spreadsheet in which you want to append data.</p></li><li><p>You have access to the ID for the spreadsheet in which you want to append data.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click a Google Sheets connection that is authorized to access the spreadsheet in which you want to append data.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Append values to a sheet</strong>.</p></li><li><p>To configure the <strong>Append values to a sheet</strong> action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>SpreadsheetId</strong> field, do one of the following:</p><div class="ulist"><ul><li><p>Enter the ID of the spreadsheet that you want to append values to.</p></li><li><p>Leave the field blank. In this case, after you add this connection to the flow, you must add a data mapper step before this connection. In the data mapper step, map the spreadsheet ID from a previous connection to this connection. The previous connection must access the spreadsheet that you want to append data to in this connection.</p></li></ul></div></li><li><p>In the <strong>Range</strong> field, use Google A1 notation to specify the spreadsheet range that you want to append data to. Specify the start and end coordinates, for example, <code>A3:D3</code> appends data to the first sheet, after the third row for 4 columns. The default is <code>A:A</code>, which appends data to the first column in the first sheet in the spreadsheet.</p><div class="paragraph"><p>The connection never overwrites data. The connection starts appending data after the range you specify, and then always appends data to the content that is in place.</p></div></li><li><p>In the <strong>Major dimension</strong> field, accept <strong>Rows</strong>, which is the default, or select <strong>Columns</strong>. <strong>Rows</strong> configures the action to use row objects to append data. Each row object contains a value for each column that you want to append data to. <strong>Columns</strong> configures the action to use column objects to append data. Each column object contains a value for each row that you want to append.</p></li><li><p>In the <strong>Value input option</strong> field, indicate how you want Google sheets to interpret the data that it receives for appending to a sheet. <strong>Unspecified</strong>, which is the default, enables Google Sheets to automatically convert data that it recognizes. For example, if the input data is a date, then Google Sheets formats it as a date. If the input data is a decimal, then Google Sheets formats it as a decimal.</p><div class="ulist"><ul><li><p><strong>Unspecified</strong> defaults to the Google Sheets API setting, which defaults to <strong>User entered</strong>.</p></li><li><p><strong>Raw</strong> does nothing. Google Sheets inserts the input data as is.</p></li><li><p><strong>User entered</strong> enables automatic conversion of recognizable data.</p></li></ul></div></li><li><p>Click <strong>Next</strong> to add the connection to the flow. The connection appears in the integration visualization where you added it.</p><div class="paragraph"><p>The values that you specify to configure the <strong>Append values to a sheet</strong> action determine the fields that the data mapper displays for mapping to or from this connection.</p></div></li></ol></div></li><li><p>If you want to add any other connections to the flow, add them now and then return to these instructions.</p></li><li><p>After the flow has all desired connections, in the integration visualization, click the plus sign that is just before the Google Sheets connection that appends data to a sheet.</p></li><li><p>Click <strong>Data Mapper</strong> to add a data mapping step to the flow.</p></li><li><p>In the data mapper:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>If you did not specify the spreadsheet ID when you configured the <strong>Append values to a spreadsheet</strong> action, then map a source <code>spreadsheetId</code> to the target <code>spreadsheetId</code>.</p></li><li><p>Specify the data to append to the sheet by mapping fields from a source step to the target spreadsheet. For example, you might map fields from another spreadsheet or from a database.</p><div class="paragraph"><p>If you need to, you can edit the Google Sheets connection that appends sheet values and change the settings for <strong>Range</strong> or <strong>Major dimension</strong>. Changing these settings causes the data mapper to display different target fields according to your changes.</p></div></li><li><p>In the upper right, click <strong>Done</strong> to add the data mapper step.</p></li></ol></div></li></ol></div></div><div class="sect3"><h4 id="add-google-sheets-connection-update-properties_sheets">10.4.7. Updating spreadsheet properties</h4><div class="paragraph"><p>In an integration, you can update the properties of a spreadsheet in the middle of a flow or to finish a simple integration. To do this, add a Google Sheets connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="paragraph"><p>Properties include the spreadsheet&#8217;s title, locale, and time zone.</p></div><div class="paragraph"><p>When Syndesis prompts you to configure the <strong>Update spreadsheet properties</strong> action, you can leave some or all fields blank. If you leave a field blank, then in a data mapper step that is in the flow (you add it later) before this connection, you map fields from previous steps to blank <strong>Update spreadsheet properties</strong> action configuration fields.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Google Sheets connection that is authorized to access the Google spreadsheet whose properties you want to update.</p></li><li><p>You have access to the spreadsheet ID for the spreadsheet whose properties you want to update.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click a Google Sheets connection that is authorized to access the spreadsheet whose properties you want to update.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Update spreadsheet properties</strong>.</p></li><li><p>To configure the <strong>Update spreadsheet properties</strong> action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>SpreadsheetId</strong> field, do one of the following:</p><div class="ulist"><ul><li><p>Enter the ID of the spreadsheet whose properties you want to update.</p></li><li><p>Leave the field blank. In this case, after you add this connection to the flow, you must add a data mapper step that is before this connection. In the data mapper step, map the spreadsheet ID from a previous connection to this connection. The previous connection must access the spreadsheet that you want to update in this connection.</p></li></ul></div></li><li><p>In the other fields, enter a value only if you want to change the property. Alternatively, you can leave the fields blank. If you do, then in a data mapper step that you add later, just before this connection, you can map the fields that you want to change.</p></li><li><p>Click <strong>Next</strong> to add the connection to the flow. The connection appears in the integration visualization where you added it.</p></li></ol></div></li><li><p>If you want to add any other connections to the flow, add them now and then return to these instructions.</p></li><li><p>After the flow has all desired connections, you might want to use a data mapper step to update spreadsheet properties:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the integration visualization, click the plus sign that is just before the Google Sheets connection that updates properties.</p></li><li><p>Click <strong>Data Mapper</strong> to add a data mapping step to the flow.</p></li><li><p>In the data mapper, if you did not specify a spreadsheet ID when you configured the <strong>Update spreadsheet properties</strong> action, map a source <code>spreadsheetId</code> to the target <code>spreadsheetId</code>.</p></li><li><p>For each spreadsheet property that you want to change and for which you did not specify an updated value when you configured the <strong>Update spreadsheet properties</strong> action, map a field from a source step to the target spreadsheet property that you want to change.</p></li><li><p>In the upper right, click <strong>Done</strong> to add the data mapper step.</p></li></ol></div></li></ol></div></div><div class="sect3"><h4 id="add-google-sheets-connection-add-chart_sheets">10.4.8. Adding a chart to a sheet</h4><div class="paragraph"><p>In the middle of a flow, or to finish a simple integration, you can add a basic chart or a pie chart to a Google Sheets spreadsheet. To do this, add a Google Sheets connection to the middle of a flow or as a simple integration&#8217;s finish connection. Then add a data mapper step just before the connection. In the data mapper step, set options that determine the location, properties, and content of the chart.</p></div><div class="paragraph"><p>When Syndesis prompts you to configure the <strong>Add charts</strong> action, you can leave some or all fields blank. If you leave a field blank, you can map a value to that field in the data mapper step that you will add just before this connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Google Sheets connection that is authorized to access the Google spreadsheet that you want to add a chart to.</p></li><li><p>You have access to the ID for the spreadsheet that you want to add a chart to.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose the finish connection for a simple integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click a Google Sheets connection that is authorized to access the spreadsheet that you want to add a chart to.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Add charts</strong>.</p></li><li><p>To configure the <strong>Add charts</strong> action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>SpreadsheetId</strong> field, do one of the following:</p><div class="ulist"><ul><li><p>Enter the ID of the spreadsheet that you want to add a chart to.</p></li><li><p>Leave the field blank. In the data mapper step that will be just before this connection, map the spreadsheet ID from a previous connection to this connection. The previous connection must access the spreadsheet that you want to add a chart to in this connection.</p></li></ul></div></li><li><p>In the <strong>Chart Title</strong> field, enter a title.</p><div class="paragraph"><p>Alternatively, leave the field blank. In the data mapper step that is just before this connection, map the chart title from a source field or property to the <code>title</code> target field.</p></div></li><li><p>In the <strong>Subtitle</strong> field, enter a subtitle.</p><div class="paragraph"><p>Alternatively, leave the field blank. In the data mapper step that is just before this connection, map the chart subtitle from a source field or property to the <code>subtitle</code> target field.</p></div></li></ol></div></li><li><p>Click <strong>Next</strong> to add the connection to the flow. The connection appears in the integration visualization where you added it.</p></li><li><p>If you want to add any other connections to the flow, add them now. Then return to these instructions.</p></li><li><p>In the integration visualization, click the plus sign that is just before the connection that adds a chart.</p></li><li><p>Click <strong>Data Mapper</strong>.</p><div class="paragraph"><p>In the data mapper, map source properties, source fields, or source constants to the target Google Sheets connection, which is adding a chart. The following instructions assume that there is a source field, a source property, or a source constant that contains the value that you want to map to each target field.</p></div><div class="paragraph"><p>If there is no source for the required value, then create a source property in the data mapper by clicking the + sign that is to the right of the <strong>Properties</strong> folder. In the <strong>Create Property</strong> dialog, give the property a name that makes it easy to map to the correct target field, for example, specify <strong><code>overlayPosition</code></strong> as the property name. For the property value, specify the value that you want the connection to use to create the chart. The chart’s overlay position field requires A1 notation that identifies a cell. That is, it specifies a start position but an end position specification is not required, and it is ignored if it is present. For example, specify something like <code>D4</code> as the value of the <strong>overlayPosition</strong> source property. Save the new property.</p></div><div class="paragraph"><p>When you configured the <strong>Add charts</strong> action, you might have specified a value for the spreadsheet ID, the chart title, and/or the chart subtitle. If you did, then do not map a value to that field.</p></div></li><li><p>To add a chart to a sheet, map source properties, source fields or source constants to target fields as follows:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Set the location of the chart by mapping an A1 notation value, which identifies a cell, to the <strong>overlayPosition</strong> target field. An end position is not required and it is ignored if present. The mapped value identifies the cell where Google Sheets places the chart. This cell is the upper left corner of the chart display.</p><div class="paragraph"><p>If you do not map a value to the <strong>overlayPosition</strong> field, and you also do not map a value to the <strong>sheetId</strong> field, which identifies the sheet that you want to add the chart to, then the default behavior is that Google Sheets creates a new sheet and places the chart in A1.</p></div><div class="paragraph"><p>You must map a value to the <strong>overlayPosition</strong> field if you plan to map a value to the <strong>sheetId</strong> field.</p></div></li><li><p>Map a source <strong>spreadsheetId</strong> field to the target <strong>spreadsheetId</strong> field. The connection uses source data in this spreadsheet to add the chart to a sheet in this same spreadsheet. The source data and the chart can be in two different sheets in the same spreadsheet but they cannot be in two different spreadsheets.</p></li><li><p>Set a chart title by mapping to the target <strong>title</strong> field. The connection inserts this string as the title of the chart.</p></li><li><p>Set a chart subtitle by mapping to the target <strong>subtitle</strong> field. The connection inserts this string as a chart subtitle.</p></li><li><p>Identify the sheet to add the chart to by mapping an integer to the <strong>sheetId</strong> field.</p><div class="paragraph"><p>If you map a value to the <strong>sheetId</strong> field then you must also map a value to the <strong>overlayPosition</strong> field.</p></div><div class="paragraph"><p>If you do not map a value to the <strong>sheetId</strong> field and you also do not map a value to the <strong>overlayPosition</strong> field, then the connection creates a new sheet and adds the chart to the new sheet.</p></div><div class="paragraph"><p>If you do not map a value to the <strong>sheetId</strong> field but you do map a value to the <strong>overlayPosition</strong> field, then the connection places the chart on the sheet identified by the <strong>sourceSheetId</strong> field. This is the sheet that provides the data for the chart.</p></div><div class="paragraph"><p><code>0</code> identifies the first sheet in the spreadsheet. For subsequent sheets, the sheet ID is at the end of the URL when the sheet is visible in a browser. For example, at the end of the following URL, you can see <code>gid=206589330</code>:</p></div><div class="paragraph"><p><code>https://docs.google.com/spreadsheets/d/1pa&#8230;&#8203;ngQbKkM/edit#gid=206589330</code></p></div><div class="paragraph"><p>This indicates that the sheet ID is <code>206589330</code> and that is the value that you would map to <strong>sheetId</strong>.</p></div></li><li><p>Identify the sheet that provides the data for the chart by mapping its integer sheet ID to the target <strong>sourceSheetId</strong> field. The default is <code>0</code>, which identifies the first sheet in the spreadsheet.</p><div class="paragraph"><p>You can add a basic chart or a pie chart. Follow one of the following sets of instructions according to the kind of chart that you want to add.</p></div></li><li><p>To add basic chart, in the target panel, expand the <strong>basicChart</strong> folder and map source fields to target fields that are in the <strong>basicChart</strong> folder:</p><div class="olist lowerroman"><ol class="lowerroman" type="i"><li><p>Set the chart type (<code>BAR</code>, <code>LINE</code>, <code>AREA</code>, or <code>COLUMN</code>) by mapping to the target <strong>type</strong> field. The default is <code>COLUMN</code>.</p></li><li><p>Set the title for the bottom axis of the chart by mapping to the target <strong>axisTitleBottom</strong> field.</p></li><li><p>Set the title for the left axis of the chart by mapping to the target <strong>axisTitleLeft</strong> field.</p></li><li><p>Set the high level category of information that the chart shows by mapping to the target <strong>domainRange</strong> field. This field uses the Google Sheets A1 notation. For example, suppose that the first column in a source sheet provides a list of 5 products in <code>A2</code> through <code>A6</code> , and you want the chart to provide some data for each product. In this column, the first cell (<code>A1</code>) must contain a label, such as <code>Products</code>. The setting of <strong>domainRange</strong> would be <code>A1:A6</code>. The chart will contain the data that is in <code>A2</code> through <code>A6</code>. The chart does not display the label.</p></li><li><p>Identify the location of the source data that the chart shows by mapping to the target <strong>dataRange</strong> field. This field uses the Google Sheets A1 notation. A chart can provide only one series of data. Continuing with the <strong>domainRange</strong> example, suppose that the second column in a source sheet shows the number sold for each of the 5 products that are listed in the first column and this is the data that you want the chart to show. In this column, the first cell (<code>B1</code>) must contain a label, such as <code>Number Sold</code>. The setting of <strong>dataRange</strong> would be <code>B1:B6</code>. The chart will contain the data that is in <code>B2</code> through <code>B6</code>. The chart does not display the label.</p></li></ol></div></li><li><p>To add a pie chart, in the target panel, expand the <strong>pieChart</strong> folder and map source fields to target fields that are in the <strong>pieChart</strong> folder:</p><div class="olist lowerroman"><ol class="lowerroman" type="i"><li><p>Set the location of the pie chart legend by mapping to the target <strong>legendPosition</strong> field. The default is <code>LEFT_LEGEND</code>. The value must be <code>BOTTOM_LEGEND</code>, <code>LEFT_LEGEND</code>, <code>RIGHT_LEGEND</code>, <code>TOP_LEGEND</code>, or <code>NO_LEGEND</code>.</p></li><li><p>Set the high level category of information that the pie chart shows by mapping to the target <strong>domainRange</strong> field. This field uses the Google Sheets A1 notation. For example, suppose that the first column in a source sheet provides a list of 5 products in <code>A2</code> through <code>A6</code> , and you want the chart to provide some data for each product. In this column, the first cell (<code>A1</code>) must contain a label, such as <code>Products</code>. The setting of <strong>domainRange</strong> would be <code>A1:A6</code>. The chart will contain the data that is in <code>A2</code> through <code>A6</code>. The chart does not display the label.</p></li><li><p>Identify the location of the source data that the chart shows by mapping to the target <strong>dataRange</strong> field. This field uses the Google Sheets A1 notation. A chart can provide only one series of data. Continuing with the <strong>domainRange</strong> example, suppose that the second column in a source sheet shows the number sold for each of the 5 products that are listed in the first column and this is the data that you want the chart to show. In this column, the first cell (<code>B1</code>) must contain a label, such as <code>Number Sold</code>. The setting of <strong>dataRange</strong> would be B1:B6. The chart will contain the data that is in <code>B2</code> through <code>B6</code>. The chart does not display the label.</p></li></ol></div></li><li><p>In the upper right, click <strong>Done</strong> to add the data mapper step.</p></li></ol></div></li></ol></div></div><div class="sect3"><h4 id="add-google-sheets-connection-add-pivot-table_sheets">10.4.9. Adding a pivot table to a sheet</h4><div class="paragraph"><p>In the middle of a flow, or to finish a simple integration, you can add a pivot table to a Google Sheets spreadsheet. A pivot table lets you aggregate, sort, or apply a function to spreadsheet data and display the results in the same spreadsheet. To add a pivot table, add a Google Sheets connection to the middle of a flow or as a simple integration&#8217;s finish connection. Then add a data mapping step before the connection. In the data mapping step, you set options that determine the location, properties, and content of the pivot table.</p></div><div class="paragraph"><p>In this release, the <strong>Add pivot table</strong> action is limited to defining one value group, one row pivot group, and one column pivot group. Support for multiple groups in a single action is expected to be added in a future release. As a workaround, you can add multiple Google Sheets connections that add pivot tables based on the same source spreadsheet.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Google Sheets connection that is authorized to access the Google spreadsheet that you want to add a pivot table to.</p></li><li><p>You have access to the ID for the spreadsheet that contains the source data for the pivot table.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose the finish connection for a simple integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click a Google Sheets connection that is authorized to access the spreadsheet that you want to add the pivot table to.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Add pivot tables</strong>.</p></li><li><p>To configure the <strong>Add pivot tables</strong> action, in the <strong>SpreadsheetId</strong> field, do one of the following:</p><div class="ulist"><ul><li><p>Enter the ID of the spreadsheet that you want to add a pivot table to.</p></li><li><p>Leave the field blank. In the data mapper step that you will add just before this connection, you will map the spreadsheet ID from a previous connection to this connection. The previous connection must access the spreadsheet that you want to add a pivot table to in this connection.</p></li></ul></div></li><li><p>Click <strong>Next</strong> to add the connection to the flow. The connection appears in the integration visualization where you added it.</p></li><li><p>If you want to add any other connections to this flow, add them now. Then return to these instructions.</p></li><li><p>In the integration visualization, click the plus sign that is just before the connection that adds a pivot table to a sheet.</p></li><li><p>Click <strong>Data Mapper</strong>.</p><div class="paragraph"><p>In the data mapper, map source properties, source fields, or source constants to the target Google Sheets connection, which is adding a pivot table. The following instructions assume that there is a source field, source property, or source constant that contains the value that you want to map to each target field.</p></div><div class="paragraph"><p>If there is no source for the required value, then create a source property in the data mapper by clicking the + sign that is to the right of the <strong>Properties</strong> folder. In the <strong>Create Property</strong> dialog, give the property a name that makes it easy to map to the correct target field, for example, specify <strong><code>valueLayout</code></strong> as the property name. Specify the value that you want the connection to use to create the pivot table. The pivot table&#8217;s value layout field requires a value of <code>HORIZONTAL</code> or <code>VERTICAL</code> so you might specify <code>VERTICAL</code> as the value of the <strong>valueLayout</strong> property. Save the new property.</p></div></li><li><p>In the data mapper, configure a new pivot table as follows:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Map a source <strong>spreadsheetId</strong> field to the target <strong>spreadsheetId</strong> field. The connection uses source data in this spreadsheet to add the pivot table to a sheet in this same spreadsheet. The source data and the pivot table can be in two different sheets in the same spreadsheet but they cannot be in two different spreadsheets.</p></li><li><p>Identify the sheet to add the pivot table to by mapping an integer to the <strong>sheetId</strong> field. The default is <code>0</code>, which identifies the first sheet in the spreadsheet. For subsequent sheets, the sheet ID is at the end of the URL when the sheet is visible in a browser. For example, at the end of the following URL, you can <code>gid=206589330</code>:</p><div class="paragraph"><p><code>https://docs.google.com/spreadsheets/d/1pa&#8230;&#8203;ngQbKkM/edit#gid=206589330</code>.</p></div><div class="paragraph"><p>This indicates that the sheet ID is <code>206589330</code> and that is the value that you would map to <strong>sheetId</strong>.</p></div></li><li><p>Identify the sheet that provides the data for generating the pivot table by mapping its integer sheet ID to the target <strong>sourceSheetId</strong> field. If you do not map a value to <strong>sourceSheetId</strong>, the connection uses the <strong>sheetId</strong> value, or <code>0</code> if no value is mapped to <strong>sheetId</strong>. <code>0</code> identifies the first sheet in the spreadsheet.</p></li><li><p>Set the source data range for generating the pivot table by mapping an A1 notation value to the target <strong>sourceRange</strong> field. For example, <strong>A2:D5</strong>.</p></li><li><p>Set the value layout to be used on the pivot table by mapping to the target <strong>valueLayout</strong> field. The value must be <code>VERTICAL</code> or <code>HORIZONTAL</code>, which is the default. <code>HORIZONTAL</code> specifies that values are laid out as columns.</p></li><li><p>Set the top left cell of the pivot table by mapping an A1 notation cell coordinate to the target <strong>start</strong> field. When the connection adds the pivot table to the sheet that contains the source data, if you do not map a value to the <strong>start</strong> field, the default is that the top left cell of the pivot table is the cell that is in the first row of the source data range and in the first empty column after the source data range. When the source data is in one sheet and the pivot table will be in another sheet, the default is <strong>A1</strong>.</p></li><li><p>To add a value group, expand <strong>valueGroups</strong> in the target panel, and map values to the fields under <strong>valueGroups</strong>:</p><div class="olist lowerroman"><ol class="lowerroman" type="i"><li><p>Map a value group name to the target <strong>name</strong> field.</p></li><li><p>Map a function, which you want to apply to the value group, to the target <strong>function</strong> field. The value must be <code>SUM</code>, <code>COUNT</code>, <code>AVERAGE</code>, <code>MAX</code>, <code>MIN</code>, or <code>CUSTOM</code>. The default is <code>SUM</code>. Map <code>CUSTOM</code> to <strong>function</strong> when you are defining a formula.</p></li><li><p>Map a custom formula, which you want to apply to the value group, to the target <strong>formula</strong> field if you mapped the <code>CUSTOM</code> value to the <strong>function</strong> field.</p></li><li><p>Map a column name, which is the coordinate that builds the value group, to the target <strong>sourceColumn</strong> field.</p></li></ol></div></li><li><p>To add a row pivot group, expand <strong>columnGroups</strong> in the target panel, and map values to the fields under <strong>columnGroups</strong>:</p><div class="olist lowerroman"><ol class="lowerroman" type="i"><li><p>Map a row pivot group name to the target <strong>label</strong> field.</p></li><li><p>Map the sort order that you want to apply to the row pivot group to the target <strong>sortOrder</strong> field. The value must be <code>ASCENDING</code> or <code>DESCENDING</code>. The default is <code>ASCENDING</code>.</p></li><li><p>Map <code>true</code> or <code>false</code> to the target <strong>showTotals</strong> field. The default is <code>true</code>, which enables the display of totals for the row pivot group.</p></li><li><p>Map a column name, which is the coordinate that builds the row pivot group, to the target <strong>sourceColumn</strong> field.</p></li></ol></div></li><li><p>To add a column pivot group, expand <strong>rowGroups</strong> in the target panel, and map values to the fields under <strong>rowGroups</strong>:</p><div class="olist lowerroman"><ol class="lowerroman" type="i"><li><p>Map a column pivot group name to the target <strong>label</strong> field.</p></li><li><p>Map the sort order that you want to apply to the column pivot group to the target <strong>sortOrder</strong> field. The value must be <code>ASCENDING</code> or <code>DESCENDING</code>. The default is <code>ASCENDING</code>.</p></li><li><p>Map <code>true</code> or <code>false</code> to the target <strong>showTotals</strong> field. The default is <code>true</code>, which enables the display of totals for the column pivot group.</p></li><li><p>Map a column name, which is the coordinate that builds the column pivot group, to the target <strong>sourceColumn</strong> field.</p></li></ol></div></li><li><p>In the upper right, click <strong>Done</strong> to add the data mapper step.</p></li></ol></div></li></ol></div><div class="paragraph"><div class="title">Additional resource</div><p><a href="https://developers.google.com/sheets/api/guides/pivot-tables">Google developers documentation for pivot tables</a></p></div></div></div></div></div><div class="sect1"><h2 id="connecting-to-http_connectors">11. Connecting to HTTP and HTTPS endpoints</h2><div class="sectionbody"><div class="paragraph"><p>In an integration, you can connect to HTTP and HTTPS endpoints to execute the <code>GET</code>, <code>PUT</code>, <code>POST</code>, <code>DELETE</code>, <code>HEAD</code>, <code>OPTIONS</code>, <code>TRACE</code>, or <code>PATCH</code> method. To do this, create an HTTP or HTTPS connection and then add it to an integration flow. The following topics provide details:</p></div><div class="ulist"><ul><li><p><a href="#creating-http-connections_http">Creating a connection to an HTTP or HTTPS endpoint</a></p></li><li><p><a href="#adding-http-connections_http">Adding an HTTP or HTTPS connection to an integration</a></p></li></ul></div><div class="sect2"><h3 id="creating-http-connections_http">11.1. Creating a connection to an HTTP or HTTPS endpoint</h3><div class="paragraph"><p>In an integration, to execute the HTTP <code>GET</code>, <code>PUT</code>, <code>POST</code>, <code>DELETE</code>, <code>HEAD</code>, <code>OPTIONS</code>, <code>TRACE</code>, or <code>PATCH</code> method, create a connection to an HTTP or HTTPS endpoint. You can then add the connection to one or more integrations.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You must know the URL for the endpoint that you want to connect to.</p></div><div class="olist arabic"><div class="title">Procedures</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display Syndesis connectors.</p></li><li><p>If you want to use Hyper Text Transfer Protocol to connect to the endpoint, then click the <strong>HTTP</strong> connector. If you want to use Hyper Text Transfer Protocol Secure, then click the <strong>HTTPS</strong> connector.</p></li><li><p>In the <strong>Base URL</strong> field, enter the endpoint path. For example, <code>www.mycompany.com/sales</code>.</p></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether validation is successful. If validation fails, revise specification of the base URL and try again.</p></li><li><p>If validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code><strong>HTTPS My Company Sales</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection.</p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>HTTPS My Company Sales</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="adding-http-connections_http">11.2. Adding an HTTP or HTTPS connection to an integration</h3><div class="paragraph"><p>You can add an HTTP or HTTPS connection to any number of integrations.</p></div><div class="ulist"><div class="title">Prerequisite</div><ul><li><p>You created an HTTP or HTTPS connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a start connection, or to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the HTTP or HTTPS connection that you want to add to the flow.</p></li><li><p>Select the action that you want the connection to perform:</p><div class="ulist"><ul><li><p>If you are adding a start connection, then <strong>Periodic invoke URL</strong> is the only available action. This action invokes the endpoint at intervals that you specify and triggers the integration if the endpoint returns any data.</p></li><li><p>If you are adding a middle or finish connection, then <strong>Invoke URL</strong> is the only available action. This action invokes the endpoint once.</p></li></ul></div></li><li><p>In the <strong>URL Path</strong> field, specify the location of the endpoint that you want to invoke.</p></li><li><p>In the <strong>HTTP Method</strong> field, select the method that you want the connection to perform. The default method is <code>GET</code>.</p><div class="ulist"><ul><li><p><code>GET</code> obtains the content at the URL path.</p></li><li><p><code>PUT</code> replaces the content at the URL path with the integration data.</p></li><li><p><code>POST</code> stores the integration data at the URL path to create new content.</p></li><li><p><code>DELETE</code> removes content at the URL path.</p></li><li><p><code>HEAD</code> obtains metadata about the content at the URL path.</p></li><li><p><code>OPTIONS</code> obtains communication option settings at the URL path.</p></li><li><p><code>TRACE</code> obtains information for testing and diagnostic purposes.</p></li><li><p><code>PATCH</code> partially updates the content at the URL path according to the integration data.</p></li></ul></div></li><li><p>If you are adding a start connection, which periodically invokes the URL, then in the <strong>Period</strong> field, accept the default interval of <strong>1</strong> second or specify a number and its unit (milliseconds, seconds, minutes, or hours) to indicate how long to wait between invocations.</p></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s input or output type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection input/output in a data mapper step then you must specify the data type. The data mapper cannot dislay fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-irc_connectors">12. Connecting to IRC</h2><div class="sectionbody"><div class="paragraph"><p>Internet Relay Chat (IRC) is a protocol that lets anyone with an IRC client send and receive text messages in real time. In an integration, a connection to IRC can do one of the following:</p></div><div class="ulist"><ul><li><p>Trigger execution of a simple integration when an IRC nickname that you specify receives a private message. The integration passes the message to the next step in the flow. For example, you can designate an IRC nickname for receiving names of possible customers. Upon receiving a message, the integration could connect to Salesforce to create a lead.</p></li><li><p>Deliver a message to a particular channel. The message is from the nickname that you specify. For example, this is useful when an integration downloads a file from an FTP server and processes it in some way. An integration flow can send a message to a particular channel to indicate that the process was successful.</p></li></ul></div><div class="paragraph"><p>To connect to IRC in an integration, create an IRC connection and then add the connection to an integration flow. Details are in the following topics:</p></div><div class="ulist"><ul><li><p><a href="#creating-irc-connections_irc_">Creating an IRC connection</a></p></li><li><p><a href="#adding-irc-connections-receive_irc_">Adding an IRC connection to trigger integration execution upon receiving messages</a></p></li><li><p><a href="#adding-irc-connections-send_irc_">Adding an IRC connection to send a message</a></p></li></ul></div><div class="sect2"><h3 id="creating-irc-connections_irc_">12.1. Creating an IRC connection</h3><div class="paragraph"><p>In an integration, an IRC connection can retrieve messages that are sent to an IRC nickname that you specify or send messages to a nickname on a channel. You can use the same IRC connection in any number of integrations.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You know the hostname and port of the IRC server that you want to connect to.</p></li><li><p>If the IRC server requires a password, you know the password.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display Syndesis connectors.</p></li><li><p>Click the <strong>IRC</strong> connector.</p></li><li><p>In the <strong>Hostname</strong> field, enter an IRC hostname. You can specify an IP address or a name, for example, <code><strong>chat.freenode.net</strong></code>.</p></li><li><p>In the <strong>Port</strong> field, enter the port that the IRC server is listening on, for example, <code><strong>6665</strong></code>.</p></li><li><p>In the <strong>Password</strong> field, if the IRC server requires a password, enter it here.</p></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether validation is successful. If validation fails, revise the connection configuration values and try again.</p></li><li><p>If validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code><strong>IRC Freenode</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection.</p></li><li><p>Click <strong>Save</strong> to see the updated list of available connections, including the connection that you just created. If you entered the example name, you would see that <strong>IRC Freenode</strong> appears as a connection that you can choose to add to an integration. You can add this connection to any number of integrations.</p></li></ol></div></div><div class="sect2"><h3 id="adding-irc-connections-receive_irc_">12.2. Adding an IRC connection to trigger integration execution upon receiving messages</h3><div class="paragraph"><p>An IRC connection that starts an integration triggers execution of the integration when the connection finds private messages that are sent to an IRC nickname that you specify.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created an IRC connection.</p></li><li><p>You have an IRC nickname for receiving and sending messages.</p></li><li><p>You are creating a simple integration and Syndesis is prompting you to choose how you want to start the integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>Click the IRC connection that you want to use to start the integration.</p></li><li><p>Select the <strong>IRC Receive Private Message</strong> action.</p></li><li><p>In the <strong>Channels</strong> field, optionally specify one or more IRC channels separated with commas.</p></li><li><p>In the <strong>Nickname</strong> field, specify the IRC nickname that the integration uses. For any channels that you specify, this nickname joins the channel. During execution, the integration retrieves messages that are sent to this nickname and passes them to the next step in the integration.</p></li><li><p>In the <strong>NickServ Password</strong> field, if the specified nickname has a password, enter it.</p></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s output type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection output in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong> to add the connection to the flow.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection is a simple integration&#8217;s start connection and Syndesis prompts you to choose the integration&#8217;s finish connection.</p></div></div><div class="sect2"><h3 id="adding-irc-connections-send_irc_">12.3. Adding an IRC connection to send a message</h3><div class="paragraph"><p>In an integration, you can send a message to one or more IRC channels in the middle of a flow or to finish a simple integration. To do this, add an IRC connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created an IRC connection.</p></li><li><p>You have an IRC nickname for receiving and sending messages.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the IRC connection that you want to add to the flow.</p></li><li><p>Select <strong>IRC Send Message to Channel</strong> to send a message to one or more channels.</p><div class="ulist"><ul><li><p>In the <strong>Channels</strong> field, enter one or more IRC channels delimited by commas. During execution, this connection sends messages from the IRC nickname that you specify to these channels.</p></li></ul></div></li><li><p>In the <strong>Nickname</strong> field, specify the IRC nickname that sends messages to the specified channels.</p></li><li><p>In the <strong>NickServ password</strong> field, if the nickname that you specified has a password, specify it here.</p></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s input type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection input in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong> to add the connection to the flow.</p></li></ol></div><div class="paragraph"><div class="title">Results</div><p>The connection appears in the flow visualization where you added it.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-jira_connectors">13. Connecting to Jira</h2><div class="sectionbody"><div class="paragraph"><p>In an integration, you can connect to a Jira server to obtain, create, or update issues. Jira is a tool for planning, tracking, and managing software development projects. Each Jira environment allows customization of the workflow, which has an effect on the details for connecting to Jira in an integration. Consulting with your Jira administrator should clarify the details.</p></div><div class="paragraph"><p>The following topics provide information and procedures for creating integrations that connect to a Jira server:</p></div><div class="ulist"><ul><li><p><a href="#registering-with-jira_jira">Registering Syndesis with a Jira server that uses OAuth</a></p></li><li><p><a href="#creating-jira-connections_jira">Creating a Jira connection</a></p></li><li><p><a href="#adding-jira-connection-start_jira">Obtaining Jira issues or comments to trigger integration execution</a></p></li><li><p><a href="#adding-jira-connection-add-issue_jira">Adding an issue to a Jira server</a></p></li><li><p><a href="#adding-jira-connection-add-comment_jira">Adding a comment to a Jira issue</a></p></li><li><p><a href="#adding-jira-connection-attach-file_jira">Attaching a file to a Jira issue</a></p></li><li><p><a href="#adding-jira-connection-watchers_jira">Adding and removing Jira issue watchers</a></p></li><li><p><a href="#adding-jira-connection-update-issue_jira">Updating an issue on a Jira server</a></p></li><li><p><a href="#adding-jira-connection-transition-issue_jira">Transitioning a Jira issue to a new status</a></p></li></ul></div><div class="sect2"><h3 id="registering-with-jira_jira">13.1. Registering Syndesis with a Jira server that uses OAuth</h3><div class="paragraph"><p>An integration can connect to a Jira server that uses the OAuth protocol to authenticate access. To enable this, register your Syndesis environment as a Jira client application. Jira client applications are also referred to as Jira consumers. In other words, your Syndesis environment is a Jira consumer.</p></div><div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content">Registration is not required when a Jira server uses only basic authentication.</td></tr></table></div><div class="paragraph"><p>Follow the procedure here to obtain the Jira OAuth credentials that you need to create a Syndesis connection to Jira. For more details about registering Jira consumers, including a tutorial that takes you through the steps with a sample server, see the <a href="https://developer.atlassian.com/cloud/jira/platform/jira-rest-api-oauth-authentication/#overview">Jira documentation about OAuth for REST APIs</a></p></div><div class="paragraph"><p>After you register Syndesis with a Jira server, you use Syndesis to create a connection to that Jira server. Any number of integrations can use the same Jira connection. However, if you want to create another Jira connection, you must obtain another set of OAuth credentials by repeating the registration procedure provided here.</p></div><div class="paragraph"><div class="title">Overview of the main steps</div><p>The main steps in the registration procedure are:</p></div><div class="ulist"><ul><li><p>Obtain the Atlassian command line application that enables you to obtain OAuth credentials.</p></li><li><p>Run the downloaded application to create a <code>config.properties</code> file.</p></li><li><p>Create a public/private key pair, which Syndesis uses to access a Jira server.</p></li><li><p>Edit the <code>config.properties</code> file to update some of its values.</p></li><li><p>Configure your Jira server to recognize your Syndesis environment as a consumer application.</p></li><li><p>Obtain a Jira access token that Syndesis needs to access data on your Jira server.</p></li></ul></div><div class="paragraph"><p>Each of these steps has several substeps and the procedure below provides the details.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>Jira server administration permissions.</p></li><li><p>Familiarity with command line interfaces.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>Obtain the Atlassian command line application that enables you to obtain OAuth credentials:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p><a href="https://bitbucket.org/atlassianlabs/atlassian-oauth-examples/src/master/">Go to the <code>atlassian-oauth-examples</code> page</a>.</p></li><li><p>In the left panel, at the bottom, click <strong>Downloads</strong>.</p></li><li><p>On the <strong>Downloads</strong> page, click <strong>Download repository</strong>.</p></li><li><p>Extract the file into a directory that you choose.</p></li></ol></div></li><li><p>Run the downloaded application to create a <code>config.properties</code> file for OAuth credentials:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In a terminal, navigate to the directory that contains the extracted content.</p></li><li><p>Change to the <code>java</code> directory and build the client:</p><div class="listingblock"><div class="content"><pre>cd atlassianlabs-atlassian-oauth-examples-dd0264cad043/java
mvn clean compile assembly:single</pre></div></div></li><li><p>Change to the <code>target</code> directory and generate the <code>config.properties</code> file:</p><div class="listingblock"><div class="content"><pre>cd target
java -jar OAuthTutorialClient-1.0.jar requestToken</pre></div></div></li></ol></div><div class="paragraph"><p>You can ignore the connection exception. In the <code>target</code> directory, there is now a <code>config.properties</code> file that contains some temporary keys.</p></div></li><li><p>Generate a public/private key pair that Syndesis needs for access to a Jira server. While you can run these commands anywhere, the first instruction directs you to a particular directory for convenience:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Navigate to the directory that contains the downloaded application.</p></li><li><p>Generate a private key:</p><div class="listingblock"><div class="content"><pre>openssl genrsa -out jira_privatekey.pem 1024</pre></div></div></li><li><p>Obtain a public key:</p><div class="listingblock"><div class="content"><pre>openssl req -newkey rsa:1024 -x509 -key jira_privatekey.pem -out jira_publickey.cer -days 365</pre></div></div><div class="paragraph"><p>This command prompts you to enter information about your Syndesis environment. Alternatively, to avoid responding to prompts, add the <code>-subj</code> option to the command. For example, at the end of the command line above, add something like this:</p></div><div class="listingblock"><div class="content"><pre>-subj "/C=US/ST=New York/L=New York/O=MyCompany Ltd./OU=IT/CN=mysubdomain.mydomain.com"</pre></div></div></li><li><p>Export the keys:</p><div class="listingblock"><div class="content"><pre>openssl pkcs8 -topk8 -nocrypt -in jira_privatekey.pem -out jira_privatekey.pcks8
openssl x509 -pubkey -noout -in jira_publickey.cer  &gt; jira_publickey.pem</pre></div></div><div class="paragraph"><p>You now have four files:</p></div><div class="paragraph"><p><code>jira_privatekey.pcks8</code><br><code>jira_privatekey.pem</code><br><code>jira_publickey.cer</code><br><code>jira_publickey.pem</code></p></div></li><li><p>Obtain the private key, without the header, line breaks, and footer:</p><div class="listingblock"><div class="content"><pre>cat jira_privatekey.pcks8 | grep -v 'PRIVATE'|awk '{print}' ORS=''</pre></div></div></li><li><p>Copy the private key to the clipboard.</p></li></ol></div></li><li><p>Edit the <code>config.properties</code> file:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Navigate to the <code>java/target</code> directory that contains the <code>config.properties</code> file and open the file for editing.</p></li><li><p>In the <code>config.properties</code> file, replace the private key with the private key that you copied to the clipboard.</p></li><li><p>Change the <code>jira_home</code> setting to the URL for your Jira server. Be sure to specify <code>https</code> if your Jira server uses <code>https</code>. Also, you need to escape the colon. For example:</p><div class="listingblock"><div class="content"><pre>jira_home=https\://issues.mycompany.org</pre></div></div></li><li><p>Change the <code>consumer_key</code> setting to <code><strong>Syndesis App</strong></code>. For example:</p><div class="listingblock"><div class="content"><pre>consumer_key=Syndesis App</pre></div></div></li><li><p>Save and close the <code>config.properties</code> file.</p></li></ol></div></li><li><p>Configure your Jira server to recognize your Syndesis environment as a consumer application. You must be logged in to the Jira server as an administrative user.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Select <strong>Settings</strong> (<span class="image"><img src="images/tutorials/EditorSettings.png" alt="cog"></span>) &gt; <strong>Products</strong> &gt; <strong>Application links</strong>.</p></li><li><p>In the <strong>Create new link</strong> input field, enter any URL, for example, enter: <code><a href="https://example.com" class="bare">https://example.com</a></code>.</p><div class="paragraph"><p>This displays a dialog that indicates that no response was received, which is okay because only one-way communication is required.</p></div></li><li><p>Click <strong>Continue</strong> to display the <strong>Link applications</strong> dialog. In this dialog:</p><div class="olist lowerroman"><ol class="lowerroman" type="i"><li><p>In the <strong>Consumer Key</strong> field, enter <code><strong>Syndesis App</strong></code>.</p></li><li><p>At the bottom, select <strong>Create incoming link</strong>.</p></li><li><p>In each of the other fields, enter any value. Each field requires a value. The value that you enter does not matter because no response is needed.</p></li><li><p>Click <strong>Continue</strong> to display another dialog.</p></li><li><p>In the <strong>Consumer Key</strong> field, enter <code><strong>Syndesis App</strong></code>.</p></li><li><p>In the <strong>Consumer Name</strong> field, enter <code><strong>Syndesis App</strong></code>.</p></li><li><p>In the <strong>Public Key</strong> field, paste the public key that is in the <code>jira_publickey.pem</code> file. Be sure to paste only the key without the header and footer. To display the key so that you can copy it, in the directory that contains the <code>jira_publickey.pem</code> file, enter <code>cat jira_publickey.pem</code>.</p></li><li><p>Click <strong>Continue</strong>.</p></li></ol></div></li></ol></div></li><li><p>Obtain a Jira access token that Syndesis needs to access data on your Jira server. In the Jira OAuth documentation that is linked to at the beginning of this procedure, this step is referred to as "The Oauth dance" because there are exchanges among Syndesis, the Jira server, and the Jira administrator.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Navigate to the <code>java/target</code> directory in the directory that contains the command line application that you downloaded in the first step of this whole procedure.</p></li><li><p>Obtain a request token from your Jira server:</p><div class="listingblock"><div class="content"><pre>java -jar OAuthTutorialClient-1.0.jar requestToken</pre></div></div><div class="paragraph"><p>This displays something like:</p></div><div class="listingblock"><div class="content"><pre>Token:          ec3dj4byySM5ek3XW7gl7f4oc99obAlo
Token Secret:   OhONj0eF7zhXAMKZLbD2Rd3x7Dmxjy0d
Retrieved request token. go to https://jira101.atlassian.net/plugins/servlet/oauth/authorize?oauth_token=ec3dj4byySM5ek3XW7gl7f4oc99obAlo to authorize it</pre></div></div></li><li><p>In another browser tab, go to the URL provided in that output. That page welcomes you to Jira and prompts you to allow access to the Syndesis App.</p></li><li><p>Click <strong>Allow</strong>, which displays an <strong>Access Approved</strong> page with a verification code.</p></li><li><p>Copy the verification code to the clipboard and paste it somewhere so that you can easily retrieve it.</p></li><li><p>Obtain an access token by invoking a command such as the following. In the following command line example, the last value is a verification code. In the command that you run, replace the example verification code with the verification code that you copied in the previous step. For example:</p><div class="listingblock"><div class="content"><pre>java -jar OAuthTutorialClient-1.0.jar accessToken qTJkPi</pre></div></div><div class="paragraph"><p>The output from this command is the access token that Syndesis needs to access your Jira server.</p></div></li></ol></div></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The Jira command line application updates the <code>config.properties</code> file so that it contains all values that you need to configure a Jira connection for Syndesis.</p></div><div class="paragraph"><div class="title">Next step</div><p>Create a Jira connection.</p></div></div><div class="sect2"><h3 id="creating-jira-connections_jira">13.2. Creating a Jira connection</h3><div class="paragraph"><p>In an integration, to obtain, create, or update a Jira issue, create a Jira connection, which you then add to an integration. You can add the same connection to any number of integrations.</p></div><div class="paragraph"><p>If the Jira server that you want to connect to uses the OAuth protocol for authenticating access, you must have registered your Syndesis environment as a client of the Jira server that you want to connect to. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#registering-with-jira_jira">Registering Syndesis with a Jira server that uses OAuth</a>.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>For a Jira server that uses basic authentication, you have a Jira user name and password.</p></li><li><p>For a Jira server that uses OAuth, you have access to the <code>config.properties</code> file that contains values for the Jira access token, consumer key, private key, and verification code.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the navigation panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display the available connectors.</p></li><li><p>Click the <strong>Jira</strong> connector.</p></li><li><p>In the <strong>Jira URL</strong> field, enter the URL for the Jira server that you want an integration to connect to, for example, <code><strong><a href="https://issues.mycompany.org" class="bare">https://issues.mycompany.org</a></strong></code>.</p><div class="paragraph"><p>For a connection to a Jira server uses OAuth, the procedure to register your Syndesis environment as a Jira consumer application resulted in a <code>config.properties</code> file. The URL that you specify here should be the same URL that is in that <code>config.preperties</code> file. For example, you would see a line like this in the <code>config.properties</code> file:</p></div><div class="listingblock"><div class="content"><pre>jira_home=https\:issues.mycompany.org</pre></div></div></li><li><p>If this Jira server uses basic authentication:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>User name</strong> field, enter a Jira user name. The connection uses this account to operate on the specified Jira server.</p></li><li><p>In the <strong>Password</strong> field, enter the specified user&#8217;s password.</p></li></ol></div><div class="paragraph"><p>Skip the next step if the Jira server does not use OAuth authentication.</p></div></li><li><p>If the Jira server uses OAuth authentication:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Open the <code>config.properties</code> file that contains the OAuth access token, keys, and verification code. This is the file that is the result of the registration procedure. Copy values from that file and paste them into the connection configuration fields.</p></li><li><p>Copy the <code>access_token</code> value into the <strong>Access Token</strong> field.</p></li><li><p>Copy the <code>consumer_key</code> value into the <strong>Consumer Key</strong> field.</p></li><li><p>Copy the <code>private_key</code> value into the <strong>Private Key</strong> field.</p></li><li><p>Copy the <code>secret</code> value into the <strong>Verification Code</strong> field.</p></li></ol></div></li><li><p>Click <strong>Validate</strong>. Syndesis displays a message that indicates whether it can validate this connection. If validation fails, try again and be sure to enter the correct values.</p></li><li><p>When validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code><strong>Jira Connect 1</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample Jira connection that uses the jkim account.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>Jira Connect 1</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="adding-jira-connection-start_jira">13.3. Obtaining Jira issues or comments to trigger integration execution</h3><div class="paragraph"><p>To trigger integration execution upon obtaining issues or comments from a Jira server, add a Jira connection as a simple integration&#8217;s start connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Jira connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the Jira connection that you want to use to start the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select an action:</p><div class="ulist"><ul><li><p><strong>Retrieve New Comments</strong> uses a query that you specify to search the Jira server. For each issue that the query returns, the connection checks whether a comment has been added since the previous invocation of the query. The connection returns any new comments.</p></li><li><p><strong>Retrieve New Issues</strong> uses a query that you specify to search the Jira server. For each issue that the query returns, the connection checks its creation date. If the issue was created since the previous invocation of the query, the connection returns the issue to the integration. The first time that the connection executes this query, it returns all issues that it finds.</p></li></ul></div></li><li><p>In the <strong>Delay</strong> field, accept the default of 5000 milliseconds (5 seconds) or enter the number of milliseconds that you want to elapse between query invocations.</p></li><li><p>In the <strong>Jira Query Language</strong> field, enter a Jira query. For example:</p><div class="listingblock"><div class="content"><pre>project = GATE AND assignee = jkim AND (status = Open OR status = New OR status = Reopened)</pre></div></div><div class="paragraph"><p>This query finds issues in the <strong>Gateway Online</strong> project, that are assigned to <strong>jkim</strong> and that are unresolved. Every Jira project has a short name and a long name. In this example, the short name of the <strong>Gateway Online</strong> project is <strong>GATE</strong>. In queries, specify a project&#8217;s short name.</p></div><div class="paragraph"><p>The more specific the query is, the less time it takes to search the Jira server. When a query does not have any results, the connection does not trigger integration execution.</p></div></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection starts a simple integration and Syndesis prompts you to choose the integration&#8217;s finish connection.</p></div></div><div class="sect2"><h3 id="adding-jira-connection-add-issue_jira">13.4. Adding an issue to a Jira server</h3><div class="paragraph"><p>In the middle of a flow, or to finish a simple integration, you can connect to a Jira server to add an issue.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Jira connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a simple integration&#8217;s finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add a Jira connection. Skip this step if you are adding a simple integration&#8217;s finish connection.</p></li><li><p>Click the Jira connection that you want the integration to use to connect to a Jira server.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Add Issue</strong>.</p></li><li><p>Configure the action. The required fields are <strong>Issue type ID or name</strong> and <strong>Project key</strong>. For the optional fields, you can enter values now, or, after you add this connection to an integration, you can add a data mapper step before this connection. In the data mapper step, map fields from previous steps to the optional fields in this connection.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Optionally, in the <strong>Assignee</strong> field, enter the Jira user name for the person that you want to assign this issue to.</p></li><li><p>Optionally, in the <strong>Components</strong> field, enter the name of one or more components. Separate multiple names with commas. A Jira administrator defines the components that you can specify.</p></li><li><p>Optionally, in the <strong>Priority ID or name</strong> field, enter a priority for the new issue. A Jira administrator defines the priority values that you can enter.</p></li><li><p>Optionally, in the <strong>Summary</strong> field, enter a brief statement about the issue.</p></li><li><p>In the <strong>Issue type ID or name</strong> field, enter a value that describes the type of the issue. For example, this is often something like <code>Story</code>, <code>Epic</code>, <code>Chore</code>, or <code>Bug</code>.</p><div class="paragraph"><p>In Jira, a user with administrator permissions can see a list of valid issue types by selecting <strong>Project settings</strong> &gt; <strong>Issue types</strong>. A user without these permissions can click in an issue’s type field and a list of allowable values should display.</p></div></li><li><p>Optionally, in the <strong>Watchers</strong> field, enter a comma-separated list of Jira user names. These people receive notifications when this issue is updated.</p></li><li><p>In the <strong>Project Key</strong> field, enter the short name of a Jira project that a Jira administrator has defined. The connection creates the new issue in this project. For example, a project key is something like <code>GATE</code>.</p></li><li><p>Optionally, in the <strong>Description</strong> field, enter any information about this issue that it is helpful to capture.</p></li></ol></div></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div></div><div class="sect2"><h3 id="adding-jira-connection-add-comment_jira">13.5. Adding a comment to a Jira issue</h3><div class="paragraph"><p>In the middle of a flow, or to finish a simple integration, you can connect to a Jira server to add a comment to an issue.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Jira connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a simple integration&#8217;s finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add a Jira connection. Skip this step if you are adding a simple integration&#8217;s finish connection.</p></li><li><p>Click the Jira connection that you want the integration to use to connect to a Jira server.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Add Comment</strong>.</p></li><li><p>In the <strong>Comment</strong> field, enter the comment that you want to add to the issue or plan to add a data mapper step before this connection. In that data mapper step, map the comment from a previous integration step to this connection’s <strong>comment</strong> field.</p></li><li><p>In the <strong>Issue Key</strong> field, enter the Jira identifier for the issue. Examples of issue keys: <code>GATE-1234</code>, <code>Ent-239</code>.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div><div class="paragraph"><div class="title">Next steps</div><p>To map the comment from a previous integration step to this connection, add the connection that provides the comment content and then add a data mapper step before this Jira connection. For example, suppose a database connection obtains customer records. In the data mapper step, map the collection of customer records to the Jira connection’s <strong>comment</strong> field.</p></div></div><div class="sect2"><h3 id="adding-jira-connection-attach-file_jira">13.6. Attaching a file to a Jira issue</h3><div class="paragraph"><p>In the middle of a flow, or to finish a simple integration, you can connect to a Jira server to attach one or more files to an issue. In the integration, there must be a previous step that obtains the file(s) that you want to attach.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Jira connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a simple integration&#8217;s finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add a Jira connection. Skip this step if you are adding a simple integration&#8217;s finish connection.</p></li><li><p>Click the Jira connection that you want the integration to use to connect to the Jira server.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Attach File</strong>.</p></li><li><p>In the <strong>Issue Key</strong> field, enter the Jira identifier of the issue that you want to attach a file to. Examples of issue keys: <code>GATE-1234</code>, <code>Ent-239</code>.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div><div class="paragraph"><div class="title">Next step</div><p>If the integration does not already have an earlier connection that obtains the file(s) that you want to attach to a Jira issue, add that connection to the integration. Make sure that it is before the Jira connection that attaches a file. For example, suppose you add an FTP connection and download one or more files from an FTP server. When the integration executes, the subsequent Jira connection attaches those files to the Jira issue that you specified when you configured the attach file action.</p></div></div><div class="sect2"><h3 id="adding-jira-connection-watchers_jira">13.7. Adding and removing Jira issue watchers</h3><div class="paragraph"><p>In the middle of a flow, or to finish a simple integration, you can connect to a Jira server to add watchers to an issue and/or remove watchers from issue.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Jira connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a simple integration&#8217;s finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add a Jira connection. Skip this step if you are adding a simple integration&#8217;s finish connection.</p></li><li><p>Click the Jira connection that you want the integration to use.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Add Issue</strong>.</p></li><li><p>In the <strong>Issue Key</strong> field, enter the Jira identifier of the issue that you want to add watchers to or remove watchers from. Examples of issue keys: <code>GATE-1234</code>, <code>Ent-239</code>.</p></li><li><p>Optionally, in the <strong>Add Watchers</strong> field, enter a comma-separated list of Jira user names. These people receive notifications when this issue is updated.</p></li><li><p>Optionally, in the <strong>Remove Watchers</strong> field, enter a comma-separated list of Jira user names that are already watching this issue. The connection removes these users from the list of watchers.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div></div><div class="sect2"><h3 id="adding-jira-connection-update-issue_jira">13.8. Updating an issue on a Jira server</h3><div class="paragraph"><p>In the middle of a flow, or to finish a simple integration, you can connect to a Jira server to update an issue. The connection can update one or more issue fields. If the issue being updated already has a value for a field, the connection replaces that value with any value you specify for the connection or that you map to a connection field. For example, if the issue already has a description, and you specify text in the <strong>Description</strong> field when you configure the <strong>Update Issue</strong> action, the connection replaces the description that was there with this new description.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Jira connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a simple integration&#8217;s finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add a Jira connection. Skip this step if you are adding a simple integration&#8217;s finish connection.</p></li><li><p>Click the Jira connection that you want the integration to use to connect to the Jira server.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Update Issue</strong>.</p></li><li><p>Configure the action. The only required field is <strong>Issue Key</strong>. For the optional fields, you can enter values now, or, after you add this connection to an integration, you can add a data mapper step before this connection. In the data mapper step, map fields from previous steps to the optional fields in this connection.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Optionally, in the <strong>Assignee</strong> field, enter the Jira user name for the person that you want to assign this issue to.</p></li><li><p>Optionally, in the <strong>Components</strong> field, enter the name of one or more components. Separate multiple names with commas. A Jira administrator defines the components that you can specify.</p></li><li><p>In the <strong>Issue Key</strong> field, enter the Jira identifier for the issue that you want the connection to update. Examples of issue keys: <code>GATE-1234</code>, <code>Ent-239</code>.</p></li><li><p>Optionally, in the <strong>Priority ID or name</strong> field, enter a priority for the new issue. A Jira administrator defines the priority values that you can enter.</p></li><li><p>Optionally, in the <strong>Summary</strong> field, enter a brief statement about the issue.</p></li><li><p>In the <strong>Issue type ID or name</strong> field, enter a value that describes the type of the issue. For example, this is often something like <code>Story</code>, <code>Epic</code>, <code>Chore</code>, or <code>Bug</code>.</p></li><li><p>Optionally, in the <strong>Description</strong> field, enter any information about this issue that it is helpful to capture.</p></li></ol></div></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div></div><div class="sect2"><h3 id="adding-jira-connection-transition-issue_jira">13.9. Transitioning a Jira issue to a new status</h3><div class="paragraph"><p>In the middle of a flow, or to finish a simple integration, you can connect to a Jira server to transition an issue to a new status, or to a new workflow stage. A Jira administrator defines what it means for an issue to transition as well as the values for transition IDs.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Jira connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a simple integration&#8217;s finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add a Jira connection. Skip this step if you are adding a simple integration&#8217;s finish connection.</p></li><li><p>Click the Jira connection that you want the integration to use to connect to the Jira server.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Transition Issue</strong>.</p><div class="paragraph"><p>You do not need to specify any values to configure the transition issue action. Instead, you can map values from previous integration steps to the fields in the this connection.</p></div></li><li><p>Optionally, in the <strong>Comment</strong> field, enter a comment that you want to add to the issue.</p></li><li><p>Optionally, in the <strong>Issue Key</strong> field, enter the Jira identifier for the issue that is transitioning. Examples of issue keys: <code>GATE-1234</code>, <code>Ent-239</code>.</p></li><li><p>Optionally, in the <strong>ID of the transition</strong> field, enter an integer that a Jira administrator has associated with a particular transition, such as when a Jira moves from being new to being worked on, or when it moves from being worked on to being tested.</p><div class="paragraph"><p>A Jira administrator can view transition IDs in a project’s workflow display. If you do not have administration permissions, obtain the allowed transition IDs from a Jira administrator.</p></div></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div><div class="paragraph"><div class="title">Next steps</div><p>If you did not specify a value in each <strong>Transition Issue</strong> field, ensure that the integration has a step that obtains the value for each field. After the integration has all required connections, add a data mapper step before the Jira connection that transitions an issue. In the data mapper step, map fields from previous steps to the fields in the Jira connection that transitions an issue.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-kafka_connectors">14. Connecting to Kafka</h2><div class="sectionbody"><div class="paragraph"><p>Apache Kafka is a distributed streaming platform that you can use to obtain and publish data. In an integration, you can subscribe for data from a Kafka topic that you specify or publish data to a Kafka topic that you specify. To do this, enable Syndesis to discover the Kafka brokers in the cluster. Then create a connection to Kafka and add that connection to an integration flow. Details are in the following topics:</p></div><div class="ulist"><ul><li><p><a href="#enabling-auto-discovery-of-kafka-brokers_kafka">Enabling auto-discovery of Kafka brokers/AMQ Streams</a></p></li><li><p><a href="#creating-kafka-connections_kafka">Creating a connection to a Kafka broker</a></p></li><li><p><a href="#adding-kafka-connection-start_kafka">Obtaining data from a Kafka broker to trigger integration execution</a></p></li><li><p><a href="#adding-kafka-connection-finish-middle_kafka">Publishing data to a Kafka broker</a></p></li></ul></div><div class="sect2"><h3 id="enabling-auto-discovery-of-kafka-brokers_kafka">14.1. Enabling auto-discovery of Kafka brokers/AMQ Streams</h3><div class="paragraph"><p>In an integration, if you plan to connect to a Kafka broker that is an AMQ Streams instance, enable auto-discovery of such brokers before you create the Kafka connection. This makes creating the Kafka connection easier because Syndesis can provide Kafka broker details that are required to configure the connection.</p></div><div class="paragraph"><p>To enable auto-discovery, you give an OpenShift user account privileges that allow that account to see resources on the cluster. The particular privileges that you assign let the account discover different subsets of brokers.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You installed the <code>oc</code> client tool and it is connected to the cluster in which you want to enable auto-discovery of Kafka brokers.</p></li><li><p>You have cluster administration permissions.</p></li><li><p>Kafka broker(s) (AMQ Streams instances) that you want to connect to in an integration are installed in the same cluster as Syndesis.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>Log in to OpenShift with an account that has cluster administration permissions. For example:</p><div class="listingblock"><div class="content"><pre>$ oc login -u admin -p admin</pre></div></div></li><li><p>Ensure that the current project is the project in which Syndesis is running. To view the current project, invoke the following command:</p><div class="listingblock"><div class="content"><pre>$ oc project</pre></div></div></li><li><p>Ensure that the Kafka brokers that you want an integration to connect to are installed in the cluster.</p><div class="paragraph"><p>For example, to install Strimzi on minishift, follow the instructions at <a href="https://strimzi.io/quickstarts/okd/" class="bare">https://strimzi.io/quickstarts/okd/</a></p></div></li><li><p>Invoke the following command to apply the Strimzi installation file. In the command line, replace <code>myproject</code> with the name of the project in which Syndesis is running.</p><div class="listingblock"><div class="content"><pre>oc apply -f https://github.com/strimzi/strimzi-kafka-operator/releases/download/0.15.0/strimzi-cluster-operator-0.15.0.yaml -n myproject</pre></div></div></li><li><p>Invoke the following command to provision the Apache Kafka cluster. Replace <code>myproject</code> with the name of the project in which Syndesis is running.</p><div class="listingblock"><div class="content"><pre>oc apply -f https://raw.githubusercontent.com/strimzi/strimzi-kafka-operator/0.15.0/examples/kafka/kafka-persistent-single.yaml -n myproject</pre></div></div></li><li><p>Invoke the following command to deploy Kafka. Be sure to replace <code>mycluster</code> with the name of the cluster in which you are enabling auto-discovery, and replace <code>myproject</code> with the name of the project in which Syndesis is running.</p><div class="listingblock"><div class="content"><pre>oc wait kafka/mycluster --for=condition=Ready --timeout=300s -n myproject</pre></div></div></li><li><p>Create a producer for the Kafka broker that you specify. For example, in the following command:</p><div class="ulist"><ul><li><p><code>myproject</code> is the name of the project in which Fuse Online is running.</p></li><li><p><code>my-cluster-kafka-bootstrap:9092</code> identifies a Kafka broker.</p></li><li><p><code>my-topic</code> is the name of the Kafka topic that a Kafka connection will be subscribed to.</p><div class="listingblock"><div class="content"><pre class="nowrap">oc -n myproject run kafka-producer -ti --image=strimzi/kafka:0.15.0-kafka-2.3.1 --rm=true --restart=Never -- bin/kafka-console-producer.sh --broker-list my-cluster-kafka-bootstrap:9092 --topic my-topic</pre></div></div></li></ul></div></li><li><p>Give privileges that enable access to Kafka brokers in the cluster to an <code>oc</code> user account. How your cluster is configured determines the privileges that you need to grant. For example, for a Strimzi cluster on minishift, you can do the following:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Create a cluster role that can access Kafka/Strimzi resources in the cluster. In the following example, <code>kafkas.kafka.strimzi.io-view</code> is the name of the new role:</p><div class="listingblock"><div class="content"><pre class="nowrap">oc create clusterrole kafkas.kafka.strimzi.io-view --verb=get,list --resource=kafkas --resource=crd</pre></div></div></li><li><p>Add this cluster role to an <code>oc</code> user. In the following example, <code>syndesis-server</code> is the name of the <code>oc</code> user account:</p><div class="listingblock"><div class="content"><pre class="nowrap">oc adm policy add-cluster-role-to-user kafkas.kafka.strimzi.io-view -z syndesis-server</pre></div></div></li></ol></div></li></ol></div><div class="paragraph"><div class="title">Result</div><p>In Syndesis, when you create a Kafka connection, the connection configuration page displays the Kafka brokers that are available. You select the broker that you want the connection to access.</p></div></div><div class="sect2"><h3 id="creating-kafka-connections_kafka">14.2. Creating a connection to a Kafka broker</h3><div class="paragraph"><p>In an integration, to subscribe for data from a Kafka topic or publish data to a Kafka topic, create a connection to Kafka and then add that connection to an integration.</p></div><div class="admonitionblock important"><table><tr><td class="icon"><div class="title">Important</div></td><td class="content">In this release, connections to Kafka do not support SSL. It is expected that this will change in a future release.</td></tr></table></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You enabled auto-discovery of Kafka brokers in the cluster. Or, you know the URI for the Kafka broker that you want to connect to.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display connectors.</p></li><li><p>Click the <strong>Kafka</strong> connector.</p></li><li><p>In the <strong>Kafka broker URIs</strong> field, select the broker that you want this connection to access, or enter a comma separated list of Kafka broker URIs. Each URI should be in the form <em>host:port</em>.</p></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether validation is successful. If validation fails, revise the input parameter and try again.</p></li><li><p>If validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, you might enter <code>Kafka West</code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection.</p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>Kafka West</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="adding-kafka-connection-start_kafka">14.3. Obtaining data from a Kafka broker to trigger integration execution</h3><div class="paragraph"><p>To trigger execution of an integration upon receiving data from a Kafka broker, add a Kafka connection as the start connection. When the integration is running, the Kafka connection continuously watches for data in the Kafka topic that you specify. When the connection finds new data, it passes that data to the next step in the integration.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You created a connection to a Kafka broker.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the Kafka connection that you want to use to start the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select the <strong>Subscribe</strong> action to receive data from the topic that you specify.</p></li><li><p>In the <strong>Topic Name</strong> field, click the down carat to display a list of topics and click the topic that you want to subscribe to. Or, type a topic name to create that topic.</p></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s output type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the Kafka connection output to a subsequent step then you must specify the data type. The data mapper does not recognize unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The integration now has a start connection and Syndesis prompts you to choose the finish connection.</p></div></div><div class="sect2"><h3 id="adding-kafka-connection-finish-middle_kafka">14.4. Publishing data to a Kafka broker</h3><div class="paragraph"><p>In an integration, you can publish data to a Kafka broker in the middle of a flow or to finish a simple integration. To do this, add a Kafka connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a connection to a Kafka broker.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add a Kafka connection. Skip this step if you are adding a simple integration&#8217;s finish connection.</p></li><li><p>Click the Kafka connection that you want to use to publish messages.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Publish</strong>.</p></li><li><p>In the <strong>Topic Name</strong> field, click the down carat to display a list of topics and click the topic that you want to publish to.</p></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s input type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection input in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-knative-resources_connectors">15. Connecting to Knative resources</h2><div class="sectionbody"><div class="paragraph"><p>You can create a simple integration that does any of the following:</p></div><div class="ulist"><ul><li><p>Connects to a Knative channel to obtain or send messages</p></li><li><p>Exposes the integration as a Knative service</p></li><li><p>Calls a Knative service</p></li></ul></div><div class="paragraph"><p>The exchanged messages can be of any format, however, messages are typically in JSON format.</p></div><div class="paragraph"><p>For example, a simple integration might periodically poll Salesforce for new leads. When a Salesforce connection finds a new lead it can send a message that contains the details to a Knative channel. Multiple simple integrations can obtain messages from that same Knative channel. Each integration can perform different actions on the lead data.</p></div><div class="paragraph"><p>See the following topics for details:</p></div><div class="ulist"><ul><li><p><a href="#enabling-connections-to-knative-resources_knative">Enabling connections to Knative resources</a></p></li><li><p><a href="#subscribing-to-a-knative-channel-to-obtain-messages_knative">Subscribing to a Knative channel to obtain messages</a></p></li><li><p><a href="#sending-messages-to-a-knative-channel_knative">Sending messages to a Knative channel</a></p></li><li><p><a href="#exposing-a-simple-integration-as-a-knative-service_knative">Exposing a simple integration as a Knative service</a></p></li><li><p><a href="#calling-a-knative-service-from-a-simple-integration_knative">Calling a Knative service from a simple integration</a></p></li></ul></div><div class="sect2"><h3 id="enabling-connections-to-knative-resources_knative">15.1. Enabling connections to Knative resources</h3><div class="paragraph"><p>You must enable Knative connections before you can add them to simple integrations.</p></div><div class="paragraph"><p>Knative connections might have been enabled when Syndesis was installed. To check this, view the content of the <code>syndesis</code> custom resource. If the <code>camelk</code> and <code>knative</code> add-ons specify <code>enabled: true</code> then Knative connections are already enabled.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>The <code>oc</code> client tool is installed in, and connected to, the OCP cluster in which Syndesis is running.</p></li><li><p>Syndesis is running on OpenShift Container Platform on-site in a customer-managed environment.</p></li><li><p>The Syndesis runtime is Camel K.</p></li><li><p>In the cluster in which Syndesis is installed, each Knative resource that you want an integration to connect to is also installed. Before you can install Knative resources, you must install the <a href="https://docs.openshift.com/container-platform/4.3/serverless/installing-openshift-serverless.html">OpenShift Serverless Operator</a> and the <a href="https://openshift-knative.github.io/docs/docs/proc_knative-eventing.html">Knative Eventing Operator</a>.</p></li><li><p>You have permission to install Syndesis.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>Log in to OpenShift with an account that has permission to install Syndesis. For example:</p><div class="listingblock"><div class="content"><pre>$ oc login -u developer -p developer</pre></div></div></li><li><p>Switch to the project in which Syndesis is running, for example:</p><div class="listingblock"><div class="content"><pre>$ oc project my-integration-project</pre></div></div></li><li><p>Edit the <code>syndesis</code> custom resource:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Invoke the following command, which typically opens the resource in an editor:</p><div class="listingblock"><div class="content"><pre>oc edit syndesis</pre></div></div></li><li><p>Update the resource to specify the following:</p><div class="listingblock"><div class="content"><pre>spec:
  addons:
     camelk:
       enabled: true
     knative:
       enabled: true</pre></div></div></li><li><p>Save the resource.</p><div class="paragraph"><p>Saving this change to the <code>syndesis</code> custom resource triggers <code>syndesis-operator</code>, which is responsible for installing Syndesis, to redeploy <code>syndesis-server</code>.</p></div><div class="paragraph"><p>If <code>camelk</code> and <code>knative</code> are already enabled, you can close the file. Connections to Knative resources are enabled.</p></div></li></ol></div></li></ol></div><div class="paragraph"><div class="title">Result</div><p>In the Syndesis console, on the <strong>Connections</strong> page, a Knative connection is now available. You can add the same Knative connection to any number of simple integrations. Configuration of the connection action, specifies the Knative resource that the connection accesses.</p></div></div><div class="sect2"><h3 id="subscribing-to-a-knative-channel-to-obtain-messages_knative">15.2. Subscribing to a Knative channel to obtain messages</h3><div class="paragraph"><p>To trigger integration execution upon receiving a message from a Knative channel, add a Knative connection as a simple integration’s start connection. An integration that starts this way automatically scales down to 0 pods when no messages have been received from the channel for a specified number of minutes. The default is 1 minute.</p></div><div class="paragraph"><p>This automatic scaling saves resources, which is an advantage over simple integrations that start with other kinds of connections, such as a connection to an AMQ broker.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>Connections to Knative resources are enabled.</p></li><li><p>The Knative resource that you want to obtain messages from is in the same cluster as Syndesis</p></li><li><p>You know the name of the Knative channel that you want the connection to obtain messages from.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the Knative connection.</p></li><li><p>Select the <strong>Receive from Channel</strong> action.</p></li><li><p>Click in the <strong>Channel name</strong> field to display a list of available Knative channels.</p></li><li><p>Select the Knative channel name for the resource that you want to obtain messages from.</p></li><li><p>Click <strong>Next</strong> to specify the <strong>Receive from Channel</strong> action’s output type. This is the type that the connection passes to the next step in the integration.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection output in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div></li></ol></div><div class="paragraph"><div class="title">Result</div><p>Syndesis prompts you to add the simple integration’s finish connection.</p></div><div class="paragraph"><p>During execution, each time the selected Knative channel receives a new message, the Knative connection passes the message to the next step in the integration,</p></div><div class="paragraph"><div class="title">Next steps</div><p>Add all needed connections to the integration. Then add a data mapper step after the Knative connection that starts the integration. Map the source <code>message</code> field to a target field in the next connection.</p></div></div><div class="sect2"><h3 id="sending-messages-to-a-knative-channel_knative">15.3. Sending messages to a Knative channel</h3><div class="paragraph"><p>In a simple integration, a Knative connection can send a message to a Knative channel in the middle of a flow or to finish a simple integration. To do this, add a Knative connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>Knative connections are enabled.</p></li><li><p>The Knative resource that you want to send messages to is installed in the same cluster as Syndesis.</p></li><li><p>You know the name of the Knative channel that you want the connection to send messages to.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the Knative connection.</p></li><li><p>Select the <strong>Send to Channel</strong> action.</p></li><li><p>Click in the <strong>Channel name</strong> field to display a list of the Knative channels that are available in the cluster that is running Syndesis.</p></li><li><p>Select the channel that you want the integration to send messages to.</p></li><li><p>Click <strong>Next</strong> to specify the <strong>Send to Channel</strong> action’s input type. This is the type that the integration sends to the Knative channel.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, or if the output from the previous integration step is the expected type, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection input in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div></li></ol></div><div class="paragraph"><div class="title">Result</div><p>In the integration visualization, the connection appears where you added it. During execution, this connection sends a message to the selected Knative channel.</p></div><div class="paragraph"><div class="title">Next steps</div><p>Add all needed connections to the integration. Then add a data mapper step just before the Knative connection that sends messages to a Knative channel. Map a source field to the Knative connection target <code>message</code> field.</p></div></div><div class="sect2"><h3 id="exposing-a-simple-integration-as-a-knative-service_knative">15.4. Exposing a simple integration as a Knative service</h3><div class="paragraph"><p>In a simple integration, the start connection can be a Knative connection that exposes the integration as a Knative service. An integration that starts this way automatically scales down to 0 pods when there have been no calls to the service for a specified number of minutes. The default is 1 minute.</p></div><div class="paragraph"><p>This automatic scaling saves resources, which is an advantage over simple integrations that start with other kinds of connections, such as a connection to an AMQ broker.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>Connections to Knative resources are enabled.</p></li><li><p>Knative is installed in the same cluster that Syndesis is running in.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the Knative connection.</p></li><li><p>Select the <strong>Expose as Service</strong> action.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>Syndesis prompts you to add the simple integration’s finish connection.</p></div><div class="paragraph"><p>When Syndesis publishes the integration, the Camel K runtime creates a Knative <code>serving.knative.dev</code> service. This service:</p></div><div class="ulist"><ul><li><p>Is an alternative to a Kubernetes deployment object</p></li><li><p>Can automatically scale to 0 after a period of no activity</p></li><li><p>Should not be confused with the Kubernetes Service</p></li></ul></div><div class="paragraph"><p>Publication makes the integration available to be called at the root path ( / ). Clients can invoke execution of the integration by calling it as an HTTP endpoint and passing data as needed. Typically, the passed data is in JSON format.</p></div><div class="paragraph"><p>In this release, it is expected that the primary use for exposing an integration as a Knative service is that other Syndesis integrations call that service. In this scenario, the integration that calls the service selects the service name and does not need to specify a path.</p></div></div><div class="sect2"><h3 id="calling-a-knative-service-from-a-simple-integration_knative">15.5. Calling a Knative service from a simple integration</h3><div class="paragraph"><p>In a simple integration, a Knative connection can call a Knative service in the middle of the integration or to finish the integration. To do this, add a Knative connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>Knative connections are enabled.</p></li><li><p>You know the name of the Knative service that you want the connection to call. The service is running in the same cluster as Syndesis.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the Knative connection.</p></li><li><p>Select the <strong>Call Service</strong> action.</p></li><li><p>Click in the <strong>Service name</strong> field to display a list of the Knative services that are available in the cluster that is running Syndesis.</p></li><li><p>Select the service that you want the integration to call.</p><div class="paragraph"><p>If you exposed an integration as a Knative service and that is the service that you want to call, the name of the service is similar, if not identical, to the name of the integration.</p></div></li><li><p>Click <strong>Next</strong> to specify the <strong>Call Service</strong> action’s input type. This is the type that the integration sends to the Knative service.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, or if the output from the previous integration step is the expected type, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow this subset of instructions.</p><div class="paragraph"><p>A structured data type is recommended. For example, if you want to map the connection input in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div></li><li><p>Specify the <strong>Call Service</strong> action’s output type.</p><div class="paragraph"><p>This is the type that the Knative service returns to the integration when the Knative connection is a middle connection.</p></div><div class="paragraph"><p>Repeat the previous subset of instructions to specify the output type. Or, if the Knative service response is empty, accept <strong>Type specification not required</strong>.</p></div></li><li><p>Click <strong>Next</strong> to add the connection.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>In the integration visualization, the connection appears where you added it.</p></div><div class="paragraph"><p>During execution, this connection calls the specified Knative service. The call includes the output from the previous integration step (the step before this Knative connection). If this Knative connection is a middle connection, the connection passes the service output to the next step in the integration.</p></div><div class="paragraph"><div class="title">Next steps</div><p>Add any other needed connections to the integration. If you specified input and/or output types, add data mapper steps before and/or after the Knative connection and map fields as needed.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-kudu_connectors">16. Connecting to Apache Kudu</h2><div class="sectionbody"><div class="paragraph"><p>Apache Kudu is a columnar storage manager developed for the Apache Hadoop platform. A Syndesis integration can connect to a Kudu data store to scan a table, which returns all records in the table to the integration, or to insert records into a table. Details are in the following topics:</p></div><div class="ulist"><ul><li><p><a href="#create-kudu-connections_kudu">Creating a connection to an Apache Kudu data store</a></p></li><li><p><a href="#add-kudu-connection-get-records_kudu">Triggering an integration when scanning returns records from a Kudu table</a></p></li><li><p><a href="#add-kudu-connection-add-records_kudu">Inserting records into a Kudu table</a></p></li></ul></div><div class="sect2"><h3 id="create-kudu-connections_kudu">16.1. Creating a connection to an Apache Kudu data store</h3><div class="paragraph"><p>In an integration, to obtain records from or insert records into a Kudu table, create a connection to a Kudu master host and then add that connection to an integration.</p></div><div class="ulist"><div class="title">Prerequisite</div><ul><li><p>You must know the IP address or the hostname for the Kudu master host that you want to connect to.</p></li><li><p>You must know the port that Kudu is listening on.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display connectors.</p></li><li><p>Click the <strong>Apache Kudu</strong> connector.</p></li><li><p>To configure the connection:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Address of Kudu master host</strong> field, enter the hostname or the IP address of the Kudu master host.</p></li><li><p>In the <strong>Port to establish connection to</strong> field, enter the port that Kudu is listening on. The default is <code>7051</code>.</p></li></ol></div></li><li><p>Click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, you might enter <code>Kudu North</code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection.</p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>Kudu North</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="add-kudu-connection-get-records_kudu">16.2. Triggering an integration when scanning returns records from a Kudu table</h3><div class="paragraph"><p>To trigger execution of an integration upon obtaining data from a Kudu table, add a Kudu connection to a simple integration as its start connection. When the integration is running, the Kudu connection scans the table that you specified at the interval that you specified, obtains all records in the table, and passes a collection of the records to the next step in the integration.</p></div><div class="paragraph"><p>A Kudu connection can obtain data from only one table. Between scans, if there are no changes to the data in the table that the connection scans, then the next scan returns the same data as the previous scan.</p></div><div class="ulist"><div class="title">Prerequisite</div><ul><li><p>You created a Kudu connection.</p></li><li><p>The table that you want to obtain records from exists.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the Kudu connection that you want to use to start the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select the <strong>Scan a Kudu table</strong> action.</p></li><li><p>In the <strong>Table</strong> field, enter the name of the table that you want to obtain records from.</p></li><li><p>In the <strong>Period</strong> field, accept the default of one minute, or enter the interval at which you want the connection to scan the table and return the records that are in the table.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection is the simple integration&#8217;s start connection.</p></div><div class="paragraph"><div class="title">Next steps</div><p>Add the integration&#8217;s finish connection and any other connections that you want to include in the integration. When the integration contains all the connections that are needed, consider whether you need to split the collection of records that the Kudu connection returns. If you want to execute integration steps for each record that you obtained from the Kudu table, then after the Kudu connection, add a split step. Also, you probably need to follow the Kudu connection with a data mapping step that maps data obtained from Kudu to fields in subsequent connections in the integration.</p></div></div><div class="sect2"><h3 id="add-kudu-connection-add-records_kudu">16.3. Inserting records into a Kudu table</h3><div class="paragraph"><p>In an integration, you can add records to a Kudu table in the middle of a flow or to finish a simple integration. To do this, add a Kudu connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Kudu connection.</p></li><li><p>You are creating or editing an integration and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li><li><p>The table that you want to add records to exists.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the Kudu connection that you want to use. Note that when a Kudu connection inserts data, the connection does not return anything.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Insert data into a Kudu table</strong>.</p></li><li><p>To configure the action, in the <strong>Table</strong> field, specify the name of the table to add records to.</p><div class="paragraph"><p>It is important for you to have an understanding of how the Kudu table that you are adding records to is set up. For example, a Kudu table that you are adding records to might have a unique key. If you try to add a record that contains a key value that is already in the table, the Kudu connection does not add that record.</p></div></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div><div class="paragraph"><div class="title">Next steps</div><p>Consider whether you need to split a collection of records into individual records that a Kudu connection can add to a table. To do this, add a split step to the integration. The split step executes the subsequent steps in the integration once for each record. Also, you probably need a data mapper step before a Kudu connection that adds records to a table.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-mongodb_connectors">17. Connecting to MongoDB</h2><div class="sectionbody"><div class="paragraph"><p>MongoDB is a distributed NoSQL database. A Syndesis integration can obtain content from a MongoDB database or update content in a MongoDB database. To do this, create a MongoDB connection, and add it to an integration.</p></div><div class="paragraph"><p>Details for connecting to a MongoDB database are in the following topics:</p></div><div class="ulist"><ul><li><p><a href="#creating-mongodb-connections_mongodb">Creating a connection to a MongoDB database</a></p></li><li><p><a href="#adding-mongodb-connections-read_mongodb">Triggering an integration when a MongoDB collection is updated</a></p></li><li><p><a href="#adding-mongodb-connections-write_mongodb">Operating on documents in a MongoDB collection</a></p></li></ul></div><div class="sect2"><h3 id="creating-mongodb-connections_mongodb">17.1. Creating a connection to a MongoDB database</h3><div class="paragraph"><p>Create a MongoDB connection so that you can connect to a MongoDB database in an integration.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You must know the host name for the MongoDB database that you want to connect to.</p></li><li><p>You must have a user name and password that authorizes access to the MongoDB database.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display connectors.</p></li><li><p>Click the <strong>MongoDB</strong> connector.</p></li><li><p>Configure the connection:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Database host(s)</strong> field, specify one or more MongoDB database hosts that this connection can access. Separate multiple specifications of <code><em>host:port</em></code> with commas. Replace <code><em>host</em></code> with a host name, a virtual host name, or an IP address. For example: <code>mongodb0.example.com:1234,mongodb1.example.com:1234</code>.</p></li><li><p>In the <strong>Username</strong> field, enter a user name that is authorized to access the database.</p></li><li><p>In the <strong>Password</strong> field, enter the password for the user name that you specified.</p></li><li><p>Optional. In the <strong>Administration database</strong> field, if the database has an administration database, enter the name of the MongoDB administration database that is used to grant access permission. A MongoDB administrator should let you know whether the database that you want to access has an administration database.</p></li><li><p>Optional. In the <strong>Replica set name</strong> field, specify the name of the MongoDB replica set (cluster) that the connection can access.</p></li><li><p>In the <strong>Database</strong> field, enter the name of the MongoDB database that contains the collection(s) that you want the connection to read.</p></li></ol></div></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether validation is successful. If validation fails, revise the input parameter(s) and try again.</p></li><li><p>When validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, you might enter <code>MongoDB North</code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection.</p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>MongoDB North</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div><div class="paragraph"><div class="title">Next step</div><p>Add your MongoDB connection to an integration.</p></div></div><div class="sect2"><h3 id="adding-mongodb-connections-read_mongodb">17.2. Triggering an integration when a MongoDB collection is updated</h3><div class="paragraph"><p>To trigger execution of an integration when a document is added to a MongoDB collection, add a MongoDB connection to a simple integration as its start connection. When the integration is running, the MongoDB connection monitors the database collection that you specified when you created the integration. Insertion of a new document into the collection that the connection is configured to monitor triggers execution of the integration. The MongoDB connection returns the new document to the integration and this data is available to the next step in the integration.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a MongoDB connection.</p></li><li><p>You know the name of the MongoDB collection that you want the connection to read.</p></li><li><p>If the collection that you want the connection to monitor is a capped collection, then you must also know:</p><div class="ulist"><ul><li><p>The name of the MongoDB collection field that tracks incoming documents.</p></li><li><p>Whether persistent tracking is enabled for the database that contains the collection.</p></li><li><p>How to specify tail tracking information related to the data that you want the connection to read. MongoDB connections can use tail tracking information to resume an action after an unexpected connection termination. Tail tracking ensures that when the connection resumes its activity, it does not return duplicate data to the integration nor does it drop any data that needs to be returned to the integration.</p></li></ul></div></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the MongoDB connection that is configured to access the database that you want the integration to obtain updates from.</p></li><li><p>On the <strong>Choose an action</strong> page, select one of these actions:</p><div class="ulist"><ul><li><p><strong>Retrieve documents (stream)</strong> is typically the action that you want to select. It retrieves data from non-capped collections.</p></li><li><p><strong>Retrieve documents (tail)</strong> is the action for retrieving data from capped collections.</p></li></ul></div></li><li><p>Configure the action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Collection name</strong> field, enter the name of the MongoDB collection that you want the connection to read.</p><div class="paragraph"><p>If you are configuring the <strong>Retrieve documents (stream)</strong> action, this is the only required parameter. Go to step 6. If you are configuring the <strong>Retrieve documents (tail)</strong> action, follow the remaining substeps.</p></div></li><li><p>In the <strong>Collection field used to track incoming documents</strong> field, enter the name of the relevant MongoDB collection field. This field contains data that can be sorted, such as a date or an ID.</p></li><li><p>Select the <strong>Persistent tracking enabled</strong> checkbox if persistent tracking is enabled for the database that you want the connection to read.</p></li><li><p>Optional. In the <strong>Unique id to identify this tracking process</strong> field, specify a unique ID if there are multiple consumers that monitor the same collection. For more information, see the Camel documentation for <a href="https://camel.apache.org/components/latest/mongodb-component.html#_tailable_cursor_consumer">Tailable Cursor Consumer</a>.</p></li><li><p>Optional. In the <strong>DB used to store tail tracking</strong> field, enter the name of the MongoDB database that contains tail tracking information.</p></li><li><p>Optional. In the <strong>Collection used to store tail tracking</strong> field, enter the name of the collection that contains tail tracking information.</p></li><li><p>Optional. In the <strong>Field used to store tail tracking</strong> field, enter the name of the field that stores tail tracking information for the collection that this connection is reading.</p></li></ol></div><div class="paragraph"><p>To identify the tail tracking field, you can specify the tail tracking database or tail tracking collection. With one of these pieces of information, the connection can find the tail tracking field.</p></div></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s output type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection output in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The integration now has a start connection and Syndesis is prompting you to choose the finish connection.</p></div><div class="paragraph"><p>During execution, the connection returns the inserted document in JSON format.</p></div></div><div class="sect2"><h3 id="adding-mongodb-connections-write_mongodb">17.3. Operating on documents in a MongoDB collection</h3><div class="paragraph"><p>In an integration, you can search for, update, delete, count, or add a document to a MongoDB collection. To do this, add a MongoDB connection to the middle of a flow or as a simple integration’s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a MongoDB connection.</p></li><li><p>You know the name of the MongoDB collection that you want the connection to operate on.</p></li><li><p>You are creating or editing an integration and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add a MongoDB connection. Skip this step if you are adding a simple integration&#8217;s finish connection.</p></li><li><p>Click the MongoDB connection that you want to use.</p></li><li><p>On the <strong>Choose an action</strong> page, select the action that you want the connection to perform.</p></li><li><p>To configure the action, in the <strong>Collection name</strong> field, enter the name of the collection that you want the connection to operate on.</p><div class="paragraph"><p>If you selected the <strong>Insert</strong> action:</p></div><div class="ulist"><ul><li><p>You are done configuring the connection.</p></li><li><p>Ensure that the data that the integration passes to this MongoDB connection contains JSON notation that specifies the document to add to the collection.</p></li><li><p>Click <strong>Next</strong> to add this connection to the integration.</p></li></ul></div></li><li><p>For all other actions, the following table provides information about what to specify in the second field for configuring the action.</p><div class="paragraph"><p>The second field is a JSON notation expression that identifies the document(s) to operate on and possibly, details for the operation. If you plan to map an incoming source field to an identifier in the expression, specify <code>:#<em>variable-name</em></code> in the expression.</p></div><div class="paragraph"><p>For completeness, the <strong>Insert</strong> action is described in this table as well.</p></div><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width:16.6666%"><col style="width:16.6666%"><col style="width:33.3333%"><col style="width:33.3335%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">What it does</th><th class="tableblock halign-left valign-top">Parameter field</th><th class="tableblock halign-left valign-top">Returns</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Count</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Counts the number of documents that satisfy the count expression that you specify.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">In the <strong>Count expression</strong> field, specify a JSON filter expression in the form of <code>{"test":"unit"}</code>. The action counts the number of documents that have a <code>test</code> attribute value of <code>unit</code>.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">An instance of <code>java.lang.Long</code> that specifies the number of documents that were found.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Delete</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Removes one or more documents from the collection.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">In the <strong>Delete expression</strong> field, specify a JSON expression in the form of <code>{"test":"unit"}</code>. The operation removes each document whose <code>test</code> attribute has a value of <code>unit</code>.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">An instance of <code>java.lang.Long</code> that specifies the number of documents that were deleted.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Find</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Looks for all documents that match the filter expression that you specify.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">In the <strong>Filter expression</strong> field, specify a JSON notation string that identifies one or more documents.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">JSON notation that specifies a list (an array). Each list element identifies a document that matches the filter expression and provides the document content. If no documents are found, the action returns an empty list.<br><br>You must be familiar with the data model of the collection. If the collection adheres to a JSON schema, you must be familiar with this schema because the returned list elements adhere to this schema. For additional information, see <a href="https://docs.mongodb.com/manual/data-modeling/">MongoDB Data Models</a>.<br><br>To use output data from the <strong>Find</strong> action in a subsequent data mapper step, the collection must adhere to a JSON schema. This enables the data mapper to display data fields. For more information, see <a href="https://docs.mongodb.com/manual/core/schema-validation/#json-schema">MongoDB documentation for JSON schema validation</a>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Insert</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Adds one or more documents to the collection.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">There is no action configuration parameter for inserting a document. The data coming in to the MongoDB connection must contain JSON notation that specifies one ore more documents to add to the collection.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">JSON notation that specifies a list (an array). Each list element is a document that this action inserted.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Update</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Updates one or more documents in the collection.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">In the <strong>Filter criteria</strong> field, specify an array of 2 arguments. The first argument is a filter expression that identifies the documents to update. The second argument is a MongoDB update statement that specifies how to update the documents. Update statement format is described in <a href="https://docs.mongodb.com/manual/reference/method/db.collection.update/" class="bare">https://docs.mongodb.com/manual/reference/method/db.collection.update/</a>. For example: <code>[{"_id":11},{$set: {"test":"updated!"}}]</code>.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">An instance of <code>java.lang.Long</code> that specifies the number of documents that were updated.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Upsert</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Updates one or more documents in the collection or creates a document if no documents match the <strong>Upsert expression</strong>.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">In the <strong>Upsert expression</strong> field, specify JSON notation that identifies one or more documents. The action uses this expression to detect any matching documents. If the action finds a matching document(s) in the collection, it updates it. If the action does not find a matching document, the action creates a new document. The data coming in to the MongoDB connection must contain JSON notation that specifies the content to add or update.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">An instance of <code>com.mongodb.client.result.UpdateResult</code> that specifies either the number of updated documents or the ID of the new, inserted document.</p></td></tr></tbody></table><div class="paragraph"><p>Each action returns a response. If this is a finish connection, then the response is lost, but you can add a <strong>Log</strong> step to capture the response.</p></div></li><li><p>Click <strong>Next</strong>.</p></li><li><p>Optional. If this is a finish connection, add a <strong>Log</strong> step to finish the integration instead. Configure the <strong>Log</strong> step to capture the response.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div><div class="paragraph"><div class="title">Next steps</div><p>Add any other needed connections to the flow. Add any other steps that process data. Complete the integration by adding any needed data mapping steps. When you configured the MongoDB connection action, if you specified any <code>:#<em>variable-name</em></code> identifiers in an action expression, be sure to map a source field to the MongoDB connection variable field.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-mqtt_connectors">18. Connecting to MQTT</h2><div class="sectionbody"><div class="paragraph"><p>MQ Telemetry Transport (MQTT) is a lightweight, machine-to-machine, internet of things, connectivity protocol. In an integration, you can obtain messages from or publish messages to an MQTT broker. To do this, create a connection to the MQTT broker of interest and then add that connection to an integration flow. Details are in the following topics:</p></div><div class="ulist"><ul><li><p><a href="#creating-mqtt-connections_mqtt">Creating a connection to an MQTT broker</a></p></li><li><p><a href="#adding-mqtt-connection-start_mqtt">Obtaining a message from an MQTT broker to trigger integration execution</a></p></li><li><p><a href="#adding-mqtt-connection-finish-middle_mqtt">Publishing a message to an MQTT broker</a></p></li></ul></div><div class="sect2"><h3 id="creating-mqtt-connections_mqtt">18.1. Creating a connection to an MQTT broker</h3><div class="paragraph"><p>In an integration, to obtain messages from or publish messages to an MQTT broker, create a connection to the MQTT broker of interest and then add that connection to an integration.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You must know the URL for the MQTT broker that you want to connect to.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display connectors.</p></li><li><p>Click the <strong>MQTT Message Broker</strong> connector.</p></li><li><p>To configure the connection:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>MQTT broker URL</strong> field, enter the location of the MQTT broker that you want to send data to or obtain data from. This is the only required field.</p></li><li><p>In the <strong>User Name</strong> field, optionally enter the user name for the MQTT account whose credentials you want to use to access the broker.</p></li><li><p>In the <strong>Password</strong> field, if you specified a user name, then specify the password associated with that account.</p></li><li><p>In the <strong>Client ID</strong> field, optionally enter the ID that allows connections to close and reopen without missing messages. The connection must subscribe to or publish to a topic.</p></li></ol></div></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether validation is successful. If validation fails, revise the input parameters and try again.</p></li><li><p>If validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, you might enter <code>MQTT West</code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection.</p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>MQTT West</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="adding-mqtt-connection-start_mqtt">18.2. Obtaining a message from an MQTT broker to trigger integration execution</h3><div class="paragraph"><p>To trigger execution of an integration based on receiving a message from an MQTT broker, add an MQTT connection as the start connection. When the integration is running, the MQTT connection continuously watches for messages on the MQTT queue or topic that you specify. When the connection finds a message, it passes it to the next step in the integration. An MQTT connection handles one message at a time.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You created an MQTT connection.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the MQTT connection that you want to use to start the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select the <strong>Subscribe</strong> action to receive messages from the queue or topic that you specify.</p></li><li><p>In the <strong>MQTT queue/topic name</strong> field, enter the name of the queue or topic to subscribe to in order to receive data.</p></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s output type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection output in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The integration now has a start connection and Syndesis is prompting you to choose the finish connection.</p></div></div><div class="sect2"><h3 id="adding-mqtt-connection-finish-middle_mqtt">18.3. Publishing a message to an MQTT broker</h3><div class="paragraph"><p>In an integration, you can publish a message to an MQTT broker in the middle of a flow or to finish a simple integration. To do this, add an MQTT connection to the middle of a flow or as the integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created an MQTT connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add an MQTT connection. Skip this step if you are adding a simple integration&#8217;s finish connection.</p></li><li><p>Click the MQTT connection that you want to use to publish a message.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Publish</strong>.</p></li><li><p>In the <strong>MQTT queue/topic name</strong> field, specify the name of the queue or topic to publish the message to.</p></li><li><p>Click <strong>Next</strong> to specify the action&#8217;s input type.</p></li><li><p>In the <strong>Select Type</strong> field, if the data type does not need to be known, accept <strong>Type specification not required</strong> and click <strong>Next</strong>. You do not need to follow the rest of these instructions.</p><div class="paragraph"><p>However, a structured data type is recommended. For example, if you want to map the connection input in a data mapper step then you must specify the data type. The data mapper cannot display fields for unstructured data.</p></div><div class="paragraph"><p>To specify the data type, click in the <strong>Select Type</strong> field and select one of the following as the schema type:</p></div><div class="ulist"><ul><li><p><strong>JSON schema</strong> is a document that describes the structure of JSON data. The document&#8217;s media type is <code>application/schema+json</code>.</p></li><li><p><strong>JSON instance</strong> is a document that contains JSON data. The document&#8217;s media type is <code>application/json</code>.</p></li><li><p><strong>XML schema</strong> is a document that describes the structure of XML data. The document&#8217;s file extension is <code>.xsd</code>.</p></li><li><p><strong>XML instance</strong> is a document that contains XML data. The document&#8217;s file extension is <code>.xml</code>.</p></li></ul></div></li><li><p>In the <strong>Definition</strong> input box, paste a definition that conforms to the schema type you selected. For example, if you select <strong>JSON schema</strong> then you would paste the content of a JSON schema file, which has a media type of <code>application/schema+json</code>.</p></li><li><p>In the <strong>Data Type Name</strong> field, enter a name that you choose for the data type. For example, if you are specifying a JSON schema for vendors then you might specify <code><strong>Vendor</strong></code> as the data type name.</p><div class="paragraph"><p>You will see this data type name when you are creating or editing an integration that uses the connection for which you are specifying this type. Syndesis displays the type name in the integration visualization and in the data mapper.</p></div></li><li><p>In the <strong>Data Type Description</strong> field, provide information that helps you distinguish this type. This description appears in the data mapper when you hover over the step that processes this type.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-odata_connectors">19. Connecting to OData</h2><div class="sectionbody"><div class="paragraph"><p>Open Data Protocol (OData) is a standard for building and consuming REST APIs. An OData service provides services to clients, such as Syndesis, through OData-compliant HTTP requests. A Syndesis integration can obtain entities from an OData service, and can update, create, or delete entities managed by an OData service. To do this, create an OData connection, and add it to an integration.</p></div><div class="paragraph"><p>It is assumed that you are familiar with the <a href="http://docs.oasis-open.org/odata/odata/v4.01/odata-v4.01-part2-url-conventions.html">OData specification</a>.</p></div><div class="paragraph"><p>Details for connecting to an OData service are in the following topics:</p></div><div class="ulist"><ul><li><p><a href="#creating-odata-connections_odata">Creating a connection to an OData service</a></p></li><li><p><a href="#adding-odata-connections-read_odata">Triggering an integration when polling returns data from an OData service</a></p></li><li><p><a href="#adding-odata-connections-write_odata">Updating, creating, and deleting data that is managed by an OData service</a></p></li></ul></div><div class="sect2"><h3 id="creating-odata-connections_odata">19.1. Creating a connection to an OData service</h3><div class="paragraph"><p>In an integration, to obtain, update, create, or delete entities that are managed by an OData service, you must first create a connection to that OData service.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You must know the base URL for the OData service that you want to connect to.</p></li><li><p>If that service uses authentication then you must have the required credentials, and, if required, an SSL certificate. However, most OData services are public and do not require authentication.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display connectors.</p></li><li><p>Click the <strong>OData</strong> connector.</p></li><li><p>To configure the connection:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Service Root URL</strong> field, enter the base URL for the OData service that you want to access.</p></li><li><p>In the <strong>User Name</strong> field, if the service uses basic authentication, then enter your user name.</p></li><li><p>In the <strong>Password</strong> field, if the service uses basic authentication, then enter your password.</p></li><li><p>In the <strong>Server Certificate</strong> field, if the service requires it, paste the content of an SSL certificate.</p><div class="paragraph"><p>Typically, a public OData service does not require a certificate in addition to the certificates provided by the browser. However, for an internal OData service, you might have created your own SSL certificate and self-signed it. Since this certificate is not trusted by a certificate authority, connections to your OData service would fail. To enable connections, paste the self-signed certificate here.</p></div><div class="paragraph"><p>One way to get the certificate is to load the service in a browser. The steps after that depend on which browser you are using, but it will be something like the following: click the <strong>Not secure</strong> padlock symbol next to the address bar, then click <strong>View Certificate</strong>, export the displayed certificate to a file, copy the certificate, and paste it into this field.</p></div></li></ol></div></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether validation is successful. If validation fails, revise the input parameter(s) and try again.</p></li><li><p>When validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, you might enter <code>OData North</code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection.</p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>OData North</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div><div class="paragraph"><div class="title">Next step</div><p>Add your OData connection to an integration.</p></div></div><div class="sect2"><h3 id="adding-odata-connections-read_odata">19.2. Triggering an integration when polling returns data from an OData service</h3><div class="paragraph"><p>To trigger execution of an integration upon obtaining data from an OData service, add an OData connection to a simple integration as its start connection. When the integration is running, the OData connection polls the service at intervals that you specify. When the connection finds data that satisfies the connection configuration, the connection passes the data to the next step in the integration.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You created an OData connection.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the OData connection that you want to use to start the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select the <strong>Read</strong> action.</p></li><li><p>Configure the <strong>Read</strong> action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Resource Collection</strong> field, select the name of the OData resource that you want to query. Syndesis fetches data from the OData service to provide a list of available resource collections.</p></li><li><p>In the <strong>Entity Key Predicate</strong> field, to obtain a particular entity, identify the entity that you want by specifying its key predicate. For example, specify something like <code><strong>UserName='Bob'</strong></code> or <code><strong>Categories(1)</strong></code>. To obtain multiple entities, leave this field blank.</p></li><li><p>In the <strong>Query Options</strong> field, enter a query that you want to apply to the resource. Use OData syntax. For example, <code>$filter=startswith(name, 'N')</code> returns a message for each entity in the resource that has a <code>name</code> field that starts with <code>N</code>.</p><div class="paragraph"><p>You can specify both <strong>Entity Key Predicate</strong> and <strong>Query Options</strong>. If you do, the OData service obtains the specified entity and applies the query to that entity. For example, suppose that you set <strong>Entity Key Predicate</strong> to <code><strong>UserName='russellwhyte'/Emails</strong></code> and you set <strong>Query Options</strong> to <code><strong>$filter=contains($it,'example')</strong></code>. The connection creates a request that looks something like this:</p></div><div class="listingblock"><div class="content"><pre>https://services.odata.org/TripPinRESTierService/People(UserName='russellwhyte')/Emails?$filter=contains($it, 'example')</pre></div></div><div class="paragraph"><p>The service returns all email addresses for Russell Whyte that contain the domain <code>example</code>.</p></div></li><li><p>Select the <strong>Filter Old Results</strong> checkbox to obtain a particular message only once.</p></li><li><p>Select the <strong>Split Results</strong> checkbox if you want the connection to return individual messages rather than a collection of messages.</p><div class="paragraph"><p>Syndesis also provides discrete split and aggregate steps, which you can add to a flow. If you want to process individual messages in one or more steps and then aggregate the messages into a collection, do not select the <strong>Split Results</strong> checkbox. Instead, leave the checkbox empty and then add a split step to the flow after this connection. A split step is required if you want an aggregate step in the flow.</p></div></li><li><p>In the <strong>Interval Before Polling Starts</strong> field, accept the default of 1 second, or enter the length of time that you want to elapse before the connection starts to poll the OData service.</p></li><li><p>In the <strong>Delay</strong> field, accept the default of 30 seconds, or enter the interval at which you want the connection to poll the OData service.</p></li><li><p>In the <strong>Backoff Idle Threshold</strong> field, accept the default of 1 or enter an integer that indicates the number of consecutive polls that can return no data. After this number of polls, the connection increases the interval between subsequent polls. The connection determines the new length of the polling interval by multiplying the <strong>Delay</strong> value by the <strong>Backoff Multiplier</strong> value.</p><div class="paragraph"><p>For example, suppose that the polling interval (the <strong>Delay</strong> value) is the default of 30 seconds, <strong>Backoff Idle Threshold</strong> is set to 5, and <strong>Backoff Multiplier</strong> is set to 12. After 5 consecutive polls that return no data, the connection waits 360 seconds (30 x 12) before polling again. The connection continues to poll every 360 seconds until a poll returns data. After a poll returns data, the connection resumes polling every 30 seconds.</p></div></li><li><p>In the <strong>Backoff Multiplier</strong> field, accept the default of 1 or enter an integer that indicates the multiplier for increasing the polling interval if the value set for the <strong>Backoff Idle Threshold</strong> is reached.</p><div class="paragraph"><p>If you accept the default of 1 for the <strong>Backoff Multiplier</strong>, then the connection continues to poll at the specified interval no matter how many consecutive polls return no results.</p></div><div class="paragraph"><p>The values that you specify for <strong>Backoff Idle Threshold</strong> and <strong>Backoff Multiplier</strong> are useful for reducing CPU overhead since the connection can automatically poll less often during quiet periods.</p></div></li></ol></div></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The integration now has a start connection and Syndesis is prompting you to choose the finish connection.</p></div><div class="paragraph"><p>During execution, what the connection returns depends on what you specified in the <strong>Entity Key Predicate</strong> and <strong>Query Options</strong> fields. The OData connection can return:</p></div><div class="ulist"><ul><li><p>A collection of entities or a collection of entity properties</p><div class="paragraph"><p>For example, this might be all <strong>Person</strong> entities in the resource, or perhaps all <strong>Age</strong> properties for all <strong>Person</strong> entities. The connection returns the collection in one message. Syndesis executes each subsequent step in the flow once for the collection. However, when you configure the <strong>Read</strong> action, if you select <strong>Split Results</strong>, then the connection returns each entity or each property in its own message. Syndesis executes each subsequent step in the flow once for each message.</p></div></li><li><p>An entity or an entity property</p><div class="paragraph"><p>For example, this might be the <strong>Person</strong> entity whose <strong>UserName</strong> property is <strong>Bob</strong>, or perhaps the <strong>Age</strong> property for the <strong>Person</strong> entity whose <strong>UserName</strong> is <strong>Bob</strong>. The connection returns the entity or the entity property in a message that it passes to the next step in the flow.</p></div></li></ul></div><div class="paragraph"><div class="title">Next steps</div><p>Add the integration’s finish connection and any other connections that you want to include in the integration. When the integration contains all the connections that are needed, if the OData connection returns a collection, consider whether you need to add a split step after the OData connection. An integration usually needs to map the data returned by the OData connection to fields that a subsequent connection in the flow can use. Sometimes you can map a collection, but more often you need to split the collection in order to map to the target fields.</p></div><div class="paragraph"><p>After the OData connection, add a data mapper step to the flow. Exactly where in the flow depends on what you want the flow to do. For example, after the OData connection, you might add a basic filter step and then add a data mapper step.</p></div></div><div class="sect2"><h3 id="adding-odata-connections-write_odata">19.3. Updating, creating, and deleting data that is managed by an OData service</h3><div class="paragraph"><p>In an integration, you can update a resource that is managed by an OData service in the middle of a flow or to finish a simple integration. To do this, add an OData connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created an OData connection.</p></li><li><p>You are creating or editing an integration and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add an OData connection. Skip this step if you are adding a simple integration&#8217;s finish connection.</p></li><li><p>Click the OData connection that you want to use. Note that when an OData connection updates or deletes an entity, the connection does not return anything. When the OData connection creates an entity, the connection returns the new entity.</p></li><li><p>On the <strong>Choose an action</strong> page, select the action that you want the connection to perform:</p><div class="ulist"><ul><li><p><strong>Create</strong> adds an entity to an OData resource.</p></li><li><p><strong>Delete</strong> removes an entity from an OData resource.</p></li><li><p><strong>Update</strong> changes an entity that is in an OData resource.</p></li></ul></div></li><li><p>Configure the action by selecting the OData resource that you want to update.</p><div class="paragraph"><p>It is important for you to have an understanding of how the OData resource that you are updating is set up. The backing data source for an OData service determines the rules for updates and resolving conflicts. For example, suppose an OData connection tries to create a new entity but an entity with that predicate key already exists. The OData service might overwrite the existing entity, or it might update some fields in the existing entity, or it might ignore the operation. It is up to you to know how the OData service behaves in this situation.</p></div></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div><div class="paragraph"><div class="title">Next steps</div><p>Add a data mapper step before the OData connection. You must map source fields that provide the data that is required to create a new entity, to update an entity, or to delete an entity. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/integrating_applications_with_fuse_online/#mapping-data_ug">Mapping integration data to fields for the next connection</a>.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-rest-apis_connectors">20. Connecting to REST APIs</h2><div class="sectionbody"><div class="paragraph"><p>In an integration, to connect to a REST API, you must have created a connector for that API by uploading an OpenAPI document that describes the API. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/integrating_applications_with_fuse_online/#adding-api-connectors_custom">Integrating Applications with Fuse Online, Adding and managing REST API client connectors</a>.</p></div><div class="paragraph"><p>When a connector for the REST API you want to connect to is available in Syndesis, the steps for connecting to that REST API are:</p></div><div class="ulist"><ul><li><p><a href="#register-with-rest-api_rest">Registering Syndesis as a REST API client</a> if required</p></li><li><p><a href="#create-rest-api-connection_rest">Creating a REST API client connection</a></p></li><li><p><a href="#add-api-client-connection_rest">Adding an API client connection to an integration</a></p></li></ul></div><div class="sect2"><h3 id="register-with-rest-api_rest">20.1. Registering Syndesis as a REST API client</h3><div class="paragraph"><p>Before Syndesis creates a REST API client connector, it prompts you to indicate the API&#8217;s security requirements. For APIs that use the OAuth protocol, when Syndesis creates the connector it also adds an entry for the API to the Syndesis <strong>Settings</strong> page. This is where you provide the API client ID and the API client secret that authorize Syndesis to access the API.</p></div><div class="paragraph"><p>If the API you want to connect to does not use OAuth, skip this section and see <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#create-rest-api-connection_rest">Creating a REST API client connection</a>.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You must know the URL for the OAuth custom application setting page for the REST API that you want to connect to.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>On the <strong>Settings</strong> page, near the top, to the right of the callback URL, click <span class="image"><img src="images/tutorials/CopyCallback.png" alt="Copy Callback URL"></span>to copy the callback URL for your Syndesis environment to the clipboard. You will need this URL later in this procedure.</p></li><li><p>Look for the name of the API you want to connect to and click it to display its client ID and client secret fields.</p></li></ol></div></li><li><p>In another browser window, you must register Syndesis as an OAuth client of the API you want to connect to. The exact steps for doing this vary for each API service. Typically, the API service provides an OAuth custom application setting page. Go to that page and do the following:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Provide the Syndesis callback URL, which you copied at the beginning of this procedure.</p></li><li><p>Respond to any other prompts that require your input.</p></li><li><p>Obtain the client ID and client secret that the API service assigns to your Syndesis environment.</p></li></ol></div></li><li><p>Return to the Syndesis <strong>Settings</strong> page entry for the API service you are registering with and do the following:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Paste the assigned client ID.</p></li><li><p>Paste the assigned client secret.</p></li><li><p>Click <strong>Save</strong>.</p></li></ol></div></li></ol></div></div><div class="sect2"><h3 id="create-rest-api-connection_rest">20.2. Creating a REST API client connection</h3><div class="paragraph"><p>In an integration, to connect to a REST API, create a connection to that REST API, which you can then add to any number of integrations.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a connector for the REST API that you want to connect to.</p></li><li><p>If the REST API uses the OAuth protocol then you registered you Syndesis environment as a client application that can access that REST API.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display available connectors.</p></li><li><p>Click the connector for the API that you want to create a connection for.</p></li><li><p>Respond to prompts for additional information. The definition of the API determines what Syndesis prompts for.</p><div class="paragraph"><p>Typically, an API service has security requirements and Syndesis prompts for security input according to the particular security type that the OpenAPI document defines. The security type can be one of the following:</p></div><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width:33.3333%"><col style="width:66.6667%"></colgroup><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Security type</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Syndesis displays</strong></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">HTTP Basic Authentication</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Input fields for user name and password.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">OAuth 2.0</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">A button for you to click so that Syndesis can verify its registration credentials for connecting to the API. These credentials were provided when the connector was created.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">API Key</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Input field for an API key, which you must obtain from the API service.</p></td></tr></tbody></table></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection.</p></li><li><p>Click <strong>Save</strong> to see that you can now choose the connection you created and add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="add-api-client-connection_rest">20.3. Adding an API client connection to an integration</h3><div class="paragraph"><p>In an integration, to connect to a REST API, add a step that connects to that REST API.</p></div><div class="paragraph"><p>In this release, a connection to a REST API can be a step that is in the middle of a flow or it can be the finish connection in a simple integration. In other words, a connection to a REST API cannot be a start connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a connection to the REST API.</p></li><li><p>You are creating or editing a flow.</p></li><li><p>The flow already has its start connection.</p></li><li><p>Syndesis is prompting you to select a finish connection or to add to the integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>On the page that displays available steps, click the REST API connection that you want to add to the flow.</p></li><li><p>Select the action that you want the connection to perform. The actions that are available are based on the resource operations specified in the OpenAPI document that was uploaded to Syndesis and that describes the API that you are connecting to.</p></li><li><p>Depending on the action you select, enter any parameters that Syndesis prompts for.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div></div></div></div><div class="sect1"><h2 id="connecting-to-sf_connectors">21. Connecting to Salesforce</h2><div class="sectionbody"><div class="paragraph"><p>In an integration, to connect to Salesforce, you must register your Syndesis environment as a Salesforce client application. This authorizes Syndesis to access Salesforce. With registration in place, you create a Salesforce connection, which you can then add to any number of integrations. For details, see the following topics:</p></div><div class="ulist"><ul><li><p><a href="#register-with-salesforce_salesforce">Registering Syndesis as a Salesforce client application</a></p></li><li><p><a href="#create-salesforce-connection_salesforce">Creating a Salesforce connection</a></p></li><li><p><a href="#adding-sf-connections_salesforce">Adding a Salesforce connection to an integration</a></p></li></ul></div><div class="sect2"><h3 id="register-with-salesforce_salesforce">21.1. Registering Syndesis as a Salesforce client application</h3><div class="paragraph"><p>In an integration, to connect to Salesforce, the first thing you must do is register your Syndesis environment as a client application that can access Salesforce. This lets you create any number of integrations that connect to Salesforce. In other words, you need to register a particular Syndesis environment with Salesforce only once.</p></div><div class="paragraph"><p>In each Syndesis environment, there can be only one registration of Syndesis as a Salesforce client application. However, while each Salesforce connection uses the same registration, it can use different user credentials.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You are logged in to Syndesis.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the left panel, click <strong>Settings</strong>.</p></li><li><p>On the <strong>Settings</strong> page, near the top, to the right of the callback URL, click <span class="image"><img src="images/tutorials/CopyCallback.png" alt="Copy Callback URL"></span>to copy the callback URL for your Syndesis environment to the clipboard. You will need this URL toward the end of this procedure.</p></li><li><p>Click the <strong>Salesforce</strong> entry to display the <strong>Client ID</strong> and <strong>Client Secret</strong> fields.</p></li></ol></div></li><li><p>In another browser tab, log in to your Salesforce account and follow the steps below to create a connected app. These instructions assume that you are using the Salesforce Classic user interface. To switch from the Salesforce Lightning Experience interface, click your profile icon and select <strong>Switch to Salesforce Classic</strong>. For additional information, see the Salesforce documentation for <a href="https://help.salesforce.com/articleView?id=connected_app_create.htm">Create a Connected App</a>.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In Salesforce, in the upper right, click <strong>Setup</strong>.</p></li><li><p>In the left panel, select <strong>Build</strong> &gt; <strong>Create</strong> &gt; <strong>Apps</strong>.</p></li><li><p>Scroll down to <strong>Connected Apps</strong> and click <strong>New</strong>.</p></li><li><p>Enter the required information and then select <strong>Enable OAuth Settings</strong>.</p></li><li><p>In the <strong>Callback URL</strong> field, paste your Syndesis URL, which you copied at the beginning of this procedure. For example: <code>https://app-proj912876.7b63.fuse-ignite.openshiftapps.com/api/v1/credentials/callback</code>.</p></li><li><p>For <strong>OAuth Scopes</strong>, add:</p><div class="ulist"><ul><li><p><strong>Access and manage your data (api)</strong></p></li><li><p><strong>Allow access to your unique identifier (openid)</strong></p></li><li><p><strong>Perform requests on your behalf at any time (refresh_token, offline_accesss)</strong></p></li></ul></div></li><li><p>Select <strong>Configure ID token</strong> and then <strong>Include Standard Claims</strong>.</p></li><li><p>Scroll down and click <strong>Save</strong>.</p></li><li><p>Scroll up to see that Salesforce indicates a short wait: <span class="image"><img src="images/tutorials/SF-message-to-wait-a-few-minutes.png" alt="SF message to wait a few minutes" title="Short Wait"></span></p></li><li><p>Click <strong>Continue</strong>.</p></li><li><p>Copy the consumer key that Salesforce provides.</p></li></ol></div></li><li><p>Return to your Syndesis <strong>Settings</strong> page and paste the Salesforce-provided consumer key into the Syndesis Salesforce <strong>Client ID</strong> field.</p></li><li><p>Return to Salesforce and copy the consumer secret that Salesforce provides.</p></li><li><p>Return to your Syndesis <strong>Settings</strong> page and paste the Salesforce-provided consumer secret into the Syndesis Salesforce <strong>Client Secret</strong> field.</p></li><li><p>Click <strong>Save</strong>.</p></li><li><p>Click the <strong>Salesforce</strong> entry to collapse it.</p></li></ol></div></div><div class="sect2"><h3 id="create-salesforce-connection_salesforce">21.2. Creating a Salesforce connection</h3><div class="paragraph"><p>To create an integration that accesses data in Salesforce, you must first create a Salesforce connection. After you create a Salesforce connection, you can use it in multiple integrations.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You are logged in to Syndesis.</p></li><li><p>Syndesis is open in a web browser.</p></li><li><p>You must have already registered your Syndesis environment as an application that can access Salesforce.</p></li><li><p>You added the Salesforce client ID and client secret that you received after registration to the Syndesis <strong>Settings</strong> page.</p><div class="paragraph"><p>Be sure to wait 2 - 10 minutes after registering your Syndesis installation as a Salesforce client before you try to create a Salesforce connection.</p></div></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display the available connectors. A connector is a template for creating one or more connections.</p></li><li><p>Click the <strong>Salesforce</strong> connector.</p></li><li><p>Click <strong>Connect Salesforce</strong> to display a Salesforce authorization page. You might need to log in to Salesforce before you see the authorization page.</p><div class="paragraph"><p>If <strong>Connect Salesforce</strong> does not appear, then your Syndesis environment is not registered as a Salesforce client application. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#register-with-sf_salesforce">Registering Syndesis as a Salesforce client application</a>. When you try to create a Salesforce connection and your Syndesis environment is not registered as a Salesforce client application, then Syndesis displays multiple fields that prompt for authorization information. While you can create a Salesforce connection by entering values in these fields, it is not recommended.</p></div><div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content"><div class="paragraph"><p>The following error indicates that Salesforce does not have the correct Syndesis callback URL:</p></div><div class="paragraph"><p><code>error=redirect_uri_mismatch&amp;error_description=redirect_uri%20must%20match%20configuration</code></p></div><div class="paragraph"><p>If you get this error message, then in Salesforce, ensure that the Syndesis callback URL is specified according to the instructions in <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#register-with-salesforce_salesforce">Registering Syndesis as a Salesforce client application</a>.</p></div></td></tr></table></div></li><li><p>Click <strong>Allow</strong> to return to Syndesis.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code><strong>SF Connect 1</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample Salesforce connection that uses my Salesforce login credentials.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>SF Connect 1</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="adding-sf-connections_salesforce">21.3. Adding a Salesforce connection to an integration</h3><div class="paragraph"><p>In an integration, you can connect to Salesforce in the middle of a flow or to start or finish a simple integration. To do this, add a Salesforce connection to the integration.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Salesforce connection.</p></li><li><p>You are creating or updating an integration.</p></li><li><p>Syndesis is prompting you to choose a start connection, or to choose a finish connection, or to add to the integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>If you are adding to the Salesforce connection to the middle of a flow, click the plust sign where you want to add the connection. Skip this step if Syndesis is prompting for a start or finish connection.</p></li><li><p>Click the Salesforce connection that you want to add to the flow. When the integration uses the connection that you select to connect to Salesforce, Syndesis uses the credentials defined in that connection.</p></li><li><p>Select the action that you want the selected connection to perform. Each Salesforce connection that you add to a flow performs only the action you choose.</p></li><li><p>Specify the Salesforce object that the action operates on, for example, it might be a contact, lead or price book entry. Click in the <strong>Object</strong> field to select from a list of Salesforce objects or enter the name of the object.</p></li><li><p>Click <strong>Next</strong> to add the connection to the flow.</p></li></ol></div></div></div></div><div class="sect1"><h2 id="connecting-to-concur_connectors">22. Connecting to SAP Concur</h2><div class="sectionbody"><div class="paragraph"><p>SAP Concur manages business expenses, travel, and invoices. In an integration, you can connect to SAP Concur and perform any one of a large variety of SAP Concur actions. For example, suppose that you store project codes in a SQL database and you need the same project codes in SAP Concur so that expenses can be associated with projects. You can create an integration that connects to your SQL database and runs a stored procedure that obtains any new project codes. The integration can then connect to SAP Concur and upload the new project codes to the appropriate list.</p></div><div class="paragraph"><p>See the following topics:</p></div><div class="ulist"><ul><li><p><a href="#user-roles-for-connecting-to-concur_concur">User roles for connecting to SAP Concur</a></p></li><li><p><a href="#obtain-concur-oauth-credentials-implementation_concur">How to Obtain SAP Concur implementation site OAuth credentials</a></p></li><li><p><a href="#obtain-concur-oauth-credentials-production_concur">How to obtain SAP Concur production site OAuth credentials</a></p></li><li><p><a href="#configure-concur-connector_concur">Configuring the SAP Concur connector</a></p></li><li><p><a href="#create-concur-connection_concur">Creating a SAP Concur connection</a></p></li><li><p><a href="#add-concur-connection_concur">Adding a SAP Concur connection to an integration</a></p></li><li><p><a href="#identify-concur-fields-for-mapping_concur">Example of mapping integration data fields to SAP Concur fields</a></p></li></ul></div><div class="sect2"><h3 id="user-roles-for-connecting-to-concur_concur">22.1. User roles for connecting to SAP Concur</h3><div class="paragraph"><p>SAP Concur has an implementation site for development work and a production site for live use. The implementation site simulates the production site. This lets you create and refine an integration before you use it in production with the live SAP Concur site.</p></div><div class="paragraph"><p>At any one time, a Syndesis environment can connect to the SAP Concur implementation site or the SAP Concur production site. In other words, a particular Syndesis environment does not support connections to both SAP Concur sites at the same time. Each Syndesis environment requires its own credentials for accessing each SAP Concur site and the credentials for the implementation site are different from the credentials for the production site.</p></div><div class="paragraph"><p>Consequently, the expectation is that someone in a system administrator-like role would do the following:</p></div><div class="olist arabic"><ol class="arabic"><li><p>Obtain two sets of OAuth credentials from SAP Concur:</p><div class="ulist"><ul><li><p>One set for access to the SAP Concur implementation site</p></li><li><p>Another set for access to the SAP Concur production site</p></li></ul></div></li><li><p>Configure the SAP Concur connector for access to the appropriate SAP Concur site.</p></li><li><p>Create a SAP Concur connection.</p></li></ol></div><div class="paragraph"><p>A business user can then create an integration that uses the SAP Concur connection.</p></div></div><div class="sect2"><h3 id="obtain-concur-oauth-credentials-implementation_concur">22.2. How to Obtain SAP Concur implementation site OAuth credentials</h3><div class="paragraph"><p>To obtain credentials for accessing the SAP Concur implementation site, contact SAP Concur directly and tell them:</p></div><div class="ulist"><ul><li><p>You want to register Syndesis as a new app that is authorized to access the SAP Concur implementation site.</p></li><li><p>You want a new set of OAuth credentials for their implementation site.</p></li><li><p>The credentials must include the <code>LIST</code> scope.</p></li><li><p>Optionally, to obtain permission to perform actions other than the list actions, ask for other <a href="https://developer.concur.com/api-reference/authentication/scopes.html">scopes</a>.</p></li><li><p>The OAuth grant type for these credentials should be <code>Authorization Grant Flow</code>.</p><div class="paragraph"><p>To use a REST client, such as Postman, to send a request to the SAP Concur implementation site, you need credentials with an OAuth grant type of <code>Password</code>.</p></div></li><li><p>The Syndesis callback URL for the environment that that you want credentials for, which is something like this:</p><div class="paragraph"><p><code>https://syndesis.my-minishift.syndesis.io/api/v1/credentials/callback</code></p></div><div class="paragraph"><p>In this URL, <code>syndesis.my-minishift.syndesis.io</code> matches the OpenShift route to your Syndesis environment.</p></div></li></ul></div><div class="paragraph"><p>The response from SAP Concur should provide:</p></div><div class="ulist"><ul><li><p>A username and password for logging in to the SAP Concur implementation site.</p></li><li><p>Client ID and client secret values that you will specify in the Syndesis development environment <strong>Settings</strong> page to configure the Syndesis SAP Concur connector.</p></li></ul></div></div><div class="sect2"><h3 id="obtain-concur-oauth-credentials-production_concur">22.3. How to obtain SAP Concur production site OAuth credentials</h3><div class="paragraph"><p>To obtain OAuth credentials that authorize Syndesis to access the SAP Concur production site, go to the <a href="https://developer.concur.com/api-reference/authentication/getting-started.html">SAP Concur Developer Center Getting Started</a> page and follow the instructions there.</p></div></div><div class="sect2"><h3 id="configure-concur-connector_concur">22.4. Configuring the SAP Concur connector</h3><div class="paragraph"><p>To connect to SAP Concur in an integration, you must configure the Syndesis SAP Concur connector. You can then use the connector to create a connection to SAP Concur.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You know whether you want to configure the SAP Concur connector to access the SAP Concur implementation site or the SAP Concur production site.</p></li><li><p>You obtained OAuth credentials that authorize your Syndesis environment to access the appropriate SAP Concur site.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Settings</strong>.</p></li><li><p>On the <strong>Settings</strong> page, expand the <strong>SAP Concur</strong> entry.</p></li><li><p>In the <strong>Client ID</strong> field, enter the client ID that you received from SAP Concur.</p></li><li><p>In the <strong>Client Secret</strong> field, enter the client secret that you received from SAP Concur.</p><div class="paragraph"><p>Syndesis populates the other fields.</p></div></li><li><p>Click <strong>Save</strong>.</p><div class="paragraph"><p>Syndesis immediately tries to validate the configuration. If validation is not successful, correct the input values and try again. If validation is successful, you can create a SAP Concur connection, which you can add to an integration.</p></div></li><li><p>Click the <strong>SAP Concur</strong> entry to collapse it.</p></li></ol></div><div class="paragraph"><div class="title">Next steps</div><p>Create a SAP Concur connection.</p></div></div><div class="sect2"><h3 id="create-concur-connection_concur">22.5. Creating a SAP Concur connection</h3><div class="paragraph"><p>To connect to SAP Concur in an integration, you must first create a SAP Concur connection, which you can then add to any number of integrations. When you create a SAP Concur connection, you authorize the connection to access SAP Concur with the login credentials that you enter when you create the connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>In the Syndesis environment in which you are creating the connection, you must have configured the SAP Concur connector.</p></li><li><p>You should know whether the connector is configured for access to the SAP Concur implementation site or the SAP Concur production site.</p></li><li><p>You must have a user name and password for logging in to the SAP Concur site for which the SAP Concur connector is configured.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display the available connectors. A connector is a template that you use to create one or more connections.</p></li><li><p>Click the <strong>SAP Concur</strong> connector.</p></li><li><p>In the <strong>Configure Connection</strong> page, click <strong>Connect SAP Concur</strong>, which takes you to the SAP Concur site for which the connector is configured.</p><div class="paragraph"><p>If <strong>Connect SAP Concur</strong> does not appear, then the SAP Concur connector in your Syndesis environment is not configured. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#configure-concur-connector_concur">Configuring the SAP Concur connector</a>.</p></div><div class="paragraph"><p>If <code>redirect_uri is improper or not previously registered</code> appears, then the SAP Concur connector configuration is incorrect. Return to the Syndesis <strong>Settings</strong> page to update and validate the connector configuration.</p></div></li><li><p>On the SAP Concur OAuth site:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Enter the email address for the SAP Concur account that you want this connection to use to access SAP Concur.</p></li><li><p>Ensure that <strong>Username</strong> is selected.</p></li><li><p>Click <strong>Continue</strong>.</p></li><li><p>Enter the SAP Concur password associated with the email address.</p></li><li><p>Click <strong>Sign In</strong>, which returns you to Syndesis.</p></li></ol></div></li><li><p>In the Syndesis <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code><strong>SAP Concur Test1</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample SAP Concur connection to the implementation site.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>SAP Concur Test1</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="add-concur-connection_concur">22.6. Adding a SAP Concur connection to an integration</h3><div class="paragraph"><p>You can add a SAP Concur connection to the middle of a flow or as the finish connection in a simple integration. A connection to SAP Concur can perform any one of 85 actions.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a SAP Concur connection.</p></li><li><p>You are creating or editing a flow.</p></li><li><p>Syndesis is prompting you to add to the integration, or to choose the finish connection in a simple integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the SAP Concur connection that you want to add to the flow. When the integration uses the connection that you select, Syndesis uses the credentials defined in that connection to connect to SAP Concur.</p></li><li><p>Select the action that you want the connection to perform. Each SAP Concur connection that you add to a flow performs only the action you choose.</p><div class="paragraph"><p>For details about SAP Concur actions, visit the <a href="https://developer.concur.com/api-explorer/">SAP Concur developer center</a> and expand <strong>v3.0</strong>.</p></div></li><li><p>Click <strong>Next</strong> to add the connection to the flow.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the integration visualization where you added it.</p></div></div><div class="sect2"><h3 id="identify-concur-fields-for-mapping_concur">22.7. Example of mapping integration data fields to SAP Concur fields</h3><div class="paragraph"><p>In most integrations, you need to add a data mapping step before a connection to SAP Concur. In the data mapping step, you map data fields that are available from previous integration steps to SAP Concur action parameters. In the data mapper, the <strong>Target</strong> panel displays the SAP Concur parameters for the action that you selected when you added the SAP Concur connection to the integration.</p></div><div class="paragraph"><p>Suppose that an integration starts by executing a SQL stored procedure that obtains new project codes. The integration finishes by adding new project codes to SAP Concur. The following procedure provides an example of a data mapper step before the SAP Concur connection. The integration visualization displays and Syndesis is prompting you to add to the integration.</p></div><div class="olist arabic"><ol class="arabic"><li><p>In the integration visualization, click the plus sign that is before the SAP Concur finish connection.</p></li><li><p>Click <strong>Data Mapper</strong>. When the data fields appear, the <strong>Sources</strong> panel on the left displays the fields that are available from the database connection. In this example, the source fields include <code>concur-list-id</code> and <code>project-code</code>. The <strong>Target</strong> panel on the right displays the SAP Concur <code>id</code> and <code>content</code> parameters for the update list action, which the connection performs.</p></li><li><p>Map the <code>concur-list-id</code> source field to the <code>id</code> target field.</p></li><li><p>Map the <code>project-code</code> source field to the <code>content</code> target field.</p></li><li><p>In the upper right, click <strong>Done</strong> to add the data mapper step to the integration.</p></li></ol></div></div></div></div><div class="sect1"><h2 id="connecting-to-servicenow_connectors">23. Connecting to ServiceNow</h2><div class="sectionbody"><div class="paragraph"><p>An integration can retrieve records from a ServiceNow table or add records to a ServiceNow import set, which ServiceNow uses to update a table. In an integration, to connect to ServiceNow, create a ServiceNow connection and then add that connection to an integration. For details, see:</p></div><div class="ulist"><ul><li><p><a href="#create-servicenow-connection_servicenow">Creating a ServiceNow connection</a></p></li><li><p><a href="#add-servicenow-connection-start_servicenow">Obtaining records from ServiceNow to trigger integration execution</a></p></li><li><p><a href="#create-servicenow-import-set_servicenow">Creating an import set in ServiceNow</a></p></li><li><p><a href="#add-servicenow-connection-finish_servicenow">Copying records to ServiceNow during or to finish an integration</a></p></li><li><p><a href="#example-sf-servicenow-integration_servicenow">Example Salesforce to ServiceNow integrations</a></p></li></ul></div><div class="sect2"><h3 id="create-servicenow-connection_servicenow">23.1. Creating a ServiceNow connection</h3><div class="paragraph"><p>In an integration, to connect to your company&#8217;s ServiceNow instance, you must create a ServiceNow connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>A ServiceNow administrator at your site must have created a ServiceNow account for you.</p></li><li><p>You must know the URL for your ServiceNow instance and your ServiceNow user name and password.</p></li><li><p>If the ServiceNow administrator also created a ServiceNow client ID and client secret for you, you must know these values.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display Syndesis connectors.</p></li><li><p>Click the <strong>ServiceNow</strong> connector.</p></li><li><p>Configure this ServiceNow connection:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Instance Name</strong> field, enter the name of the ServiceNow instance that you want to obtain records from or copy records to. For example, if the URL for your ServiceNow instance is <code>https://abc12345.service-now.com</code>, the instance name is <code>abc12345</code>.</p></li><li><p>In the <strong>User Name</strong> field, enter your ServiceNow user name.</p></li><li><p>In the <strong>User Password</strong> field, enter your ServiceNow password.</p></li><li><p>Optionally, in the <strong>Client ID</strong> field, enter your client ID if you received one from your ServiceNow administrator.</p></li><li><p>Optionally, in the <strong>Client Secret</strong> field, enter your client secret if you received one from your ServiceNow administrator.</p></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether validation is successful. If validation fails, update the configuration details as needed and try again.</p></li><li><p>When validation is successful, click <strong>Next</strong>.</p></li></ol></div></li><li><p>In the <strong>Name</strong> field, enter a name that helps you distinguish this connection from other connections. For example, enter <code><strong>ServiceNow Con 1</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>ServiceNow connection that uses administrative credentials.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>ServiceNow Con 1</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="add-servicenow-connection-start_servicenow">23.2. Obtaining records from ServiceNow to trigger integration execution</h3><div class="paragraph"><p>To trigger execution of an integration upon receiving records from ServiceNow, add a ServiceNow connection to a simple integration as its start connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a ServiceNow connection.</p></li><li><p>You know the name of the table that you want to retrieve records from.</p></li><li><p>You should have already defined a ServiceNow query that obtains only the records that you want. You can find information about ServiceNow queries here: <a href="https://docs.servicenow.com/bundle/jakarta-platform-user-interface/page/use/using-lists/concept/c_EncodedQueryStrings.html">ServiceNow encoded queries</a>.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the ServiceNow connection that you want to use to start the integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select <strong>Retrieve Record</strong> to obtain records from a ServiceNow table that you select.</p></li><li><p>Configure the <strong>Retrieve Record</strong> action:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Click in the <strong>Table name</strong> field and select the table that you want to obtain records from.</p></li><li><p>In the <strong>Query to filter the result set</strong> field, enter a ServiceNow query. For example, consider the <code>state=1^impact=2</code> query on a table that keeps records about incidents. This query returns records for new incidents (<code>state=1</code>) that have a medium impact (<code>impact=2</code>). If you do not enter a query and the records in the table do not change, the connection obtains the same records every time.</p></li><li><p>In the <strong>Limit of elements per page</strong> field, enter the maximum number of records that you want the connection to obtain. In this release, you must enter a value, the recommendation is to enter <code>1000</code> or less, and pagination is not supported.</p></li><li><p>In the <strong>Period</strong> field, indicate how often you want to obtain records. The default is every minute. In other words, by default, Syndesis executes this integration every 60 seconds.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div></li></ol></div><div class="paragraph"><div class="title">Results</div><p>Syndesis generates a JSON schema that defines the structure of the obtained records. This enables you to add a data mapping step before the next connection in the integration if data mapping is needed.</p></div><div class="paragraph"><p>Syndesis prompts you to choose a finish connection.</p></div></div><div class="sect2"><h3 id="create-servicenow-import-set_servicenow">23.3. Creating an import set in ServiceNow</h3><div class="paragraph"><p>In a Syndesis integration, a ServiceNow connection cannot directly update a ServiceNow table. To update ServiceNow data in an integration, a prerequisite is an import set that stages updates for a ServiceNow table.</p></div><div class="paragraph"><p>Often, the easiest way to create an import set is for a ServiceNow administrator to create a ServiceNow inbound web service. This implicitly creates a ServiceNow import set. The import set is based on the ServiceNow target table that the administrator selects when creating the web service. A ServiceNow connection updates this import set, and ServiceNow uses the import set to update the corresponding ServiceNow table.</p></div><div class="paragraph"><div class="title">Prerequisites</div><p>You must have ServiceNow administrative privileges.</p></div><div class="olist arabic"><div class="title">Procedure in ServiceNow</div><ol class="arabic"><li><p>In ServiceNow, search for <code>web services</code>.</p></li><li><p>In the results, under <strong>System Web Services</strong> &gt; <strong>Inbound</strong>, click <strong>Create New</strong>.</p></li><li><p>In the <strong>Create Web Service</strong> page:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Label</strong> field, specify the display name for the web service. The web service&#8217;s import set will also have this name.</p></li><li><p>In the <strong>Target table</strong> field, select the ServiceNow table that this service updates.</p></li><li><p>Select <strong>Copy fields from target table</strong>. This creates an import set that has the same schema as the target table. The import set is a staging area for updating the target table.</p></li><li><p>Select <strong>Create transform map</strong>. This map enables ServiceNow to copy and transform data from the import set to the target table.</p></li></ol></div></li><li><p>Click <strong>Create</strong>.</p></li><li><p>In the next display, under <strong>Related Links</strong>, click <strong>Auto Map Matching Fields</strong> to display a list of fields in the target table that you selected.</p></li><li><p>Select one target table field to be the correlation (or coalesce) field.</p><div class="paragraph"><p>When the value of the correlation field in a record in the import set matches the value of a correlation field in the target table, ServiceNow updates that record in the target table rather than creating a new record.</p></div></li><li><p>Select <strong>Coalesce</strong> to identify the field that you just selected as the correlation field. Without a correlation field, ServiceNow adds each record in the import set to the target table.</p></li><li><p>Click <strong>Update</strong>.</p></li><li><p>Confirm that the transform map was created:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In ServiceNow, search for <code>transform map</code>.</p></li><li><p>Under <strong>System Import Sets</strong>, click <strong>Transform Maps</strong> to display a list of transform maps.</p></li><li><p>In this list, confirm that there is a transform map whose name is the value that you specified for the label of the web service that you created.</p></li></ol></div></li></ol></div><div class="paragraph"><div class="title">Additional resource</div><p><a href="https://docs.servicenow.com/bundle/london-platform-administration/page/administer/import-sets/reference/import-sets-landing-page.html">ServiceNow documentation for import sets</a></p></div></div><div class="sect2"><h3 id="add-servicenow-connection-finish_servicenow">23.4. Copying records to ServiceNow during or to finish an integration</h3><div class="paragraph"><p>You can copy records to ServiceNow in the middle of a flow or to finish a simple integration. To do this, add a ServiceNow connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a ServiceNow connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li><li><p>You know the name of the ServiceNow import set that you want to add records to. Your ServiceNow administrator can help you identify the appropriate import set. If the import set does not exist, see <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#create-servicenow-import-set_servicenow">Creating an import set in ServiceNow</a>.</p></li><li><p>The ServiceNow import set is configured to handle the addition of records.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the ServiceNow connection that you want to add to the integration.</p></li><li><p>Select the <strong>Add Record</strong> action.</p></li><li><p>Click in the <strong>Import Set</strong> field and select the import set that you want to add records to.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Results</div><p>Syndesis adds the connection to the flow.</p></div><div class="paragraph"><p>Typically, a data mapper step is needed before this connection. In the integration visualization, Syndesis displays <span class="image"><img src="images/tutorials/WarningIcon.png" alt="Data Type Mismatch"></span>on the connection. In most integrations, you need to map a source field to the target field used as the correlation field in the ServiceNow table.</p></div></div><div class="sect2"><h3 id="example-sf-servicenow-integration_servicenow">23.5. Example Salesforce to ServiceNow integrations</h3><div class="paragraph"><p>This example describes two simple integrations:</p></div><div class="ulist"><ul><li><p>One integration obtains new cases from Salesforce and adds them as incidents to ServiceNow.</p></li><li><p>The other integration obtains updated cases from Salesforce and updates a corresponding incident in ServiceNow.</p></li></ul></div><div class="paragraph"><div class="title">Prerequisites (in ServiceNow)</div><p>For both integrations, a prerequisite is for a ServiceNow administrator to create an inbound web service. This implicitly creates a ServiceNow import set, which is required for an integration to add data to ServiceNow. For this example:</p></div><div class="ulist"><ul><li><p>The name of the web service is <strong>Cases from Salesforce</strong>.</p></li><li><p>The service&#8217;s target table is <strong>Incidents</strong>. This table contains the data to be updated.</p></li><li><p>The import set has the same schema as the <strong>Incidents</strong> table because of the selection of <strong>Copy fields from target table</strong>. The name of the import set is also <strong>Cases from Salesforce</strong>.</p></li><li><p>ServiceNow can copy and transform data from the <strong>Cases from Salesforce</strong> import set to the <strong>Incidents</strong> target table because of the selection of <strong>Create transform map</strong>.</p></li><li><p>In the import set, the correlation field is <code>correlation_Id</code> because of the selection of the <code>correlation_Id</code> field followed by selection of <strong>Coalesce</strong>.</p></li></ul></div><div class="paragraph"><div class="title">Procedure overview (in Syndesis)</div><p>In Syndesis, you create the Salesforce and ServiceNow connections.</p></div><div class="paragraph"><p>The two integrations are the same except for the action performed by the Salesforce connection, as noted in the following steps. To create the integrations, you would perform these steps twice, that is, once to create each integration:</p></div><div class="olist arabic"><ol class="arabic"><li><p>Add the Salesforce connection as the start connection.</p><div class="ulist"><ul><li><p>To create the integration that obtains new cases, select the <strong>On create</strong> action.</p></li><li><p>To create the integration that obtains updated cases, select the <strong>On update</strong> action.</p></li></ul></div></li><li><p>Select the <strong>Case</strong> object for the action to operate on. This Salesforce connection returns new <strong>Case</strong> objects or updated <strong>Case</strong> objects according to the chosen action.</p></li><li><p>Add the ServiceNow connection as the finish connection.</p></li><li><p>Select the <strong>Create Record</strong> action, and then select <strong>Cases from Salesforce</strong> as the import set that the integration updates.</p><div class="paragraph"><p>This ServiceNow connection adds new or updated Salesforce cases to the <strong>Cases from Salesforce</strong> import set.</p></div></li><li><p>Add a data mapper step that maps:</p><div class="ulist"><ul><li><p>Salesforce case <code>id</code> to the ServiceNow import set&#8217;s <code>correlation_Id</code></p></li><li><p>Salesforce <code>subject</code> to the ServiceNow <code>short_description</code></p></li><li><p>Salesforce <code>description</code> to the ServiceNow <code>description</code></p></li></ul></div></li><li><p>Give the integration a name and then publish it.</p><div class="ulist"><ul><li><p>For the integration that obtains new cases, use <strong>On SF Create Case</strong>.</p></li><li><p>For the integration that obtains updated cases, <strong>On SF Update Case</strong>.</p></li></ul></div></li></ol></div><div class="paragraph"><div class="title">Confirm that the integrations work</div><p>When both integrations are running, you can confirm that the integrations work:</p></div><div class="olist arabic"><ol class="arabic"><li><p>In Salesforce, create a case.</p></li><li><p>In Syndesis, view the summary for the <strong>On SF Create Case</strong> integration. Click its <strong>Activity</strong> tab to see that Syndesis executed the integration once.</p></li><li><p>In ServiceNow, view the <strong>Incidents</strong> table. You should see a new incident that has the subject and description that you specified in Salesforce.</p></li><li><p>Back in Salesforce, update the case that you just created by changing its subject.</p></li><li><p>In Syndesis, view the summary for the <strong>On SF Update Case</strong> integration. Click its <strong>Activity</strong> tab to see that Syndesis executed the integration once.</p></li><li><p>In ServiceNow, view the <strong>Incidents</strong> table and expand the entry for the incident that was previously new. You should see that this incident has an updated <code>short_description</code> value. ServiceNow checks the import set entry for the value of its <code>correlation_Id</code>. If this value already exists in the <strong>Incidents</strong> table, ServiceNow updates the incident that has that value.</p></li></ol></div></div></div></div><div class="sect1"><h2 id="connecting-to-slack_connectors">24. Connecting to Slack</h2><div class="sectionbody"><div class="paragraph"><p>As a business user, you can create an integration that connects to Slack. A connection to Slack can do either one of the following:</p></div><div class="ulist"><ul><li><p>Trigger execution of a simple integration when a Slack channel that you specify receives a message. The integration passes the message to the next step in the flow. For example, you can monitor a Slack channel for keyword instances such as product names. Upon finding messages that contain those product names, the integration can notify the appropriate contact in a Gmail connection.</p></li><li><p>Deliver a message to a particular user or to a channel. For example, this behavior is useful when an integration downloads a file from an FTP server and processes it in some way. An integration flow can notify a Slack channel or user that the process was successful.</p></li></ul></div><div class="paragraph"><p>To connect to Slack in an integration, create a Slack connection and then add the connection to an integration flow. Details are in the following topics:</p></div><div class="ulist"><ul><li><p><a href="#creating-slack-connections_slack">Creating a Slack connection</a></p></li><li><p><a href="#add-slack-connection-start_slack">Adding a Slack connection to trigger integration execution upon receiving messages</a></p></li><li><p><a href="#add-slack-connection-middle-finish_slack">Adding a Slack connection to send a message to a Slack channel or user</a></p></li></ul></div><div class="sect2"><h3 id="creating-slack-connections_slack">24.1. Creating a Slack connection</h3><div class="paragraph"><p>In an integration, a Slack connection can retrieve messages from a channel that you specify or send a message to a channel or user. You can use the same Slack connection in any number of integrations.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Slack app for connecting Syndesis to Slack.</p></li><li><p>You can obtain the Slack webhook URL for your Slack app.</p></li><li><p>You can obtain a legacy token that authorizes access to your Slack app.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display Syndesis connectors.</p></li><li><p>Click the <strong>Slack</strong> connector.</p></li><li><p>In the <strong>Slack webhook URL</strong> field, enter the webhook URL for your Slack app.</p></li><li><p>In the <strong>Token for accessing Slack API</strong> field, enter the Slack-provided token, which you can <a href="https://api.slack.com/custom-integrations/legacy-tokens">obtain from Slack.</a></p></li><li><p>Optionally, enter values for additional parameters:</p><div class="ulist"><ul><li><p>In the <strong>Sending username for messages</strong> field, enter the user name that the bot has when it sends messages to Slack.</p></li><li><p>In the <strong>Message avatar emoji</strong> field, specify one emoji, which the bot uses as the message avatar when it sends a message. Examples: <strong><code>:smile:</code></strong>, <strong><code>:wave:</code></strong>, <strong><code>:question:</code></strong>.</p><div class="admonitionblock tip"><table><tr><td class="icon"><div class="title">Tip</div></td><td class="content">Search the web for <strong>emoji cheat sheet</strong> to see some emoji codes.</td></tr></table></div></li><li><p>In the <strong>Message avatar icon URL</strong> field, specify the URL of the avatar that the bot uses when it sends messages to Slack.</p></li></ul></div><div class="paragraph"><p>If you specify an emoji and an icon URL, then the integration uses the icon URL. If you specify neither an emoji nor an icon URL, then the message is sent without an avatar.</p></div></li><li><p>Click <strong>Validate</strong>. Syndesis immediately tries to validate the connection and displays a message that indicates whether validation is successful. If validation fails, revise the connection configuration values and try again.</p></li><li><p>If validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code><strong>Slack for Tracking Company Sales</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection.</p></li><li><p>Click <strong>Save</strong> to see the updated list of available connections, including the connection that you just created. If you entered the example name, you would see that <strong>Slack for Tracking Company Sales</strong> appears as a connection that you can choose to add to an integration. You can add this connection to any number of integrations.</p></li></ol></div></div><div class="sect2"><h3 id="add-slack-connection-start_slack">24.2. Adding a Slack connection to trigger integration execution upon receiving messages</h3><div class="paragraph"><p>A Slack connection that starts an integration triggers execution of the integration when the connection finds messages on a Slack channel that you specify.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Slack connection.</p></li><li><p>You are creating an integration and Syndesis is prompting you to choose how you want to start the integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>Click the Slack connection that you want to use to start the integration.</p></li><li><p>Select the <strong>Read Messages</strong> action.</p></li><li><p>In the <strong>Channel</strong> field, specify the Slack channel from which you want to obtain messages.</p></li><li><p>In the <strong>Delay</strong> field, accept the default of 500 milliseconds as the time that elapses between polls for messages. Or, to specify a different interval for checking for messages, enter a number and select its time unit.</p></li><li><p>In the <strong>Maximum Messages to Retrieve</strong> field, accept the default of 10 or indicate the maximum number of messages that the connection can return for each poll. If the connection finds more than this number of unread messages, then it returns the most recent messages. The connection returns a particular message only once.</p><div class="paragraph"><p>For example, if you accept the default of 10 and there are 15 messages at the time of a poll then the connection returns the 10 most recent messages. At the next poll, the connection checks for messages that have a time stamp that is after the most recent message that the connection previously returned. This means that the 5 messages that were not returned in the first example poll are never returned.</p></div><div class="paragraph"><p>When a Slack connection returns more than one message, the integration processes the messages as a batch. In other words, Syndesis executes the integration once for the batch.</p></div></li><li><p>Click <strong>Next</strong> to add the connection to the integration.</p></li></ol></div></div><div class="sect2"><h3 id="add-slack-connection-middle-finish_slack">24.3. Adding a Slack connection to send a message to a Slack channel or user</h3><div class="paragraph"><p>In an integration, you can send a message to a Slack channel or Slack user in the middle of a flow or to finish a simple integration. To do this, add a Slack connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Slack connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the Slack connection that you want to add to the flow.</p></li><li><p>Select the action that you want the connection to perform.</p><div class="ulist"><ul><li><p>Select <strong>Username</strong> to send a message to one user. To configure this action, in the <strong>User name</strong> field, specify the Slack name of the user to send the message to.</p></li><li><p>Select <strong>Channel</strong> to publish a message on a channel. To configure this action, in the <strong>Channel</strong> field, specify the channel to publish the message to.</p></li></ul></div></li><li><p>Click <strong>Next</strong> to add the connection to the flow.</p></li><li><p>Optionally, add additional connections to the flow. Whether additional connections are needed depends on what you want the flow to do. The important point is to add all connections before you continue.</p></li><li><p>Add a data mapper step just before the Slack connection that you added in this procedure. In the mapping step, map a string from a data mapping source to the Slack <strong>message</strong> field. This string should contain the message that you want to send to the Slack user or channel. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/integrating_applications_with_fuse_online/#add-data-mapping-step_create">Adding a data mapper step</a>.</p></li></ol></div></div></div></div><div class="sect1"><h2 id="connecting-to-databases_connectors">25. Connecting to SQL databases</h2><div class="sectionbody"><div class="paragraph"><p>In an integration, you can connect to any of the following types of SQL databases:</p></div><div class="ulist"><ul><li><p>Apache Derby</p></li><li><p>MySQL</p></li><li><p>PostgreSQL</p></li></ul></div><div class="paragraph"><p>Create a connection to the database that you want to access in an integration. Then create an integration and add that database connection to the integration.</p></div><div class="paragraph"><p>To connect to other types of databases, you must upload a JDBC driver for that database.</p></div><div class="paragraph"><p>See the following topics for details:</p></div><div class="ulist"><ul><li><p><a href="#create-database-connection_db">Creating a database connection</a></p></li><li><p><a href="#how-to-specify-the-schema-in-a-database-connection_db">How to specify the schema in a database connection</a></p></li><li><p><a href="#adding-db-connection-start_db">Obtaining database records to trigger integration execution</a></p></li><li><p><a href="#about-parameter-placeholders-and-values_db">About parameter placeholders and values in SQL statements that update data</a></p></li><li><p><a href="#adding-db-connection-finish-middle_db">Accessing a database in the middle or to complete an integration</a></p></li><li><p><a href="#connecting-to-proprietary-databases_db">Connecting to proprietary databases</a></p></li></ul></div><div class="sect2"><h3 id="create-database-connection_db">25.1. Creating a database connection</h3><div class="paragraph"><p>You create a separate connection for each database that you want to connect to in an integration. You can use the same connection in multiple integrations.</p></div><div class="paragraph"><p>A database connection operates on a database table that you specify or invokes a stored procedure that you specify.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>The database table or the stored procedure must exist when an integration connects to the database.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>Ensure that the JDBC driver for the database that you want to connect to is on your classpath. If you uploaded a JDBC driver library extension to connect to a proprietary database, then the upload process puts the driver on your classpath. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/integrating_applications_with_fuse_online/#creating-jdbc-driver-library-extensions_extensions">Creating JDBC driver library extensions</a>.</p></li><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display Syndesis connectors.</p></li><li><p>Click the <strong>Database</strong> connector.</p></li><li><p>Configure the connection by entering:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the <strong>Connection URL</strong> field, enter the JDBC URL for the database that you want to connect to. For example, enter <code><strong>jdbc:postgresql://ignite-db1234/sampledb</strong></code>.</p></li><li><p>In the <strong>Username</strong> field, enter the name of the account that you want to use to access the database. Ensure that the specified password and user name are for the same account.</p></li><li><p>In the <strong>Password</strong> field, enter the password associated with the user account you want to use to access the database.</p></li><li><p>In the <strong>Schema</strong> field, enter the name of the schema for the database. How you specify the database schema varies for each type of database. Details are in the next section: <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#how-to-specify-the-schema-in-a-database-connection_db">How to specify the schema in a database connection</a>.</p></li></ol></div></li><li><p>Click <strong>Validate</strong>. Syndesis tries to validate the connection and displays a message that indicates whether validation is successful. If validation fails, revise the configuration details as needed and try again.</p></li><li><p>If validation is successful, click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code><strong>PostgreSQL DB 1</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample PostgreSQL connection that uses my login credentials.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>PostgreSQL DB 1</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="how-to-specify-the-schema-in-a-database-connection_db">25.2. How to specify the schema in a database connection</h3><div class="paragraph"><p>In Syndesis, when you create a database connection, the user interface prompts you to specify the database’s schema. How you specify the schema varies for each database. The table below shows what each database requires.</p></div><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width:20%"><col style="width:40%"><col style="width:40%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Database</th><th class="tableblock halign-left valign-top">Example connection configuration</th><th class="tableblock halign-left valign-top">Notes</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Apache Derby</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Connection URL</strong> (JDBC URL): <code>jdbc:derby:memory:testdb;create=true</code><br><strong>Username</strong>: <code>sa</code><br><strong>Password</strong>: any value<br><strong>Schema</strong>: <code>sample</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">For testing purposes only. The default username is <code>sa</code> and the password can be anything but you must enter a value. In this example configuration, the connection uses the <code>sample</code> schema, which is like a namespace. For example, you can reference the <code>mytable</code> table with <code>sample.mytable</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">MS SQLServer</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Connection URL</strong> (JDBC URL): <code>jdbc:sqlserver://localhost:1433/sampledb</code><br><strong>Username</strong>: <code>kurt</code><br><strong>Password</strong>: <code>mypw</code><br><strong>Schema</strong>: <code>sampledb</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Upload the driver by using the <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/integrating_applications_with_fuse_online/#creating-jdbc-driver-library-extensions_extensions">extension mechanism</a>. Then create a connection. Connection verification fails if you have not already uploaded the driver. You must specify the same schema at the end of the connection URL and in the <strong>Schema</strong> field.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">MySQL</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Connection URL</strong> (JDBC URL): <code>sql-connector.url=jdbc:mysql://mysql-host:3307/test?allowPublicKeyRetrieval=true&amp;useSSL=false&amp;useUnicode=true&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC</code><br><strong>Username</strong>: <code>kurt</code><br><strong>Password</strong>: <code>mypw</code><br><strong>Schema</strong>:</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">MySQL does not support schemas. When you create a connection to a MySQL database, leave the <strong>Schema</strong> field blank. MySQL expects all configuration in the connection (JDBC) URL.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Oracle DB</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Connection URL</strong> (JDBC URL): <code>jdbc:oracle:thin:@10.192.212.255:1521:xe</code><br><strong>Username</strong>: <code>kurt</code><br><strong>Password</strong>: <code>mypw</code><br><strong>Schema</strong>:</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Use the Syndesis <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/integrating_applications_with_fuse_online/#creating-jdbc-driver-library-extensions_extensions">extension mechanism</a>. to upload an Oracle database driver. Then create the connection. Connection verification fails if the driver has not been uploaded.<br>The schema is the database name. You must have permission to access this database instance, which is referred to as a schema in Oracle terminology. Leave the <strong>Schema</strong> field blank. In the <strong>Connection</strong> field, you must reference the Oracle system identifier (SID) of this database instance (<code>xe</code> in this example).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">PostgreSQL</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Connection URL</strong> (JDBC URL): <code>jdbc:postgresql://syndesis-db:5432/sampledb</code><br><strong>Username</strong>: <code>kurt</code><br><strong>Password</strong>: <code>mypw</code><br><strong>Schema</strong>: <code>sampledb</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">You must specify the database in the connection (JDBC) URL. T If you want to use a schema you must specify it in the <strong>Schema</strong> field. A query can refer to a table in the form <em>database.schema.table</em>. When a reference specifies only a table name, the connection first searches the schema that you specify when you configure the connection. If the table is not found, then the connection searches public resources for the specified table. For more details, see <a href="https://www.postgresql.org/docs/9.1/ddl-schemas.html">PostgreSQL schema documentation</a>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Teiid</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Connection URL</strong> (JDBC URL): <code>jdbc:teiid:&lt;vdb-name&gt;@mm://localhost:31000</code><br><strong>Username</strong>: any value<br><strong>Password</strong>: any value<br><strong>Schema</strong>:</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">The virtual database must have already been created, for example by using the <a href="https://access.redhat.com/documentation/en-us/red_hat_integration/2019-12/html-single/data_virtualization/#creating-vdbs">Data Virtualization</a> feature. In the connection URL, replace <code>&lt;vdb-name&gt;</code> with the name of the virtual database. No security has been implemented yet for connections to Teiid. Specify any value in the <strong>Username</strong> and <strong>Password</strong> fields. Leave the <strong>Schema</strong> field blank. The driver is already available in Syndesis.</p></td></tr></tbody></table></div><div class="sect2"><h3 id="adding-db-connection-start_db">25.3. Obtaining database records to trigger integration execution</h3><div class="paragraph"><p>To trigger execution of an integration based on the result of invoking a SQL statement or a SQL stored procedure, choose a database connection as the integration&#8217;s start connection.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You created a database connection.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In the Syndesis panel on the left, click <strong>Integrations</strong>.</p></li><li><p>Click <strong>Create Integration</strong>.</p></li><li><p>On the <strong>Choose a connection</strong> page, click the database connection that you want to use to start an integration.</p></li><li><p>On the <strong>Choose an action</strong> page, select one of the following:</p><div class="ulist"><ul><li><p><strong>Periodic SQL invocation</strong> obtains data by periodically invoking the SQL statement that you specify.</p></li><li><p><strong>Periodic stored procedure invocation</strong> obtains data by periodically invoking the stored procedure that you specify or select.</p></li></ul></div></li><li><p>If you selected <strong>Periodic SQL invocation</strong>, in the <strong>Query</strong> field, enter a SQL <code>SELECT</code> statement or some other standard SQL statement that obtains one or more records. For example: <code><strong>SELECT * from my_db_table</strong></code>. The database table that contains the data you want must already exist.</p><div class="paragraph"><p>If you selected <strong>Periodic stored procedure invocation</strong>, in the <strong>Procedure name</strong> field, select or enter the stored procedure to invoke to obtain the data of interest. The stored procedure you specify must already exist. The database administrator should have created any stored procedures you need to use in an integration.</p></div></li><li><p>In the <strong>Period</strong> field, enter an integer and indicate whether the unit is milliseconds, seconds, minutes, hours, or days. For example, if you specify <code>5 minutes</code> then the connection invokes the specified statement or stored procedure every five minutes.</p></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Limitations on the use of SQL extensions</div><p>SQL statements that you enter in the <strong>Query</strong> field must be standard SQL constructs. Syndesis does not recognize or parse SQL extensions such as Procedural Language/PostgreSQL (PL/pgSQL) or Oracle Procedural Language Extensions to SQL (PL/SQL). However, you can use SQL extensions within stored procedures.</p></div><div class="paragraph"><div class="title">Result</div><p>Syndesis tries to validate the connection, which includes checking that a specified SQL statement is syntactically correct and confirming that the statement or stored procedure target data exists. If verification is successful then Syndesis adds the start connection to the integration. If verification fails then Syndesis displays a message about the problem. Update your input as needed and try again.</p></div></div><div class="sect2"><h3 id="about-parameter-placeholders-and-values_db">25.4. About parameter placeholders and values in SQL statements that update data</h3><div class="paragraph"><p>A database connection that is in the middle of a flow, or that finishes a simple integration, can execute a SQL statement that updates data. When you add a database connection to an integration, you can specify placeholder parameters in the SQL statement to be executed. During execution, the connection can perform a batch update when the input parameter values are in a collection.</p></div><div class="paragraph"><div class="title">Specifying parameters in SQL statements</div><p>When you create or edit an integration and you add a connection that updates a database, you can specify placeholder parameters in the SQL statement that the connection executes at runtime or there can be placeholders in the stored procedure that will be executed at runtime. For example:</p></div><div class="listingblock"><div class="content"><pre class="highlight"><code>INSERT INTO TODO(task, completed) VALUES(:#param_1, :#param_2)
DELETE FROM TODO WHERE task LIKE :#param_3</code></pre></div></div><div class="paragraph"><p>To specify the values of these placeholders, add a data mapping step to the flow before the database connection. In the data mapping step, map the appropriate source data fields to the target data fields, for example, map source data to the <code>:#param_1</code>, <code>:#param_2</code>, and <code>:#param_3</code> target fields. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/integrating_applications_with_fuse_online/#add-data-mapping-step_create">Adding a data mapper step</a>.</p></div><div class="paragraph"><div class="title">Batch update with a collection of parameter values</div><p>At runtime, when a database connection executes a SQL statement that inserts, deletes, or updates data, the SQL statement being executed often specifies one or more placeholder parameters, for example, <code>:#task</code>. When it does, the input to the connection can be a single set of parameters or a collection of parameter sets, where each element in a set defines a value for the corresponding placeholder parameter.</p></div><div class="paragraph"><p>The input to the database connection comes from an earlier connection in the flow, for example, an HTTP request (Webhook) or a request sent to the REST API service for an API provider integration. When the input is a collection, the connection uses batch mode to update the table. For example, consider this SQL statement:</p></div><div class="listingblock"><div class="content"><pre>insert into todo (task) values (:#task)</pre></div></div><div class="paragraph"><p>If the input collection contains 3 values, the connection inserts three records, one for each value. Now consider a SQL statement with two placeholder parameters:</p></div><div class="listingblock"><div class="content"><pre>insert into todo (task, completed) values (:#task, :#completed)</pre></div></div><div class="paragraph"><p>In the input to the connection that executes this SQL statement, a data shape specification could specify a single element, for example:</p></div><div class="listingblock"><div class="content"><pre>{"task": "write some docs", "completed": 0}</pre></div></div><div class="paragraph"><p>Or it could specify a collection, for example:</p></div><div class="listingblock"><div class="content"><pre>[{"task": "write doc", "completed": 1},
 {"task": "publish doc", "completed": 0}]</pre></div></div><div class="paragraph"><p>With a collection as input, the connection executes the insert operation once for each set of parameter values. In this example, the connection adds two records to the table, one for each set of parameter values.</p></div></div><div class="sect2"><h3 id="adding-db-connection-finish-middle_db">25.5. Accessing a database in the middle or to complete an integration</h3><div class="paragraph"><p>In an integration, you can access a database in the middle of a flow or to finish a simple integration. To do this, add a database connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a database connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the database connection for the database that you want to access.</p></li><li><p>On the <strong>Choose an action</strong> page, select one of the following:</p><div class="ulist"><ul><li><p><strong>Invoke SQL</strong> operates on data by executing the SQL statement you specify.</p></li><li><p><strong>Invoke stored procedure</strong> operates on data by invoking the stored procedure that you specify or select.</p></li></ul></div></li><li><p>If you selected <strong>Invoke SQL</strong>, in the <strong>SQL Statement</strong> field:</p><div class="ulist"><ul><li><p>For a middle connection, enter a SQL <code>SELECT</code> statement that obtains one or more records or enter a SQL <code>INSERT</code>, <code>UPDATE</code>, or <code>DELETE</code> statement that operates on one or more records. The database table that contains the data must already exist.</p></li><li><p>For a finish connection, enter a SQL <code>INSERT</code>, <code>UPDATE</code> or <code>DELETE</code> statement to operate on one or more records.</p></li><li><p>In the <strong>Batch update</strong> field, accept <strong>No</strong>, which is the default, or select <strong>Yes</strong>.</p><div class="paragraph"><p>The setting of <strong>Batch update</strong> affects connection behavior when the input to this action is a collection, and the SQL statement inserts, deletes, or updates records. The default behavior (<strong>Batch update</strong> is <strong>No</strong>) is that the connection accepts only individual objects and executes the SQL statement once for each object. When <strong>Batch update</strong> is <strong>Yes</strong>, the connection accepts a collection as the input to the action. The connection executes the SQL statement once and uses all collection items as input to a batch update operation.</p></div></li></ul></div><div class="paragraph"><p>If you selected <strong>Invoke stored procedure</strong>, in the <strong>Procedure name</strong> field, select or enter the name of the stored procedure to invoke to operate on the data of interest. The stored procedure you specify must already exist. The database administrator should have created any stored procedures you need to use in an integration.</p></div></li><li><p>Click <strong>Next</strong>.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>Syndesis tries to validate the connection, which includes checking that a specified SQL query is syntactically correct and confirming that the query or stored procedure target data exists. If verification is successful then Syndesis adds the connection to the flow. If verification fails then Syndesis displays a message about the problem. Update your input as needed and try again.</p></div><div class="paragraph"><div class="title">Additional resource</div><p><a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/about-parameter-placeholders-and-values_db">About parameter placeholders and values in SQL statements that update data</a>.</p></div></div><div class="sect2"><h3 id="connecting-to-proprietary-databases_db">25.6. Connecting to proprietary databases</h3><div class="paragraph"><p>To connect to a proprietary SQL database, the main tasks that must be accomplished are as follows:</p></div><div class="olist arabic"><ol class="arabic"><li><p>A developer creates a library extension that contains the JDBC driver for the database that you want to access in an integration. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/integrating_applications_with_fuse_online/#creating-jdbc-driver-library-extensions_extensions">Creating JDBC driver library extensions</a>.</p></li><li><p>The developer provides a <code>.jar</code> file that contains the library extension.</p></li><li><p>You upload that <code>.jar</code> file to Syndesis. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/integrating_applications_with_fuse_online/#making-extensions-available_add-extension">Making extensions available</a>.</p></li><li><p>You create a connection to your database by selecting the Syndesis <strong>Database</strong> connector and specifying the connection URL for your database. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#create-database-connection_db">Creating a database connection</a>.</p></li><li><p>In an integration, you add the connection to your database. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#adding-db-connection-start_db">Starting an integration by accessing a database</a> or <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#adding-db-connection-finish-middle_db">Accessing a database in the middle or to complete an integration</a>.</p></li></ol></div></div></div></div><div class="sect1"><h2 id="connecting-to-telegram_connectors">26. Connecting to Telegram</h2><div class="sectionbody"><div class="paragraph"><p>As a business user, you can create an integration that connects to Telegram. A connection to Telegram can do either one of the following:</p></div><div class="ulist"><ul><li><p>Trigger execution of a simple integration when a Telegram bot that you specify receives a message. The integration passes the message to the next step in the flow. For example, after a simple integration receives a message there might be a filter step that watches for keyword instances such as product names. Upon finding messages that contain those product names, the integration can notify the appropriate contact in a Gmail connection or in a different Telegram connection.</p></li><li><p>Deliver a message to a particular Telegram chat. For example, this behavior is useful when an integration downloads a file from an FTP server and processes it in some way. You can add a Telegram connection that notifies a Telegram chat that the process was successful.</p></li></ul></div><div class="paragraph"><p>To connect to Telegram in an integration, create a Telegram connection and then add the connection to an integration flow. Details are in the following topics:</p></div><div class="ulist"><ul><li><p><a href="#creating-telegram-connections_connectors">Creating a Telegram connection</a></p></li><li><p><a href="#add-telegram-connection-start_connectors">Adding a Telegram connection to trigger integration execution upon receiving messages</a></p></li><li><p><a href="#add-telegram-connection-middle-finish_connectors">Adding a Telegram connection to send a message to a Telegram chat</a></p></li></ul></div><div class="sect2"><h3 id="creating-telegram-connections_connectors">26.1. Creating a Telegram connection</h3><div class="paragraph"><p>In an integration, a Telegram connection can receive messages that have been sent to a particular chat. A chat bot that you create forwards the messages to Syndesis. A Telegram connection can also send messages to chats that the connection has access to. You can use the same Telegram connection:</p></div><div class="ulist"><ul><li><p>In any number of integrations that use the connection to send messages to a chat.</p></li><li><p>In addition, you can use it in one integration that uses the connection to receive messages from a Telegram chat.</p></li></ul></div><div class="paragraph"><p>In other words, you cannot use the same Telegram connection in more than one integration if you want that connection to receive Telegram chat messages in both integrations. This is a Telegram limitation.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>In Telegram, you created a bot for the chat that you want to obtain messages from and send messages to. For help with this, see <a href="https://core.telegram.org/bots">Bots, an introduction for developers</a>.</p></li><li><p>You obtained a bot authorization token from the Telegram BotFather.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display Syndesis connectors.</p></li><li><p>Click the <strong>Telegram</strong> connector.</p></li><li><p>In the <strong>Authorization Token</strong> field, enter the Telegram authorization token for the bot that you want to get messages from and send messages to.</p></li><li><p>Click <strong>Next</strong>.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code><strong>Telegram for Product Mentions</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection.</p></li><li><p>Click <strong>Save</strong> to see the updated list of available connections, including the connection that you just created. If you entered the example name, you would see that <strong>Telegram for Product Mentions</strong> appears as a connection that you can choose to add to an integration. You can add this connection to any number of integrations.</p></li></ol></div></div><div class="sect2"><h3 id="add-telegram-connection-start_connectors">26.2. Adding a Telegram connection to trigger integration execution upon receiving messages</h3><div class="paragraph"><p>A Telegram connection that starts an integration triggers execution of the integration each time that the connection receives a message from a Telegram chat bot that you specify.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Telegram connection.</p></li><li><p>You are creating a simple integration and Syndesis is prompting you to choose how you want to start the integration.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>Click the Telegram connection that you want to use to start the integration.</p></li><li><p>Select the <strong>Read Messages</strong> action to receive all messages that are sent to the chat bot.</p><div class="paragraph"><p>The connection configuration identifies the chat bot that you want to receive messages from. No other configuration is required.</p></div></li></ol></div></div><div class="sect2"><h3 id="add-telegram-connection-middle-finish_connectors">26.3. Adding a Telegram connection to send a message to a Telegram chat</h3><div class="paragraph"><p>In an integration, you can send a message to a Telegram chat in the middle of a flow or to finish a simple integration. To do this, add a Telegram connection to the middle of a flow or as a simple integration&#8217;s finish connection.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Telegram connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add the connection. Skip this step if Syndesis is prompting you to choose the finish connection.</p></li><li><p>Click the Telegram connection that you want to add to the flow.</p></li><li><p>Select the <strong>Send a Text Message</strong> action.</p></li><li><p>In the <strong>Chat Id</strong> field, enter the ID for the Telegram chat that you are sending a message to.</p><div class="paragraph"><p>If you leave this field blank, and if there is an earlier Telegram connection that receives messages, then Syndesis uses the chat ID that is in an incoming message.</p></div><div class="paragraph"><p>To obtain the ID for a chat:</p></div><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In Telegram, add a bot to the chat that you want to send a message to. The BotFather response includes a bot access token.</p></li><li><p>Copy the access token to the clipboard.</p></li><li><p>In Telegram, send a message directly to that chat. Do not use the bot to send the message.</p></li><li><p>Read messages that are sent to that chat by invoking a <code>curl</code> command in the following format. Replace <code><em>bot-access-token</em></code> with the access token in the clipboard.</p><div class="paragraph"><p><code>curl https://api.telegram.org/<em>bot-access-token</em>/getUpdates\?offset\=0</code></p></div><div class="paragraph"><p>The response is in JSON format. The JSON <code>chat</code> object contains the chat ID.</p></div></li></ol></div></li><li><p>Click <strong>Next</strong> to add the connection to the flow.</p></li></ol></div></div></div></div><div class="sect1"><h2 id="connecting-to-twitter_connectors">27. Connecting to Twitter</h2><div class="sectionbody"><div class="paragraph"><p>To connect to Twitter in an integration, the main steps are:</p></div><div class="ulist"><ul><li><p><a href="#register-with-twitter_twitter">Registering Syndesis as a Twitter client application</a></p></li><li><p><a href="#create-twitter-connection_twitter">Creating a Twitter connection</a></p></li><li><p><a href="#adding-twitter-connection-start_twitter">Adding a Twitter connection to trigger integration execution</a></p></li><li><p><a href="#adding-twitter-connection-finish-middle_twitter">Adding a Twitter connection that sends a direct message</a></p></li></ul></div><div class="paragraph"><p>You need a Twitter developer account to authorize access from your Syndesis environment to Twitter. If you do not already have a Twitter developer account, go to <a href="https://apps.twitter.com" class="bare">https://apps.twitter.com</a>, sign in to Twitter, and click <strong>Apply for a developer account</strong>. Obtaining the developer account is quick when you provide a professional email address, such as <code>me@redhat.com</code> rather than a personal address such as <code>you@gmail.com</code>.</p></div><div class="sect2"><h3 id="register-with-twitter_twitter">27.1. Registering Syndesis as a Twitter client application</h3><div class="paragraph"><p>In an integration, to connect to Twitter, the first thing you must do is register your Syndesis environment as a client application that can access Twitter. This lets you create any number of integrations that connect to Twitter. In other words, you need to register a particular Syndesis environment with Twitter only once.</p></div><div class="paragraph"><p>In each Syndesis environment, there can be only one registration of Syndesis as a Twitter client application. However, while each Twitter connection uses the same registration, it can use different user credentials.</p></div><div class="paragraph"><div class="title">Prerequisite</div><p>You are logged in to Syndesis.</p></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the left panel, click <strong>Settings</strong>.</p></li><li><p>On the <strong>Settings</strong> page, near the top, to the right of the callback URL, click <span class="image"><img src="images/tutorials/CopyCallback.png" alt="Copy Callback URL"></span>to copy the callback URL for your installation of Syndesis to the clipboard. You will need this URL later in this procedure.</p></li><li><p>Click the <strong>Twitter</strong> entry to display the <strong>Consumer API Key</strong> and <strong>Consumer API Secret Key</strong> fields.</p></li></ol></div></li><li><p>In another browser tab, go to your <a href="https://developer.twitter.com/apps">Twitter developer account</a>, sign in if you need to, and do the following:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>In the upper right, next to the name of your developer project, click the down caret and click <strong>Apps</strong>.</p></li><li><p>In the upper right, click <strong>Create an app</strong>.</p></li><li><p>In the <strong>App name</strong> field, enter a name such as <strong>My Syndesis Client</strong>.</p></li><li><p>In the <strong>Application description</strong> field, enter a tip such as <strong>For leveraging tweets</strong>.</p></li><li><p>In the <strong>Website URL</strong> field, paste the URL that you copied at the beginning of this procedure and remove <code>api/v1/credentials/callback</code> from the end of the URL.</p></li><li><p>Select <strong>Enable Sign in with Twitter</strong>.</p></li><li><p>In the <strong>Callback URLs</strong> field, paste the URL again. It should be something like this: <code>https://app-proj912876.7b63.fuse-ignite.openshiftapps.com/api/v1/credentials/callback</code>.</p><div class="paragraph"><p>You can skip the next few fields.</p></div></li><li><p><strong>Tell us how this app will be used</strong> requires a 100-character description. For convenience, you can copy and paste: <code>This is a demo application so that I can evaluate how to integrate Twitter with my enterprise applications.</code></p></li><li><p>Click <strong>Create</strong>.</p></li><li><p>Click <strong>Create</strong> again to confirm that you reviewed the developer terms.</p></li><li><p>At the top of the page for the app you just created, click the <strong>Keys and tokens</strong> tab.</p></li><li><p>Copy the consumer API key.</p></li></ol></div></li><li><p>Return to your Syndesis <strong>Settings</strong> page and paste the Twitter consumer API key into the Syndesis Twitter <strong>Consumer API Key</strong> field.</p></li><li><p>Return to the Twitter <strong>Keys and tokens</strong> tab and copy the consumer API secret key.</p></li><li><p>Return to your Syndesis <strong>Settings</strong> page and paste the Twitter consumer API secret key into the Syndesis Twitter <strong>Consumer API Secret Key</strong> field.</p></li><li><p>Click <strong>Save</strong>.</p></li><li><p>Click the <strong>Twitter</strong> entry to collapse it.</p></li></ol></div></div><div class="sect2"><h3 id="create-twitter-connection_twitter">27.2. Creating a Twitter connection</h3><div class="paragraph"><p>To create an integration that obtains data from Twitter, you must first create a Twitter connection. After you create a Twitter connection, you can use it in any number of integrations.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You are logged in to Syndesis.</p></li><li><p>Syndesis is open in a web browser.</p></li><li><p>You registered your Syndesis environment as an application that can access Twitter.</p></li><li><p>You added the Twitter consumer API key and consumer API secret key that you received after registration to the Syndesis <strong>Settings</strong> page.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>In Syndesis, in the left panel, click <strong>Connections</strong> to display any available connections.</p></li><li><p>In the upper right, click <strong>Create Connection</strong> to display the available connectors. A connector is a template that you use to create one or more connections.</p></li><li><p>Click the <strong>Twitter</strong> connector.</p></li><li><p>Click <strong>Connect Twitter</strong> to display a Twitter authorization page. You might need to log in to Twitter before you see the authorization page.</p><div class="paragraph"><p>If <strong>Connect Twitter</strong> does not appear, then your Syndesis environment is not registered as a Twitter client application. See <a href="https://access.redhat.com/documentation/en-us/red_hat_fuse/7.6/html-single/connecting_fuse_online_to_applications_and_services/#register-with-twitter_twitter">Registering Syndesis as a Twitter client application</a>. When you try to create a Twitter connection and your Syndesis environment is not registered as a Twitter client application, then Syndesis displays multiple fields that prompt for authorization information. While you can create a Twitter connection by entering values in these fields, it is not recommended.</p></div></li><li><p>Click <strong>Authorize app</strong> to return to Syndesis.</p></li><li><p>In the <strong>Name</strong> field, enter your choice of a name that helps you distinguish this connection from any other connections. For example, enter <code><strong>Twitter Connect 1</strong></code>.</p></li><li><p>In the <strong>Description</strong> field, optionally enter any information that is helpful to know about this connection. For example, enter <code><strong>Sample Twitter connection that uses my Twitter login credentials.</strong></code></p></li><li><p>Click <strong>Save</strong> to see that the connection you created is now available. If you entered the example name, you would see that <strong>Twitter Connect 1</strong> appears as a connection that you can choose to add to an integration.</p></li></ol></div></div><div class="sect2"><h3 id="adding-twitter-connection-start_twitter">27.3. Adding a Twitter connection to trigger integration execution</h3><div class="paragraph"><p>In a simple integration, the start connection can be a Twitter connection that triggers execution of the integration when it finds certain tweets or direct messages.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Twitter connection.</p></li><li><p>You are creating or editing a simple integration and Syndesis is prompting you to choose the start connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>Click the Twitter connection that starts the integration. When the integration uses the selected connection to connect to Twitter, Syndesis uses the credentials defined in that connection.</p></li><li><p>Select the action that you want the connection to perform. A Twitter connection that you add to an integration performs only the action that you choose:</p><div class="ulist"><ul><li><p><strong>Mention</strong> monitors Twitter for tweets that contain the Twitter handle for the Twitter account that the connection is authorized to access. Upon finding such a tweet, the connection returns it to Syndesis, which triggers execution of the integration.</p></li><li><p><strong>Retrieve</strong> periodically polls Twitter for direct messages sent to the Twitter account that the Twitter connection is authorized to access. Upon finding such messages, the connection returns them to Syndesis, which triggers execution of the integration.</p></li><li><p><strong>Search</strong> periodically polls Twitter for tweets that match criteria that you specify. Upon finding such tweets, the connection returns them to Syndesis, which triggers execution of the integration.</p></li></ul></div></li><li><p>Configure the action that you selected:</p><div class="ulist"><ul><li><p><strong>Mention</strong> does not require any configuration.</p></li><li><p><strong>Retrieve</strong></p><div class="ulist"><ul><li><p><strong>Count</strong> has a default of 100 and you should not need to change this value, which affects internal behavior. However, do not set this value to less than 50 because doing so might decrease performance.</p><div class="paragraph"><p>The <strong>Retrieve</strong> action always returns all previously unreturned direct messages received in the last 30 days. If you do not select <strong>Ignore direct messages previously found</strong>, then the <strong>Retrieve</strong> action returns all messages that have been received in the last 30 days.</p></div></li><li><p><strong>Delay</strong> is the period of time between polls. Twitter enforces rate limits, so you should not poll too often. The default interval is 5 seconds.</p></li><li><p><strong>Ignore direct messages previously found</strong> returns only new messages when selected.</p></li></ul></div></li><li><p><strong>Search</strong></p><div class="ulist"><ul><li><p><strong>Delay</strong> is the period of time between polls. Twitter enforces rate limits, so you should not poll too often. The default interval is 5 seconds.</p></li><li><p><strong>Ignore tweets previously found</strong> returns only new tweets when selected.</p></li><li><p><strong>Query</strong> is a Twitter-formatted search expression that specifies the tweets that you want the connection to return. The following table provides examples of what you can enter. More details are in this <a href="https://developer.twitter.com/en/docs/tweets/rules-and-filtering/overview/standard-operators.html">Twitter document for search operators</a>.</p><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width:50%"><col style="width:50%"></colgroup><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Query</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Results</strong></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>My Product</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtains tweets that contain both <code>My</code> and <code>Product</code>, but not necessarily <code>My Product</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>"My Product”</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtains tweets that contain an instance of <code>My Product</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>My OR Product</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtains tweets that contain an instance of <code>My</code> or <code>Product</code> or an instance of each one.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>My -Product</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtains tweets that contain an instance of <code>My</code> and do not contain an instance of <code>Product</code>.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><code>#MyProduct</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obtains tweets that contain the <code>MyProduct</code> hashtag.</p></td></tr></tbody></table></li></ul></div></li></ul></div></li><li><p>Click <strong>Next</strong> to add the connection to the integration.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The integration now has a start connection and Syndesis is prompting you to choose the finish connection.</p></div></div><div class="sect2"><h3 id="adding-twitter-connection-finish-middle_twitter">27.4. Adding a Twitter connection that sends a direct message</h3><div class="paragraph"><p>In the middle of a flow, or to finish a simple integration, you can add a Twitter connection that sends a direct message to a Twitter user. A direct message is a private message that goes to only the specified user.</p></div><div class="ulist"><div class="title">Prerequisites</div><ul><li><p>You created a Twitter connection.</p></li><li><p>You are creating or editing a flow and Syndesis is prompting you to add to the integration. Or, for a simple integration, Syndesis is prompting you to choose a finish connection.</p></li></ul></div><div class="olist arabic"><div class="title">Procedure</div><ol class="arabic"><li><p>On the <strong>Add to Integration</strong> page, click the plus sign where you want to add a Twitter connection.</p></li><li><p>Click the Twitter connection that you want to add to the integration. When the integration uses the selected connection to connect to Twitter, Syndesis uses the credentials defined in that connection.</p></li><li><p>Select the <strong>Send</strong> action.</p></li><li><p>In the <strong>Default Message</strong> field, enter the message that you want the connection to send when a data mapper step does not map the direct message content from a previous step to this Twitter connection. While you must enter a message when you configure this Twitter connection, a message that you map from a previous step has precedence over the message that you specify here.</p></li><li><p>In the <strong>User</strong> field, enter the Twitter handle of the user who you want to send a direct message to. For example, both <strong>Aslan</strong> and <strong>@Aslan</strong> are correct.</p></li><li><p>Click <strong>Next</strong> to add the connection to the integration.</p></li></ol></div><div class="paragraph"><div class="title">Result</div><p>The connection appears in the middle or at the end of an integration visualization.</p></div></div></div></div></div><div id="footer"><div id="footer-text">Last updated 2020-04-22 14:07:07 +0200</div></div><footer class="page-footer text-center"><div class="row"><section class="col-md-6"><i class="fab fa-3x fa-github" aria-hidden="true"></i><h4>Get the source code</h4><p>Stay tuned to contribute or build your own solution.</p><p class="link-button"><a href="https://github.com/syndesisio" rel="nofollow" target="_blank" class="btn btn-primary">Syndesis on GitHub</a></p></section><section class="col-md-6"><i class="fas fa-3x fa-comments"></i><h4>Connect with us</h4><p>Chat with the Syndesis community.</p><p class="link-button"><a href="https://gitter.im/syndesisio/community" rel="nofollow" target="_blank" class="btn btn-primary">syndesisio on Gitter</a></p></section></div><div class="rh-logo"><section><a href="https://www.redhat.com" rel="nofollow" title="Red Hat, Inc." target="_blank"><img width="128" height="42" src="/images/redhatnew.svg" alt="Red Hat, Inc."></a></section></div></footer></body></html>